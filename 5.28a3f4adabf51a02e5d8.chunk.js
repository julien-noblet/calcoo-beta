webpackJsonp([5],{1126:function(n,e,t){"use strict";function r(n){return i["ɵvid"](0,[(n()(),i["ɵeld"](0,null,null,5,"div",[["class","card-header clearfix"]],null,null,null,null,null)),(n()(),i["ɵted"](null,["\n        "])),(n()(),i["ɵeld"](0,null,null,2,"h3",[["class","card-title"],["translate",""]],null,null,null,null,null)),i["ɵdid"](4268032,null,0,u.a,[a.a,i.ElementRef,i.ChangeDetectorRef],{translate:[0,"translate"]},null),(n()(),i["ɵted"](null,["",""])),(n()(),i["ɵted"](null,["\n    "]))],(function(n,e){n(e,3,0,"")}),(function(n,e){n(e,4,0,e.component.title)}))}function o(n){return i["ɵvid"](0,[(n()(),i["ɵeld"](0,null,null,11,"div",[["baCardBlur",""],["zoom-in",""]],[[8,"className",0],[2,"card-blur",null]],[["window","resize"]],(function(n,e,t){var r=!0;if("window:resize"===e){r=!1!==i["ɵnov"](n,2)._onWindowResize()&&r}return r}),null,null)),i["ɵprd"](256,null,s.a,s.a,[]),i["ɵdid"](8192,null,0,c.a,[d.a,s.a,i.ElementRef],null,null),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵand"](8388608,null,null,1,null,r)),i["ɵdid"](8192,null,0,f.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵeld"](0,null,null,3,"div",[["class","card-body"]],null,null,null,null,null)),(n()(),i["ɵted"](null,["\n        "])),i["ɵncd"](null,0),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵted"](null,["\n"])),(n()(),i["ɵted"](null,["\n"]))],(function(n,e){n(e,5,0,e.component.title)}),(function(n,e){var t=e.component;n(e,0,0,i["ɵinlineInterpolate"](2,"animated fadeIn card ",t.cardType," ",t.baCardClass||"",""),i["ɵnov"](e,2).isEnabled)}))}function l(n){return i["ɵvid"](0,[(n()(),i["ɵeld"](0,null,null,1,"ba-card",[],null,null,null,o,v)),i["ɵdid"](24576,null,0,p.a,[],null,null)],null,null)}var i=t(0),u=t(105),a=t(57),s=t(580),c=t(579),d=t(104),f=t(9),p=t(578);t.d(e,"b",(function(){return v})),e.a=o;var h=[],v=i["ɵcrt"]({encapsulation:2,styles:h,data:{}});i["ɵccf"]("ba-card",p.a,l,{title:"title",baCardClass:"baCardClass",cardType:"cardType"},{},["*"])},1127:function(n,e,t){"use strict";var r=t(1132),o=t(1133);e.async=new o.AsyncScheduler(r.AsyncAction)},1129:function(n,e,t){"use strict";var r=t(1179);t.d(e,"a",(function(){return r.a})),t.d(e,"b",(function(){return r.b})),t.d(e,"d",(function(){return r.c}));var o=t(1233);t.d(e,"c",(function(){return o.a})),t.d(e,"e",(function(){return o.b}));var l=(t(1162),t(1165));t.d(e,"f",(function(){return l.b}))},1130:function(n,e,t){"use strict";var r=t(0),o=t(24),l=t(1135);t.d(e,"a",(function(){return i}));var i=(function(){function n(n){var e=this;this.notify=new r.EventEmitter,this.addressForm=n.group({housenumber:[""],street:[""],city:[""],postcode:[""],complement:[""]}),this.addressForm.valueChanges.subscribe((function(n){e.notify.emit(n)}))}return n.prototype.ngOnInit=function(){void 0===this.address&&(this.address=new l.a),this.addressForm.patchValue(this.address)},n})();__decorate([t.i(r.Input)(),__metadata("design:type",l.a)],i.prototype,"address",void 0),__decorate([t.i(r.Input)(),__metadata("design:type",Boolean)],i.prototype,"editable",void 0),__decorate([t.i(r.Output)(),__metadata("design:type",r.EventEmitter)],i.prototype,"notify",void 0),i=__decorate([t.i(r.Component)({selector:"address-element",template:t(1313)}),__param(0,t.i(r.Inject)(o.FormBuilder)),__metadata("design:paramtypes",[o.FormBuilder])],i)},1132:function(n,e,t){"use strict";var r=this&&this.__extends||function(n,e){function t(){this.constructor=n}for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},o=t(76),l=t(1153),i=(function(n){function e(e,t){n.call(this,e,t),this.scheduler=e,this.work=t,this.pending=!1}return r(e,n),e.prototype.schedule=function(n,e){if(void 0===e&&(e=0),this.closed)return this;this.state=n,this.pending=!0;var t=this.id,r=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(r,t,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(n,e,t){return void 0===t&&(t=0),o.root.setInterval(n.flush.bind(n,this),t)},e.prototype.recycleAsyncId=function(n,e,t){return void 0===t&&(t=0),null!==t&&this.delay===t?e:o.root.clearInterval(e)&&void 0||void 0},e.prototype.execute=function(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var t=this._execute(n,e);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,e){var t=!1,r=void 0;try{this.work(n)}catch(n){t=!0,r=!!n&&n||new Error(n)}if(t)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var n=this.id,e=this.scheduler,t=e.actions,r=t.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&t.splice(r,1),null!=n&&(this.id=this.recycleAsyncId(e,n,null))},e})(l.Action);e.AsyncAction=i},1133:function(n,e,t){"use strict";var r=this&&this.__extends||function(n,e){function t(){this.constructor=n}for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},o=t(1150),l=(function(n){function e(){n.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(e,n),e.prototype.flush=function(n){var e=this.actions;if(this.active)return void e.push(n);var t;this.active=!0;do{if(t=n.execute(n.state,n.delay))break}while(n=e.shift());if(this.active=!1,t){for(;n=e.shift();)n.unsubscribe();throw t}},e})(o.Scheduler);e.AsyncScheduler=l},1134:function(n,e,t){"use strict";var r=t(8),o=t(1152);r.Observable.prototype.debounceTime=o.debounceTime},1135:function(n,e,t){"use strict";var r=t(0);t.d(e,"a",(function(){return o}));var o=(function(){function n(){this.street="",this.city="",this.postcode=""}return n})();o=__decorate([t.i(r.Injectable)(),__metadata("design:paramtypes",[])],o)},1137:function(n,e,t){"use strict";var r=t(8),o=t(1142);r.Observable.prototype.distinctUntilChanged=o.distinctUntilChanged},1138:function(n,e,t){"use strict";var r=t(0),o=t(24),l=t(1139),i=t(1177),u=(t.n(i),t(1134)),a=(t.n(u),t(1137)),s=(t.n(a),t(131));t.n(s);t.d(e,"a",(function(){return c})),t.d(e,"b",(function(){return d}));var c=(function(){function n(n){var e=this;this.notify=new r.EventEmitter,this.checkboxModel=[{name:"Checkbox with success",state:!1,class:"has-success checkbox"}],this.checkboxPropertiesMapping={model:"state",value:"name",label:"name",baCheckboxClass:"class"};var t=!0;this.colisForm=n.group({id:0,x:0,y:0,z:0,poids:0,paletisable:!0,percent:100}),void 0===this.colis&&(this.colis=new l.a),this.colisForm.valueChanges.debounceTime(1e3).distinctUntilChanged().subscribe((function(n){t?t=!1:(e.colis.x=Number.parseFloat(n.x),e.colis.y=Number.parseFloat(n.y),e.colis.z=Number.parseFloat(n.z),e.colis.poids=Number.parseFloat(n.poids),e.colis.percent=Number.parseFloat(n.percent),e.colis.paletisable=n.paletisable,e.notify.emit(n))}))}return n.prototype.ngOnInit=function(){void 0===this.colis&&(this.colis=new l.a),void 0===this.colisService&&(this.colisService=new l.b),this.colisForm.patchValue(this.colis)},n.prototype.developpe=function(n){var e=n.x||0,t=n.y||0,r=n.z||0;return Math.min(2*e+2*t+r,e+2*t+2*r,2*e+t+2*r)},n.prototype.valid=function(n){return!((n.poids||0)>31.5||this.developpe(n)>3150)},n.prototype.convoyable=function(n){return!(n.x>1200||n.y>1200||n.z>1200)},n})();__decorate([t.i(r.Input)(),__metadata("design:type",l.a)],c.prototype,"colis",void 0),__decorate([t.i(r.Input)(),__metadata("design:type",Boolean)],c.prototype,"editable",void 0),__decorate([t.i(r.Output)(),__metadata("design:type",r.EventEmitter)],c.prototype,"notify",void 0),c=__decorate([t.i(r.Component)({selector:"colis-element",template:t(1315)}),__param(0,t.i(r.Inject)(o.FormBuilder)),__metadata("design:paramtypes",[o.FormBuilder])],c);var d=(function(){function n(){this.notify=new r.EventEmitter}return n.prototype.ngOnInit=function(){void 0===this.list&&(this.list=[])},n.prototype.addColis=function(){var n=new l.a;n.id=this.list.length,this.list.push(n)},n.prototype.colisOnNotify=function(n){this.list[n.id]=n,this.notify.emit(this.list)},n.prototype.getlist=function(){return this.list},n})();__decorate([t.i(r.Input)(),__metadata("design:type",Array)],d.prototype,"list",void 0),__decorate([t.i(r.Input)(),__metadata("design:type",Boolean)],d.prototype,"editable",void 0),__decorate([t.i(r.Output)(),__metadata("design:type",r.EventEmitter)],d.prototype,"notify",void 0),d=__decorate([t.i(r.Component)({selector:"colis-list",template:t(1314)}),__metadata("design:paramtypes",[])],d)},1139:function(n,e,t){"use strict";var r=t(0);t.d(e,"a",(function(){return o})),t.d(e,"b",(function(){return l}));var o=(function(){function n(){this.id=0,this.x=0,this.y=0,this.z=0,this.poids=0,this.paletisable=!1,this.percent=0}return n})();o=__decorate([t.i(r.Injectable)(),__metadata("design:paramtypes",[])],o);var l=(function(){function n(){}return n.developpe=function(n){var e=n.x||0,t=n.y||0,r=n.z||0;return Math.min(2*e+2*t+r,e+2*t+2*r,2*e+t+2*r)},n.valid=function(n){return!((n.poids||0)>31.5||this.developpe(n)>3150)},n.convoyable=function(n){return!(n.x>1200||n.y>1200||n.z>1200)},n.prototype.vp=function(n){return void 0!==n.poids&&n.poids<31.5},n})();l=__decorate([t.i(r.Injectable)()],l)},1140:function(n,e,t){"use strict";var r=t(0),o=t(24),l=t(1165),i=t(1129);t.d(e,"a",(function(){return u}));var u=(function(){function n(n){var e=this;this.fb=n,this.notify=new r.EventEmitter;var t=new i.d(n),o=new i.e(n);this.prospectForm=this.fb.group({name:"",address:t.addressForm,agenceRef:"",colisMois:0,dimensionsColis:this.fb.array([o.colisForm]),surAppel:!1}),this.prospectForm.valueChanges.subscribe((function(n){console.log("Form changes",n),e.notify.emit(n)}))}return n.prototype.ngOnInit=function(){void 0===this.prospect&&(this.prospect=new l.a),this.prospectForm.patchValue(this.prospect)},n.prototype.addressChanges=function(n){this.prospectForm.patchValue({address:n})},n.prototype.colisChanges=function(n){console.log("message",n);var e=this.prospectForm.value;e.dimensionsColis=n,console.log("prospect",this.prospectForm.value),this.prospectForm.setValue(e)},n})();__decorate([t.i(r.Input)(),__metadata("design:type",l.a)],u.prototype,"prospect",void 0),__decorate([t.i(r.Input)(),__metadata("design:type",Boolean)],u.prototype,"editable",void 0),__decorate([t.i(r.Output)(),__metadata("design:type",r.EventEmitter)],u.prototype,"notify",void 0),u=__decorate([t.i(r.Component)({selector:"prospect-element",template:t(1321)}),__metadata("design:paramtypes",[o.FormBuilder])],u)},1142:function(n,e,t){"use strict";function r(n,e){return this.lift(new a(n,e))}var o=this&&this.__extends||function(n,e){function t(){this.constructor=n}for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},l=t(27),i=t(299),u=t(180);e.distinctUntilChanged=r;var a=(function(){function n(n,e){this.compare=n,this.keySelector=e}return n.prototype.call=function(n,e){return e.subscribe(new s(n,this.compare,this.keySelector))},n})(),s=(function(n){function e(e,t,r){n.call(this,e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}return o(e,n),e.prototype.compare=function(n,e){return n===e},e.prototype._next=function(n){var e=this.keySelector,t=n;if(e&&(t=i.tryCatch(this.keySelector)(n))===u.errorObject)return this.destination.error(u.errorObject.e);var r=!1;if(this.hasKey){if((r=i.tryCatch(this.compare)(this.key,t))===u.errorObject)return this.destination.error(u.errorObject.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=t,this.destination.next(n))},e})(l.Subscriber)},1143:function(n,e,t){"use strict";var r=t(0),o=t(588);t.d(e,"a",(function(){return l}));var l=(function(){function n(){this.id=0,this.email=""}return n.emailIsValid=function(n){var e;return e.setValue(n),o.a.validate(e).validateEmail.valid},n})();l=__decorate([t.i(r.Injectable)(),__metadata("design:paramtypes",[])],l)},1144:function(n,e,t){"use strict";var r=t(0);t.d(e,"a",(function(){return o}));var o=(function(){function n(){this.id=0,this.number=""}return n})();o=__decorate([t.i(r.Injectable)(),__metadata("design:paramtypes",[])],o)},1145:function(n,e,t){"use strict";var r=t(0),o=t(8),l=(t.n(o),t(90)),i=t(1151),u=(t.n(i),t(131)),a=(t.n(u),t(1488)),s=(t.n(a),t(1551));t.d(e,"b",(function(){return c})),t.d(e,"a",(function(){return d}));var c=(function(){function n(n){this.http=n}return n.prototype.getAdressFromOSM=function(n){var e="https://overpass-api.de/api/interpreter?data=%5Bout%3Ajson%5D%3B%0Anode%0A%20%20%5B%22ref%3AFR%3AGLS%22%3D%22"+n+"%22%5D%3B%0Aout%3B";return this.http.get(e).map((function(n){return n.json().elements[0]})).catch((function(n){return o.Observable.throw(n.json().error||"Server error")}))},n})();c=__decorate([t.i(r.Injectable)(),__metadata("design:paramtypes",[l.Http])],c);var d=(function(n){function e(){var e=n.call(this)||this;return e.type="agence",e}return __extends(e,n),e.prototype.GetAllByRef=function(){return n.prototype.GetAllByRef.call(this,this.type)},e.prototype.GetByRef=function(e){return n.prototype.GetByRef.call(this,e,this.type)},e})(s.a)},1150:function(n,e,t){"use strict";var r=(function(){function n(e,t){void 0===t&&(t=n.now),this.SchedulerAction=e,this.now=t}return n.prototype.schedule=function(n,e,t){return void 0===e&&(e=0),new this.SchedulerAction(this,n).schedule(t,e)},n.now=Date.now?Date.now:function(){return+new Date},n})();e.Scheduler=r},1151:function(n,e,t){"use strict";var r=t(8),o=t(589);r.Observable.prototype.catch=o._catch,r.Observable.prototype._catch=o._catch},1152:function(n,e,t){"use strict";function r(n,e){return void 0===e&&(e=u.async),this.lift(new a(n,e))}function o(n){n.debouncedNext()}var l=this&&this.__extends||function(n,e){function t(){this.constructor=n}for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},i=t(27),u=t(1127);e.debounceTime=r;var a=(function(){function n(n,e){this.dueTime=n,this.scheduler=e}return n.prototype.call=function(n,e){return e.subscribe(new s(n,this.dueTime,this.scheduler))},n})(),s=(function(n){function e(e,t,r){n.call(this,e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return l(e,n),e.prototype._next=function(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(o,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)},e})(i.Subscriber)},1153:function(n,e,t){"use strict";var r=this&&this.__extends||function(n,e){function t(){this.constructor=n}for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},o=t(106),l=(function(n){function e(e,t){n.call(this)}return r(e,n),e.prototype.schedule=function(n,e){return void 0===e&&(e=0),this},e})(o.Subscription);e.Action=l},1154:function(n,e,t){"use strict";var r=t(0),o=t(1129);t.d(e,"a",(function(){return l}));var l=(function(){function n(){this.address=new o.a,this.colisMois=0,this.name=""}return n.prototype.totalVolume=function(){for(var n=0,e=0,t=this.dimensionsColis;e<t.length;e++){var r=t[e];n+=(r.percent||1)*(r.x+r.y+r.z)}return this.colisMois*n},n.prototype.totalPoids=function(){for(var n=0,e=0,t=this.dimensionsColis;e<t.length;e++){var r=t[e];n+=(r.percent||1)*r.poids}return this.colisMois*n},n})();l=__decorate([t.i(r.Injectable)(),__metadata("design:paramtypes",[])],l)},1158:function(n,e,t){"use strict";function r(n){return l["ɵvid"](0,[(n()(),l["ɵeld"](0,null,null,78,"ba-card",[["title","Addresse"]],null,null,null,i.a,i.b)),l["ɵdid"](24576,null,0,u.a,[],{title:[0,"title"]},null),(n()(),l["ɵted"](0,["\n  "])),(n()(),l["ɵeld"](0,null,0,74,"div",[["class","form-group"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,e,t){var r=!0;if("submit"===e){r=!1!==l["ɵnov"](n,4).onSubmit(t)&&r}if("reset"===e){r=!1!==l["ɵnov"](n,4).onReset()&&r}return r}),null,null)),l["ɵdid"](270336,null,0,a.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),l["ɵprd"](1024,null,a.ControlContainer,null,[a.FormGroupDirective]),l["ɵdid"](8192,null,0,a.NgControlStatusGroup,[a.ControlContainer],null,null),(n()(),l["ɵted"](null,["\n    "])),(n()(),l["ɵeld"](0,null,null,33,"div",[["class","row justify-content-around"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["\n      "])),(n()(),l["ɵeld"](0,null,null,14,"div",[["class","col-md-4"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["\n        "])),(n()(),l["ɵeld"](0,null,null,11,"div",[["class","input-group"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["\n          "])),(n()(),l["ɵeld"](0,null,null,1,"span",[["class","input-group-addon addon-left input-group-addon-success"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["N° de voie : "])),(n()(),l["ɵted"](null,["\n          "])),(n()(),l["ɵeld"](0,null,null,5,"input",[["class","form-control  with-success-addon "],["formControlName","housenumber"],["ng-disabled","!editable"],["placeholder","0"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==l["ɵnov"](n,18)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==l["ɵnov"](n,18).onTouched()&&r}if("compositionstart"===e){r=!1!==l["ɵnov"](n,18)._compositionStart()&&r}if("compositionend"===e){r=!1!==l["ɵnov"](n,18)._compositionEnd(t.target.value)&&r}return r}),null,null)),l["ɵdid"](8192,null,0,a.DefaultValueAccessor,[l.Renderer,l.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),l["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),l["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),l["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),l["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),l["ɵted"](null,["\n        "])),(n()(),l["ɵted"](null,["\n      "])),(n()(),l["ɵted"](null,["\n      "])),(n()(),l["ɵeld"](0,null,null,14,"div",[["class","col"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["\n        "])),(n()(),l["ɵeld"](0,null,null,11,"div",[["class","input-group"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["\n          "])),(n()(),l["ɵeld"](0,null,null,1,"span",[["class","input-group-addon addon-left input-group-addon-success"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["Rue : "])),(n()(),l["ɵted"](null,["\n          "])),(n()(),l["ɵeld"](0,null,null,5,"input",[["class","form-control  with-success-addon "],["formControlName","street"],["ng-disabled","!editable"],["placeholder","Rue"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==l["ɵnov"](n,34)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==l["ɵnov"](n,34).onTouched()&&r}if("compositionstart"===e){r=!1!==l["ɵnov"](n,34)._compositionStart()&&r}if("compositionend"===e){r=!1!==l["ɵnov"](n,34)._compositionEnd(t.target.value)&&r}return r}),null,null)),l["ɵdid"](8192,null,0,a.DefaultValueAccessor,[l.Renderer,l.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),l["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),l["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),l["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),l["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),l["ɵted"](null,["\n        "])),(n()(),l["ɵted"](null,["\n      "])),(n()(),l["ɵted"](null,["\n    "])),(n()(),l["ɵted"](null,["\n    "])),(n()(),l["ɵeld"](0,null,null,33,"div",[["class","row justify-content-around"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["\n      "])),(n()(),l["ɵeld"](0,null,null,14,"div",[["class","col-md-4"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["\n        "])),(n()(),l["ɵeld"](0,null,null,11,"div",[["class","input-group"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["\n          "])),(n()(),l["ɵeld"](0,null,null,1,"span",[["class","input-group-addon addon-left input-group-addon-success"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["Code Postal : "])),(n()(),l["ɵted"](null,["\n          "])),(n()(),l["ɵeld"](0,null,null,5,"input",[["class","form-control  with-success-addon "],["formControlName","postcode"],["ng-disabled","!editable"],["placeholder","00000"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==l["ɵnov"](n,53)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==l["ɵnov"](n,53).onTouched()&&r}if("compositionstart"===e){r=!1!==l["ɵnov"](n,53)._compositionStart()&&r}if("compositionend"===e){r=!1!==l["ɵnov"](n,53)._compositionEnd(t.target.value)&&r}return r}),null,null)),l["ɵdid"](8192,null,0,a.DefaultValueAccessor,[l.Renderer,l.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),l["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),l["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),l["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),l["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),l["ɵted"](null,["\n        "])),(n()(),l["ɵted"](null,["\n      "])),(n()(),l["ɵted"](null,["\n      "])),(n()(),l["ɵeld"](0,null,null,14,"div",[["class","col"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["\n        "])),(n()(),l["ɵeld"](0,null,null,11,"div",[["class","input-group"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["\n          "])),(n()(),l["ɵeld"](0,null,null,1,"span",[["class","input-group-addon addon-left input-group-addon-success"]],null,null,null,null,null)),(n()(),l["ɵted"](null,["Commune : "])),(n()(),l["ɵted"](null,["\n          "])),(n()(),l["ɵeld"](0,null,null,5,"input",[["class","form-control  with-success-addon "],["formControlName","city"],["ng-disabled","!editable"],["placeholder","Ville"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==l["ɵnov"](n,69)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==l["ɵnov"](n,69).onTouched()&&r}if("compositionstart"===e){r=!1!==l["ɵnov"](n,69)._compositionStart()&&r}if("compositionend"===e){r=!1!==l["ɵnov"](n,69)._compositionEnd(t.target.value)&&r}return r}),null,null)),l["ɵdid"](8192,null,0,a.DefaultValueAccessor,[l.Renderer,l.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),l["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),l["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),l["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),l["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),l["ɵted"](null,["\n        "])),(n()(),l["ɵted"](null,["\n      "])),(n()(),l["ɵted"](null,["\n    "])),(n()(),l["ɵted"](null,["\n  "])),(n()(),l["ɵted"](0,["\n"])),(n()(),l["ɵted"](null,["\n"]))],(function(n,e){var t=e.component;n(e,1,0,"Addresse"),n(e,4,0,t.addressForm);n(e,20,0,"housenumber");n(e,36,0,"street");n(e,55,0,"postcode");n(e,71,0,"city")}),(function(n,e){n(e,3,0,l["ɵnov"](e,6).ngClassUntouched,l["ɵnov"](e,6).ngClassTouched,l["ɵnov"](e,6).ngClassPristine,l["ɵnov"](e,6).ngClassDirty,l["ɵnov"](e,6).ngClassValid,l["ɵnov"](e,6).ngClassInvalid,l["ɵnov"](e,6).ngClassPending),n(e,17,0,l["ɵnov"](e,22).ngClassUntouched,l["ɵnov"](e,22).ngClassTouched,l["ɵnov"](e,22).ngClassPristine,l["ɵnov"](e,22).ngClassDirty,l["ɵnov"](e,22).ngClassValid,l["ɵnov"](e,22).ngClassInvalid,l["ɵnov"](e,22).ngClassPending),n(e,33,0,l["ɵnov"](e,38).ngClassUntouched,l["ɵnov"](e,38).ngClassTouched,l["ɵnov"](e,38).ngClassPristine,l["ɵnov"](e,38).ngClassDirty,l["ɵnov"](e,38).ngClassValid,l["ɵnov"](e,38).ngClassInvalid,l["ɵnov"](e,38).ngClassPending),n(e,52,0,l["ɵnov"](e,57).ngClassUntouched,l["ɵnov"](e,57).ngClassTouched,l["ɵnov"](e,57).ngClassPristine,l["ɵnov"](e,57).ngClassDirty,l["ɵnov"](e,57).ngClassValid,l["ɵnov"](e,57).ngClassInvalid,l["ɵnov"](e,57).ngClassPending),n(e,68,0,l["ɵnov"](e,73).ngClassUntouched,l["ɵnov"](e,73).ngClassTouched,l["ɵnov"](e,73).ngClassPristine,l["ɵnov"](e,73).ngClassDirty,l["ɵnov"](e,73).ngClassValid,l["ɵnov"](e,73).ngClassInvalid,l["ɵnov"](e,73).ngClassPending)}))}function o(n){return l["ɵvid"](0,[(n()(),l["ɵeld"](0,null,null,1,"address-element",[],null,null,null,r,d)),l["ɵdid"](57344,null,0,s.a,[a.FormBuilder],null,null)],(function(n,e){n(e,1,0)}),null)}var l=t(0),i=t(1126),u=t(578),a=t(24),s=t(1130);t.d(e,"c",(function(){return d})),e.b=r,t.d(e,"a",(function(){return f}));var c=[],d=l["ɵcrt"]({encapsulation:2,styles:c,data:{}}),f=l["ɵccf"]("address-element",s.a,o,{address:"address",editable:"editable"},{notify:"notify"},[])},1161:function(n,e,t){"use strict";var r=t(0),o=t(9),l=t(179),i=t(1130),u=t(24),a=t(1135);t.d(e,"a",(function(){return s}));var s=(function(){function n(){}return n})();s=__decorate([t.i(r.NgModule)({imports:[o.CommonModule,l.a,u.ReactiveFormsModule],declarations:[i.a],providers:[a.a,i.a],exports:[i.a],bootstrap:[i.a]})],s)},1162:function(n,e,t){"use strict";var r=t(1164);t.d(e,"a",(function(){return r.a}));t(1144),t(1143),t(1163),t(1235)},1163:function(n,e,t){"use strict";var r=t(0),o=t(24),l=t(1162);t.d(e,"a",(function(){return i}));var i=(function(){function n(n){var e=this;this.fb=n,this.notify=new r.EventEmitter,this.personForm=this.fb.group({name:"",surname:"",phones:this.fb.array([this.fb.group({id:0,number:""})]),emails:this.fb.array([this.fb.group({id:0,email:""})])}),this.personForm.valueChanges.subscribe((function(n){e.notify.emit(n)}))}return n.prototype.ngOnInit=function(){void 0===this.person&&(this.person=new l.a),this.personForm.patchValue({name:this.person.name,surname:this.person.surname})},n.prototype.phonesChanges=function(n){this.personForm.patchValue({phones:n})},n.prototype.emailsChanges=function(n){this.personForm.patchValue({email:n})},n})();__decorate([t.i(r.Input)(),__metadata("design:type",l.a)],i.prototype,"person",void 0),__decorate([t.i(r.Input)(),__metadata("design:type",Boolean)],i.prototype,"editable",void 0),__decorate([t.i(r.Output)(),__metadata("design:type",r.EventEmitter)],i.prototype,"notify",void 0),i=__decorate([t.i(r.Component)({selector:"person-element",template:t(1318)}),__metadata("design:paramtypes",[o.FormBuilder])],i)},1164:function(n,e,t){"use strict";var r=t(0);t.d(e,"a",(function(){return o}));var o=(function(){function n(){this.name="",this.surname=""}return n})();o=__decorate([t.i(r.Injectable)(),__metadata("design:paramtypes",[])],o)},1165:function(n,e,t){"use strict";var r=t(1154);t.d(e,"a",(function(){return r.a}));var o=(t(1140),t(1181));t.d(e,"b",(function(){return o.a}))},1177:function(n,e,t){"use strict";var r=t(8),o=t(1178);r.Observable.prototype.debounce=o.debounce},1178:function(n,e,t){"use strict";function r(n){return this.lift(new u(n))}var o=this&&this.__extends||function(n,e){function t(){this.constructor=n}for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)},l=t(102),i=t(103);e.debounce=r;var u=(function(){function n(n){this.durationSelector=n}return n.prototype.call=function(n,e){return e.subscribe(new a(n,this.durationSelector))},n})(),a=(function(n){function e(e,t){n.call(this,e),this.durationSelector=t,this.hasValue=!1,this.durationSubscription=null}return o(e,n),e.prototype._next=function(n){try{var e=this.durationSelector.call(this,n);e&&this._tryNext(n,e)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(n,e){var t=this.durationSubscription;this.value=n,this.hasValue=!0,t&&(t.unsubscribe(),this.remove(t)),t=i.subscribeToResult(this,e),t.closed||this.add(this.durationSubscription=t)},e.prototype.notifyNext=function(n,e,t,r,o){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,t=this.durationSubscription;t&&(this.durationSubscription=null,t.unsubscribe(),this.remove(t)),this.value=null,this.hasValue=!1,n.prototype._next.call(this,e)}},e})(l.OuterSubscriber)},1179:function(n,e,t){"use strict";var r=t(1130);t.d(e,"c",(function(){return r.a}));var o=t(1135);t.d(e,"a",(function(){return o.a}));var l=t(1161);t.d(e,"b",(function(){return l.a}))},1180:function(n,e,t){"use strict";var r=t(0),o=t(9),l=t(179),i=t(24),u=t(1139),a=t(1138);t.d(e,"a",(function(){return s}));var s=(function(){function n(){}return n})();s=__decorate([t.i(r.NgModule)({imports:[o.CommonModule,l.a,i.ReactiveFormsModule],declarations:[a.a,a.b],providers:[u.a,u.b,a.a,a.b],exports:[a.a,a.b],bootstrap:[a.a,a.b]})],s)},1181:function(n,e,t){"use strict";var r=t(0),o=t(9),l=t(179),i=t(24),u=t(1154),a=t(1140),s=t(1129);t.d(e,"a",(function(){return c}));var c=(function(){function n(){}return n})();c=__decorate([t.i(r.NgModule)({imports:[o.CommonModule,l.a,i.ReactiveFormsModule,s.b,s.c],declarations:[a.a],providers:[u.a,a.a],exports:[a.a],bootstrap:[a.a]})],c)},1182:function(n,e,t){"use strict";var r=t(0),o=t(1145),l=t(184);t.d(e,"a",(function(){return i}));var i=(function(){function n(n){this.auth=n,this.smartTableData=new Array,this.dba=new o.a}return n.prototype.ngOnInit=function(){var n=this;this.dba.GetAllByRef().subscribe((function(e){n.smartTableData=new Array,e.rows.map((function(e){return n.smartTableData.push(e.doc)}))}))},n})();i=__decorate([t.i(r.Component)({selector:"agences-list",template:t(1597),providers:[l.a]}),__metadata("design:paramtypes",[l.a])],i)},1183:function(n,e,t){"use strict";var r=t(0),o=t(25),l=t(1145),i=t(24),u=t(90),a=t(1129);t.d(e,"a",(function(){return s}));var s=(function(){function n(n,e,t,r,o){this.route=e,this.http=t,this.osms=r,this.dba=o,this.agence={name:"",ref:"",PDD:!1,address:new a.a},this.agenceForm=n.group({name:[""],ref:[""],PDD:[!1],parent:[""],address:n.group({housenumber:[""],street:[""],city:[""],postcode:[""],complement:[""]})})}return n.prototype.ngOnInit=function(){var n=this;this.dba.GetAllByRef().subscribe((function(e){n.agencesList=new Array,e.rows.map((function(e){return n.agencesList.push(e.doc)}))}))},n.prototype.getFromOSM=function(){var n=this;this.osms.getAdressFromOSM(this.agenceForm.value.ref).subscribe((function(e){var t=n.agenceForm.value;t.name=e.tags.name,"depot"===e.tags["post_office:type"]?t.PDD=!0:t.PDD=null,t.address.city=e.tags["addr:city"]||"",t.address.postcode=e.tags["addr:postcode"]||"",t.address.street=e.tags["addr:street"]||"",t.address.housenumber=e.tags["addr:housenumber"]||"",n.agenceForm.setValue(t)}))},n.prototype.onSubmit=function(){var n=this.agenceForm.value;n.type="agence",this.dba.post(n).subscribe((function(n){}))},n})();s=__decorate([t.i(r.Component)({selector:"agence-add",template:t(1598)}),__param(0,t.i(r.Inject)(i.FormBuilder)),__metadata("design:paramtypes",[i.FormBuilder,o.v,u.Http,l.b,l.a])],s)},1184:function(n,e,t){"use strict";var r=t(0),o=t(25),l=t(1145),i=t(24),u=t(90),a=t(1179);t.d(e,"a",(function(){return s}));var s=(function(){function n(n,e,t){this.route=n,this.http=e,this.osms=t,this.dba=new l.a}return n.prototype.ngOnInit=function(){var n=this;this.agence={name:"",ref:"",PDD:!1,address:new a.a},this.agenceForm=new i.FormGroup({ref:new i.FormControl(this.agence.ref),name:new i.FormControl(this.agence.name),PDD:new i.FormControl(""),parent:new i.FormControl(""),address:new i.FormGroup({housenumber:new i.FormControl(""),street:new i.FormControl(""),city:new i.FormControl(""),postcode:new i.FormControl(""),complement:new i.FormControl("")})}),this.dba.GetByRef(this.route.snapshot.paramMap.get("id")).subscribe((function(e){n.agence=e.rows[0].doc,n.agenceID=e.rows[0].id,n.dba.GetDocByID(n.agenceID).subscribe((function(e){return n.agenceRev=e._rev})),void 0!==n.agence.address?n.agenceForm=new i.FormGroup({ref:new i.FormControl(n.agence.ref),name:new i.FormControl(n.agence.name),PDD:new i.FormControl(n.agence.PDD),parent:new i.FormControl(n.agence.parent),address:new i.FormGroup({housenumber:new i.FormControl(n.agence.address.housenumber||""),street:new i.FormControl(n.agence.address.street||""),city:new i.FormControl(n.agence.address.city||""),postcode:new i.FormControl(n.agence.address.postcode||""),complement:new i.FormControl(n.agence.address.complement||"")})}):n.agenceForm=new i.FormGroup({ref:new i.FormControl(n.agence.ref),name:new i.FormControl(n.agence.name),PDD:new i.FormControl(n.agence.PDD),parent:new i.FormControl(n.agence.parent),address:new i.FormGroup({housenumber:new i.FormControl(""),street:new i.FormControl(""),city:new i.FormControl(""),postcode:new i.FormControl(""),complement:new i.FormControl("")})})})),this.dba.GetAllByRef().subscribe((function(e){n.agences=new Array,e.rows.map((function(e){return n.agences.push(e.doc)}))}))},n.prototype.getFromOSM=function(){var n=this;this.osms.getAdressFromOSM(this.agenceForm.value.ref).subscribe((function(e){var t=n.agenceForm.value;t.name=e.tags.name,"depot"===e.tags["post_office:type"]?t.PDD=!0:t.PDD=null,t.address.city=e.tags["addr:city"]||"",t.address.postcode=e.tags["addr:postcode"]||"",t.address.street=e.tags["addr:street"]||"",t.address.housenumber=e.tags["addr:housenumber"]||"",n.agenceForm.setValue(t)}))},n.prototype.onSubmit=function(){var n=this.agenceForm.value;n._id=this.agenceID,n._rev=this.agenceRev,n.type="agence",this.dba.put(n).subscribe((function(n){}))},n})();s=__decorate([t.i(r.Component)({selector:"agence-edit",template:t(1599)}),__metadata("design:paramtypes",[o.v,u.Http,l.b])],s)},1233:function(n,e,t){"use strict";var r=(t(1139),t(1138));t.d(e,"b",(function(){return r.a}));var o=t(1180);t.d(e,"a",(function(){return o.a}))},1234:function(n,e,t){"use strict";var r=t(0),o=t(24),l=t(1143);t.d(e,"a",(function(){return i})),t.d(e,"b",(function(){return u}));var i=(function(){function n(n){var e=this;this.notify=new r.EventEmitter,this.emailForm=n.group({id:0,email:""}),this.emailForm.valueChanges.subscribe((function(n){e.notify.emit(n)}))}return n.prototype.ngOnInit=function(){this.emailForm.setValue(this.email)},n})();__decorate([t.i(r.Input)(),__metadata("design:type",l.a)],i.prototype,"email",void 0),__decorate([t.i(r.Input)(),__metadata("design:type",Boolean)],i.prototype,"editable",void 0),__decorate([t.i(r.Output)(),__metadata("design:type",r.EventEmitter)],i.prototype,"notify",void 0),i=__decorate([t.i(r.Component)({selector:"email-details",template:t(1316)}),__param(0,t.i(r.Inject)(o.FormBuilder)),__metadata("design:paramtypes",[o.FormBuilder])],i);var u=(function(){function n(){this.notify=new r.EventEmitter}return n.prototype.ngOnInit=function(){void 0===this.emails&&(this.emails=[])},n.prototype.addEmail=function(){var n=new l.a;n.id=this.emails.length,this.emails.push(n)},n.prototype.emailOnNotify=function(n){this.emails[n.id]=n,this.notify.emit(this.emails)},n.prototype.getEmails=function(){return this.emails},n})();__decorate([t.i(r.Input)(),__metadata("design:type",Array)],u.prototype,"emails",void 0),__decorate([t.i(r.Input)(),__metadata("design:type",Boolean)],u.prototype,"editable",void 0),__decorate([t.i(r.Output)(),__metadata("design:type",r.EventEmitter)],u.prototype,"notify",void 0),u=__decorate([t.i(r.Component)({selector:"emails-element",template:t(1317)}),__metadata("design:paramtypes",[])],u)},1235:function(n,e,t){"use strict";var r=t(0),o=t(9),l=t(179),i=t(24),u=t(1144),a=t(1236),s=t(1143),c=t(1234),d=t(1164),f=t(1163),p=(function(){function n(){}return n})();p=__decorate([t.i(r.NgModule)({imports:[o.CommonModule,l.a,i.ReactiveFormsModule],declarations:[f.a,a.a,a.b,c.a,c.b],providers:[d.a,u.a,s.a,f.a,a.a,a.b,c.a,c.b],exports:[f.a,a.a,a.b,c.a,c.b],bootstrap:[f.a,a.a,a.b,c.a,c.b]})],p)},1236:function(n,e,t){"use strict";var r=t(0),o=t(24),l=t(1144);t.d(e,"a",(function(){return i})),t.d(e,"b",(function(){return u}));var i=(function(){function n(n){var e=this;this.notify=new r.EventEmitter,this.phoneForm=n.group({id:0,number:""}),this.phoneForm.valueChanges.subscribe((function(n){e.notify.emit(n)}))}return n.prototype.ngOnInit=function(){this.phoneForm.setValue(this.phone)},n})();__decorate([t.i(r.Input)(),__metadata("design:type",l.a)],i.prototype,"phone",void 0),__decorate([t.i(r.Input)(),__metadata("design:type",Boolean)],i.prototype,"editable",void 0),__decorate([t.i(r.Output)(),__metadata("design:type",r.EventEmitter)],i.prototype,"notify",void 0),i=__decorate([t.i(r.Component)({selector:"phone-details",template:t(1319)}),__param(0,t.i(r.Inject)(o.FormBuilder)),__metadata("design:paramtypes",[o.FormBuilder])],i);var u=(function(){function n(){this.notify=new r.EventEmitter}return n.prototype.ngOnInit=function(){void 0===this.phones&&(this.phones=[])},n.prototype.addPhone=function(){var n=new l.a;n.id=this.phones.length,this.phones.push(n)},n.prototype.phoneOnNotify=function(n){this.phones[n.id]=n,this.notify.emit(this.phones)},n.prototype.getPhones=function(){return this.phones},n})();__decorate([t.i(r.Input)(),__metadata("design:type",Array)],u.prototype,"phones",void 0),__decorate([t.i(r.Input)(),__metadata("design:type",Boolean)],u.prototype,"editable",void 0),__decorate([t.i(r.Output)(),__metadata("design:type",r.EventEmitter)],u.prototype,"notify",void 0),u=__decorate([t.i(r.Component)({selector:"phones-element",template:t(1320)}),__metadata("design:paramtypes",[])],u)},1313:function(n,e){n.exports=""},1314:function(n,e){n.exports=""},1315:function(n,e){n.exports=""},1316:function(n,e){n.exports=""},1317:function(n,e){n.exports=""},1318:function(n,e){n.exports=""},1319:function(n,e){n.exports=""},1320:function(n,e){n.exports=""},1321:function(n,e){n.exports=""},1334:function(n,e,t){"use strict";var r=t(0),o=t(179),l=t(9),i=t(1183),u=t(24),a=t(90),s=t(1129);t.d(e,"a",(function(){return c}));var c=(function(){function n(){}return n})();c=__decorate([t.i(r.NgModule)({imports:[l.CommonModule,u.ReactiveFormsModule,a.HttpModule,a.JsonpModule,o.a,s.b],declarations:[i.a],exports:[i.a],bootstrap:[i.a]})],c)},1335:function(n,e,t){"use strict";var r=t(0),o=t(179),l=t(9),i=t(1184),u=t(24),a=t(90),s=t(1129);t.d(e,"a",(function(){return c}));var c=(function(){function n(){}return n})();c=__decorate([t.i(r.NgModule)({imports:[l.CommonModule,u.ReactiveFormsModule,a.HttpModule,a.JsonpModule,o.a,s.b],declarations:[i.a],exports:[i.a],bootstrap:[i.a,s.d]})],c)},1336:function(n,e,t){"use strict";(function(e){function t(){c=!0;for(var n,e,t=d.length;t;){for(e=d,d=[],n=-1;++n<t;)e[n]();t=d.length}c=!1}function r(n){1!==d.push(n)||c||o()}var o,l=e.MutationObserver||e.WebKitMutationObserver;if(l){var i=0,u=new l(t),a=e.document.createTextNode("");u.observe(a,{characterData:!0}),o=function(){a.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)o="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(t,0)};else{var s=new e.MessageChannel;s.port1.onmessage=t,o=function(){s.port2.postMessage(0)}}var c,d=[];n.exports=r}).call(e,t(21))},1409:function(n,e,t){"use strict";function r(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,null,null,2,"button",[["class","btn btn-primary btn-icon"],["type","button"]],null,[[null,"click"]],(function(n,e,t){var r=!0;if("click"===e){r=!1!==a["ɵnov"](n,1).onClick()&&r}return r}),null,null)),a["ɵdid"](8192,null,0,s.z,[s.j,s.v,[8,null],a.Renderer,a.ElementRef],{routerLink:[0,"routerLink"]},null),(n()(),a["ɵeld"](0,null,null,0,"i",[["class","ion-edit white"]],null,null,null,null,null))],(function(n,e){n(e,1,0,a["ɵinlineInterpolate"](1,"/pages/agences/edit/",e.parent.context.$implicit.ref,""))}),null)}function o(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,null,null,11,"tr",[],null,null,null,null,null)),(n()(),a["ɵted"](null,["\n          "])),(n()(),a["ɵeld"](0,null,null,1,"td",[["class","table-id"]],null,null,null,null,null)),(n()(),a["ɵted"](null,["",""])),(n()(),a["ɵted"](null,["\n          "])),(n()(),a["ɵeld"](0,null,null,1,"td",[],null,null,null,null,null)),(n()(),a["ɵted"](null,["",""])),(n()(),a["ɵted"](null,["\n\n          "])),(n()(),a["ɵeld"](0,null,null,2,"td",[],null,null,null,null,null)),(n()(),a["ɵand"](8388608,null,null,1,null,r)),a["ɵdid"](8192,null,0,c.NgIf,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),a["ɵted"](null,["\n        "]))],(function(n,e){n(e,10,0,e.component.auth.isAdmin())}),(function(n,e){n(e,3,0,e.context.$implicit.ref),n(e,6,0,e.context.$implicit.name)}))}function l(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,null,null,2,"button",[["class","btn btn-warning btn-raised"],["routerLink","/pages/agences/add"],["type","button"]],null,[[null,"click"]],(function(n,e,t){var r=!0;if("click"===e){r=!1!==a["ɵnov"](n,1).onClick()&&r}return r}),null,null)),a["ɵdid"](8192,null,0,s.z,[s.j,s.v,[8,null],a.Renderer,a.ElementRef],{routerLink:[0,"routerLink"]},null),(n()(),a["ɵted"](null,["Ajouter une Agence"]))],(function(n,e){n(e,1,0,"/pages/agences/add")}),null)}function i(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,null,null,35,"ba-card",[["baCardClass","with-scroll"],["title","Liste des agences"]],null,null,null,d.a,d.b)),a["ɵdid"](24576,null,0,f.a,[],{title:[0,"title"],baCardClass:[1,"baCardClass"]},null),(n()(),a["ɵted"](0,["\n  "])),(n()(),a["ɵeld"](0,null,0,31,"div",[["class","vertical-scroll"]],null,null,null,null,null)),(n()(),a["ɵted"](null,["\n    "])),(n()(),a["ɵeld"](0,null,null,22,"table",[["class","table table-striped"]],null,null,null,null,null)),(n()(),a["ɵted"](null,["\n      "])),(n()(),a["ɵeld"](0,null,null,13,"thead",[],null,null,null,null,null)),(n()(),a["ɵted"](null,["\n        "])),(n()(),a["ɵeld"](0,null,null,10,"tr",[],null,null,null,null,null)),(n()(),a["ɵted"](null,["\n          "])),(n()(),a["ɵeld"](0,null,null,1,"th",[["class","table-id col-md-4"]],null,null,null,null,null)),(n()(),a["ɵted"](null,["Ref"])),(n()(),a["ɵted"](null,["\n          "])),(n()(),a["ɵeld"](0,null,null,1,"th",[["class"," col-md-6"]],null,null,null,null,null)),(n()(),a["ɵted"](null,["Agence"])),(n()(),a["ɵted"](null,["\n          "])),(n()(),a["ɵeld"](0,null,null,1,"th",[["class"," col-md-2"]],null,null,null,null,null)),(n()(),a["ɵted"](null,[" "])),(n()(),a["ɵted"](null,["\n        "])),(n()(),a["ɵted"](null,["\n      "])),(n()(),a["ɵted"](null,["\n      "])),(n()(),a["ɵeld"](0,null,null,4,"tbody",[],null,null,null,null,null)),(n()(),a["ɵted"](null,["\n        "])),(n()(),a["ɵand"](8388608,null,null,1,null,o)),a["ɵdid"](401408,null,0,c.NgForOf,[a.ViewContainerRef,a.TemplateRef,a.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),a["ɵted"](null,["\n      "])),(n()(),a["ɵted"](null,["\n    "])),(n()(),a["ɵted"](null,["\n    "])),(n()(),a["ɵeld"](0,null,null,4,"div",[["class","col-md-6 offset-md-4"]],null,null,null,null,null)),(n()(),a["ɵted"](null,["\n      "])),(n()(),a["ɵand"](8388608,null,null,1,null,l)),a["ɵdid"](8192,null,0,c.NgIf,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),a["ɵted"](null,["\n    "])),(n()(),a["ɵted"](null,["\n  "])),(n()(),a["ɵted"](0,["\n"])),(n()(),a["ɵted"](null,["\n"]))],(function(n,e){var t=e.component;n(e,1,0,"Liste des agences","with-scroll"),n(e,25,0,t.smartTableData),n(e,32,0,t.auth.isAdmin())}),null)}function u(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,null,null,2,"agences-list",[],null,null,null,i,g)),a["ɵprd"](256,null,h.a,h.a,[]),a["ɵdid"](57344,null,0,p.a,[h.a],null,null)],(function(n,e){n(e,2,0)}),null)}var a=t(0),s=t(25),c=t(9),d=t(1126),f=t(578),p=t(1182),h=t(184);t.d(e,"a",(function(){return m}));var v=[],g=a["ɵcrt"]({encapsulation:2,styles:v,data:{}}),m=a["ɵccf"]("agences-list",p.a,u,{},{},[])},1410:function(n,e,t){"use strict";function r(n){return u["ɵvid"](0,[(n()(),u["ɵeld"](0,null,null,3,"option",[],null,null,null,null,null)),u["ɵdid"](73728,null,0,a.NgSelectOption,[u.ElementRef,u.Renderer,[2,a.SelectControlValueAccessor]],{ngValue:[0,"ngValue"]},null),u["ɵdid"](73728,null,0,a["ɵq"],[u.ElementRef,u.Renderer,[8,null]],{ngValue:[0,"ngValue"]},null),(n()(),u["ɵted"](null,["\n                      "," - ","\n                    "]))],(function(n,e){n(e,1,0,e.context.$implicit.ref),n(e,2,0,e.context.$implicit.ref)}),(function(n,e){n(e,3,0,e.context.$implicit.ref,e.context.$implicit.name)}))}function o(n){return u["ɵvid"](0,[(n()(),u["ɵeld"](0,null,null,18,"div",[["class","col-md-4 offset-md-8"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵeld"](0,null,null,15,"label",[["for","ref"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["Est rattachée à: "])),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,9,"select",[["class","form-control"],["formControlName","parent"],["name","parent"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(n,e,t){var r=!0,o=n.component;if("change"===e){r=!1!==u["ɵnov"](n,8).onChange(t.target.value)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,8).onTouched()&&r}if("ngModelChange"===e){r=!1!==(o.agence.parent=t)&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.SelectControlValueAccessor,[u.Renderer,u.ElementRef],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.SelectControlValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                    "])),(n()(),u["ɵand"](8388608,null,null,1,null,r)),u["ɵdid"](401408,null,0,s.NgForOf,[u.ViewContainerRef,u.TemplateRef,u.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵted"](null,["\n              "]))],(function(n,e){var t=e.component;n(e,10,0,"parent",t.agence.parent),n(e,15,0,t.agences)}),(function(n,e){n(e,7,0,u["ɵnov"](e,12).ngClassUntouched,u["ɵnov"](e,12).ngClassTouched,u["ɵnov"](e,12).ngClassPristine,u["ɵnov"](e,12).ngClassDirty,u["ɵnov"](e,12).ngClassValid,u["ɵnov"](e,12).ngClassInvalid,u["ɵnov"](e,12).ngClassPending)}))}function l(n){return u["ɵvid"](0,[(n()(),u["ɵeld"](0,null,null,96,"div",[["class","widgets"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n\n  "])),(n()(),u["ɵeld"](0,null,null,93,"div",[["class","row"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n    "])),(n()(),u["ɵeld"](0,null,null,90,"div",[["class","col-md-12"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n      "])),(n()(),u["ɵeld"](0,null,null,87,"ba-card",[["baCardClass","with-scroll"],["title","Création d'une Agence"]],null,null,null,c.a,c.b)),u["ɵdid"](24576,null,0,d.a,[],{title:[0,"title"],baCardClass:[1,"baCardClass"]},null),(n()(),u["ɵted"](0,["\n        "])),(n()(),u["ɵeld"](0,null,0,83,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(n,e,t){var r=!0,o=n.component;if("submit"===e){r=!1!==u["ɵnov"](n,11).onSubmit(t)&&r}if("reset"===e){r=!1!==u["ɵnov"](n,11).onReset()&&r}if("ngSubmit"===e){r=!1!==o.onSubmit()&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a["ɵbf"],[],null,null),u["ɵdid"](270336,null,0,a.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),u["ɵprd"](1024,null,a.ControlContainer,null,[a.FormGroupDirective]),u["ɵdid"](8192,null,0,a.NgControlStatusGroup,[a.ControlContainer],null,null),(n()(),u["ɵted"](null,["\n          "])),(n()(),u["ɵeld"](0,null,null,73,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n            "])),(n()(),u["ɵeld"](0,null,null,52,"div",[["class","row"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵeld"](0,null,null,14,"div",[["class","col-md-4"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵeld"](0,null,null,11,"label",[["for","ref"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["Ref : "])),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,5,"input",[["class","form-control"],["formControlName","ref"],["placeholder","Ref"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==u["ɵnov"](n,27)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,27).onTouched()&&r}if("compositionstart"===e){r=!1!==u["ɵnov"](n,27)._compositionStart()&&r}if("compositionend"===e){r=!1!==u["ɵnov"](n,27)._compositionEnd(t.target.value)&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.DefaultValueAccessor,[u.Renderer,u.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵeld"](0,null,null,14,"div",[["class","col-md-6"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵeld"](0,null,null,11,"label",[["for","name"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                    "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["Nom de l'agence: "])),(n()(),u["ɵted"](null,["\n                    "])),(n()(),u["ɵeld"](0,null,null,5,"input",[["class","form-control"],["formControlName","name"],["placeholder","Nom de l'agence"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==u["ɵnov"](n,43)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,43).onTouched()&&r}if("compositionstart"===e){r=!1!==u["ɵnov"](n,43)._compositionStart()&&r}if("compositionend"===e){r=!1!==u["ɵnov"](n,43)._compositionEnd(t.target.value)&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.DefaultValueAccessor,[u.Renderer,u.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵeld"](0,null,null,14,"div",[["class","col-md-1"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵeld"](0,null,null,11,"label",[["for","PDD"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["PDD?"])),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,5,"input",[["class","form-control"],["formControlName","PDD"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(n,e,t){var r=!0;if("change"===e){r=!1!==u["ɵnov"](n,59).onChange(t.target.checked)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,59).onTouched()&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.CheckboxControlValueAccessor,[u.Renderer,u.ElementRef],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.CheckboxControlValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵand"](8388608,null,null,1,null,o)),u["ɵdid"](8192,null,0,s.NgIf,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),u["ɵted"](null,["\n            "])),(n()(),u["ɵted"](null,["\n            "])),(n()(),u["ɵeld"](0,null,null,16,"div",[["class","row"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵeld"](0,null,null,13,"div",[["class","col-md-12"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵeld"](0,null,null,10,"ba-card",[["title","Adresse"]],null,null,null,c.a,c.b)),u["ɵdid"](24576,null,0,d.a,[],{title:[0,"title"]},null),(n()(),u["ɵted"](0,["\n                  "])),(n()(),u["ɵted"](0,["\n                  "])),(n()(),u["ɵted"](0,["\n                  "])),(n()(),u["ɵeld"](0,null,0,1,"address-element",[],null,null,null,p.b,p.c)),u["ɵdid"](57344,null,0,h.a,[a.FormBuilder],null,null),(n()(),u["ɵted"](0,["\n                  "])),(n()(),u["ɵeld"](0,null,0,1,"button",[["class","btn btn-warning btn-raised"],["type","button"]],null,[[null,"click"]],(function(n,e,t){var r=!0,o=n.component;if("click"===e){r=!1!==o.getFromOSM()&&r}return r}),null,null)),(n()(),u["ɵted"](null,["Charger l'adresse depuis OSM"])),(n()(),u["ɵted"](0,["\n                "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵted"](null,["\n            "])),(n()(),u["ɵted"](null,["\n          "])),(n()(),u["ɵted"](null,["\n          "])),(n()(),u["ɵeld"](0,null,null,1,"button",[["class","btn btn-success btn-raised"],["type","submit"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["Ajouter"])),(n()(),u["ɵted"](null,["\n        "])),(n()(),u["ɵted"](0,["\n      "])),(n()(),u["ɵted"](null,["\n    "])),(n()(),u["ɵted"](null,["\n  "])),(n()(),u["ɵted"](null,["\n"])),(n()(),u["ɵted"](null,["\n"]))],(function(n,e){var t=e.component;n(e,7,0,"Création d'une Agence","with-scroll"),n(e,11,0,t.agenceForm);n(e,29,0,"ref");n(e,45,0,"name");n(e,61,0,"PDD"),n(e,68,0,t.agenceForm.value.PDD);n(e,76,0,"Adresse"),n(e,81,0)}),(function(n,e){n(e,9,0,u["ɵnov"](e,13).ngClassUntouched,u["ɵnov"](e,13).ngClassTouched,u["ɵnov"](e,13).ngClassPristine,u["ɵnov"](e,13).ngClassDirty,u["ɵnov"](e,13).ngClassValid,u["ɵnov"](e,13).ngClassInvalid,u["ɵnov"](e,13).ngClassPending),n(e,26,0,u["ɵnov"](e,31).ngClassUntouched,u["ɵnov"](e,31).ngClassTouched,u["ɵnov"](e,31).ngClassPristine,u["ɵnov"](e,31).ngClassDirty,u["ɵnov"](e,31).ngClassValid,u["ɵnov"](e,31).ngClassInvalid,u["ɵnov"](e,31).ngClassPending),n(e,42,0,u["ɵnov"](e,47).ngClassUntouched,u["ɵnov"](e,47).ngClassTouched,u["ɵnov"](e,47).ngClassPristine,u["ɵnov"](e,47).ngClassDirty,u["ɵnov"](e,47).ngClassValid,u["ɵnov"](e,47).ngClassInvalid,u["ɵnov"](e,47).ngClassPending),n(e,58,0,u["ɵnov"](e,63).ngClassUntouched,u["ɵnov"](e,63).ngClassTouched,u["ɵnov"](e,63).ngClassPristine,u["ɵnov"](e,63).ngClassDirty,u["ɵnov"](e,63).ngClassValid,u["ɵnov"](e,63).ngClassInvalid,u["ɵnov"](e,63).ngClassPending)}))}function i(n){return u["ɵvid"](0,[(n()(),u["ɵeld"](0,null,null,1,"agence-add",[],null,null,null,l,y)),u["ɵdid"](57344,null,0,f.a,[a.FormBuilder,v.v,g.Http,m.b,m.a],null,null)],(function(n,e){n(e,1,0)}),null)}var u=t(0),a=t(24),s=t(9),c=t(1126),d=t(578),f=t(1183),p=t(1158),h=t(1130),v=t(25),g=t(90),m=t(1145);t.d(e,"a",(function(){return b}));var _=[],y=u["ɵcrt"]({encapsulation:2,styles:_,data:{}}),b=u["ɵccf"]("agence-add",f.a,i,{},{},[])},1411:function(n,e,t){"use strict";function r(n){return u["ɵvid"](0,[(n()(),u["ɵeld"](0,null,null,3,"option",[],null,null,null,null,null)),u["ɵdid"](73728,null,0,a.NgSelectOption,[u.ElementRef,u.Renderer,[2,a.SelectControlValueAccessor]],{ngValue:[0,"ngValue"]},null),u["ɵdid"](73728,null,0,a["ɵq"],[u.ElementRef,u.Renderer,[8,null]],{ngValue:[0,"ngValue"]},null),(n()(),u["ɵted"](null,["\n                      "," - ","\n                    "]))],(function(n,e){n(e,1,0,e.context.$implicit.ref),n(e,2,0,e.context.$implicit.ref)}),(function(n,e){n(e,3,0,e.context.$implicit.ref,e.context.$implicit.name)}))}function o(n){return u["ɵvid"](0,[(n()(),u["ɵeld"](0,null,null,18,"div",[["class","col-md-4 offset-md-8"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵeld"](0,null,null,15,"label",[["for","ref"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["Est rattachée à: "])),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,9,"select",[["class","form-control"],["formControlName","parent"],["name","parent"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(n,e,t){var r=!0,o=n.component;if("change"===e){r=!1!==u["ɵnov"](n,8).onChange(t.target.value)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,8).onTouched()&&r}if("ngModelChange"===e){r=!1!==(o.agence.parent=t)&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.SelectControlValueAccessor,[u.Renderer,u.ElementRef],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.SelectControlValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                    "])),(n()(),u["ɵand"](8388608,null,null,1,null,r)),u["ɵdid"](401408,null,0,s.NgForOf,[u.ViewContainerRef,u.TemplateRef,u.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵted"](null,["\n              "]))],(function(n,e){var t=e.component;n(e,10,0,"parent",t.agence.parent),n(e,15,0,t.agences)}),(function(n,e){n(e,7,0,u["ɵnov"](e,12).ngClassUntouched,u["ɵnov"](e,12).ngClassTouched,u["ɵnov"](e,12).ngClassPristine,u["ɵnov"](e,12).ngClassDirty,u["ɵnov"](e,12).ngClassValid,u["ɵnov"](e,12).ngClassInvalid,u["ɵnov"](e,12).ngClassPending)}))}function l(n){return u["ɵvid"](0,[(n()(),u["ɵeld"](0,null,null,167,"div",[["class","widgets"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n\n  "])),(n()(),u["ɵeld"](0,null,null,164,"div",[["class","row"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n    "])),(n()(),u["ɵeld"](0,null,null,161,"div",[["class","col-md-12"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n      "])),(n()(),u["ɵeld"](0,null,null,158,"ba-card",[["baCardClass","with-scroll"]],null,null,null,c.a,c.b)),u["ɵdid"](24576,null,0,d.a,[],{title:[0,"title"],baCardClass:[1,"baCardClass"]},null),(n()(),u["ɵted"](0,["\n        "])),(n()(),u["ɵeld"](0,null,0,154,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(n,e,t){var r=!0,o=n.component;if("submit"===e){r=!1!==u["ɵnov"](n,11).onSubmit(t)&&r}if("reset"===e){r=!1!==u["ɵnov"](n,11).onReset()&&r}if("ngSubmit"===e){r=!1!==o.onSubmit()&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a["ɵbf"],[],null,null),u["ɵdid"](270336,null,0,a.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),u["ɵprd"](1024,null,a.ControlContainer,null,[a.FormGroupDirective]),u["ɵdid"](8192,null,0,a.NgControlStatusGroup,[a.ControlContainer],null,null),(n()(),u["ɵted"](null,["\n          "])),(n()(),u["ɵeld"](0,null,null,144,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n            "])),(n()(),u["ɵeld"](0,null,null,52,"div",[["class","row"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵeld"](0,null,null,14,"div",[["class","col-md-4"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵeld"](0,null,null,11,"label",[["for","ref"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["Ref : "])),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,5,"input",[["class","form-control"],["formControlName","ref"],["placeholder","Ref"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==u["ɵnov"](n,27)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,27).onTouched()&&r}if("compositionstart"===e){r=!1!==u["ɵnov"](n,27)._compositionStart()&&r}if("compositionend"===e){r=!1!==u["ɵnov"](n,27)._compositionEnd(t.target.value)&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.DefaultValueAccessor,[u.Renderer,u.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵeld"](0,null,null,14,"div",[["class","col-md-6"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵeld"](0,null,null,11,"label",[["for","name"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                    "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["Nom de l'agence: "])),(n()(),u["ɵted"](null,["\n                    "])),(n()(),u["ɵeld"](0,null,null,5,"input",[["class","form-control"],["formControlName","name"],["placeholder","Nom de l'agence"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==u["ɵnov"](n,43)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,43).onTouched()&&r}if("compositionstart"===e){r=!1!==u["ɵnov"](n,43)._compositionStart()&&r}if("compositionend"===e){r=!1!==u["ɵnov"](n,43)._compositionEnd(t.target.value)&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.DefaultValueAccessor,[u.Renderer,u.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵeld"](0,null,null,14,"div",[["class","col-md-1"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵeld"](0,null,null,11,"label",[["for","PDD"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["PDD?"])),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵeld"](0,null,null,5,"input",[["class","form-control"],["formControlName","PDD"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(n,e,t){var r=!0;if("change"===e){r=!1!==u["ɵnov"](n,59).onChange(t.target.checked)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,59).onTouched()&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.CheckboxControlValueAccessor,[u.Renderer,u.ElementRef],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.CheckboxControlValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵand"](8388608,null,null,1,null,o)),u["ɵdid"](8192,null,0,s.NgIf,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),u["ɵted"](null,["\n            "])),(n()(),u["ɵted"](null,["\n            "])),(n()(),u["ɵeld"](0,null,null,87,"div",[["class","row"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵeld"](0,null,null,84,"div",[["class","col-md-12"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                "])),(n()(),u["ɵeld"](0,null,null,81,"ba-card",[["title","Adresse"]],null,null,null,c.a,c.b)),u["ɵdid"](24576,null,0,d.a,[],{title:[0,"title"]},null),(n()(),u["ɵted"](0,["\n                  "])),(n()(),u["ɵeld"](0,null,0,74,"div",[["class","form-group"],["formGroupName","address"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),u["ɵdid"](106496,null,0,a.FormGroupName,[[3,a.ControlContainer],[8,null],[8,null]],{name:[0,"name"]},null),u["ɵprd"](1024,null,a.ControlContainer,null,[a.FormGroupName]),u["ɵdid"](8192,null,0,a.NgControlStatusGroup,[a.ControlContainer],null,null),(n()(),u["ɵted"](null,["\n                    "])),(n()(),u["ɵeld"](0,null,null,33,"div",[["class","row"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵeld"](0,null,null,14,"div",[["class","col-md-2 offset-md-1"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,11,"label",[["for","housenumber"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["N° de voie : "])),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,5,"input",[["class","form-control"],["formControlName","housenumber"],["placeholder","0"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==u["ɵnov"](n,93)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,93).onTouched()&&r}if("compositionstart"===e){r=!1!==u["ɵnov"](n,93)._compositionStart()&&r}if("compositionend"===e){r=!1!==u["ɵnov"](n,93)._compositionEnd(t.target.value)&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.DefaultValueAccessor,[u.Renderer,u.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵeld"](0,null,null,14,"div",[["class","col-md-8"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,11,"label",[["for","street"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["Rue : "])),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,5,"input",[["class","form-control"],["formControlName","street"],["placeholder","Rue"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==u["ɵnov"](n,109)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,109).onTouched()&&r}if("compositionstart"===e){r=!1!==u["ɵnov"](n,109)._compositionStart()&&r}if("compositionend"===e){r=!1!==u["ɵnov"](n,109)._compositionEnd(t.target.value)&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.DefaultValueAccessor,[u.Renderer,u.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵted"](null,["\n                    "])),(n()(),u["ɵted"](null,["\n                    "])),(n()(),u["ɵeld"](0,null,null,33,"div",[["class","row"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵeld"](0,null,null,14,"div",[["class","col-md-3"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,11,"label",[["for","postcode"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["Code Postal : "])),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,5,"input",[["class","form-control"],["formControlName","postcode"],["placeholder","00000"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==u["ɵnov"](n,128)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,128).onTouched()&&r}if("compositionstart"===e){r=!1!==u["ɵnov"](n,128)._compositionStart()&&r}if("compositionend"===e){r=!1!==u["ɵnov"](n,128)._compositionEnd(t.target.value)&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.DefaultValueAccessor,[u.Renderer,u.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵeld"](0,null,null,14,"div",[["class","col-md-6"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,11,"label",[["for","city"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u["ɵted"](null,["Commune : "])),(n()(),u["ɵted"](null,["\n                        "])),(n()(),u["ɵeld"](0,null,null,5,"input",[["class","form-control"],["formControlName","city"],["placeholder","Ville"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,t){var r=!0;if("input"===e){r=!1!==u["ɵnov"](n,144)._handleInput(t.target.value)&&r}if("blur"===e){r=!1!==u["ɵnov"](n,144).onTouched()&&r}if("compositionstart"===e){r=!1!==u["ɵnov"](n,144)._compositionStart()&&r}if("compositionend"===e){r=!1!==u["ɵnov"](n,144)._compositionEnd(t.target.value)&&r}return r}),null,null)),u["ɵdid"](8192,null,0,a.DefaultValueAccessor,[u.Renderer,u.ElementRef,[2,a.COMPOSITION_BUFFER_MODE]],null,null),u["ɵprd"](512,null,a.NG_VALUE_ACCESSOR,(function(n){return[n]}),[a.DefaultValueAccessor]),u["ɵdid"](335872,null,0,a.FormControlName,[[3,a.ControlContainer],[8,null],[8,null],[2,a.NG_VALUE_ACCESSOR]],{name:[0,"name"]},null),u["ɵprd"](1024,null,a.NgControl,null,[a.FormControlName]),u["ɵdid"](8192,null,0,a.NgControlStatus,[a.NgControl],null,null),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵted"](null,["\n                      "])),(n()(),u["ɵted"](null,["\n                    "])),(n()(),u["ɵted"](null,["\n                  "])),(n()(),u["ɵted"](0,["\n                  "])),(n()(),u["ɵeld"](0,null,0,1,"button",[["class","btn btn-warning btn-raised"],["type","button"]],null,[[null,"click"]],(function(n,e,t){var r=!0,o=n.component;if("click"===e){r=!1!==o.getFromOSM()&&r}return r}),null,null)),(n()(),u["ɵted"](null,["Charger l'adresse depuis OSM"])),(n()(),u["ɵted"](0,["\n                "])),(n()(),u["ɵted"](null,["\n              "])),(n()(),u["ɵted"](null,["\n            "])),(n()(),u["ɵted"](null,["\n          "])),(n()(),u["ɵted"](null,["\n          "])),(n()(),u["ɵeld"](0,null,null,1,"button",[["class","btn btn-success btn-raised"],["type","submit"]],null,null,null,null,null)),(n()(),u["ɵted"](null,["Mettre à jour"])),(n()(),u["ɵted"](null,["\n        "])),(n()(),u["ɵted"](0,["\n      "])),(n()(),u["ɵted"](null,["\n    "])),(n()(),u["ɵted"](null,["\n  "])),(n()(),u["ɵted"](null,["\n"])),(n()(),u["ɵted"](null,["\n"]))],(function(n,e){var t=e.component;n(e,7,0,u["ɵinlineInterpolate"](1,"Agence de ",t.agence.name,""),"with-scroll"),n(e,11,0,t.agenceForm);n(e,29,0,"ref");n(e,45,0,"name");n(e,61,0,"PDD"),n(e,68,0,t.agenceForm.value.PDD);n(e,76,0,"Adresse");n(e,79,0,"address");n(e,95,0,"housenumber");n(e,111,0,"street");n(e,130,0,"postcode");n(e,146,0,"city")}),(function(n,e){n(e,9,0,u["ɵnov"](e,13).ngClassUntouched,u["ɵnov"](e,13).ngClassTouched,u["ɵnov"](e,13).ngClassPristine,u["ɵnov"](e,13).ngClassDirty,u["ɵnov"](e,13).ngClassValid,u["ɵnov"](e,13).ngClassInvalid,u["ɵnov"](e,13).ngClassPending),n(e,26,0,u["ɵnov"](e,31).ngClassUntouched,u["ɵnov"](e,31).ngClassTouched,u["ɵnov"](e,31).ngClassPristine,u["ɵnov"](e,31).ngClassDirty,u["ɵnov"](e,31).ngClassValid,u["ɵnov"](e,31).ngClassInvalid,u["ɵnov"](e,31).ngClassPending),n(e,42,0,u["ɵnov"](e,47).ngClassUntouched,u["ɵnov"](e,47).ngClassTouched,u["ɵnov"](e,47).ngClassPristine,u["ɵnov"](e,47).ngClassDirty,u["ɵnov"](e,47).ngClassValid,u["ɵnov"](e,47).ngClassInvalid,u["ɵnov"](e,47).ngClassPending),n(e,58,0,u["ɵnov"](e,63).ngClassUntouched,u["ɵnov"](e,63).ngClassTouched,u["ɵnov"](e,63).ngClassPristine,u["ɵnov"](e,63).ngClassDirty,u["ɵnov"](e,63).ngClassValid,u["ɵnov"](e,63).ngClassInvalid,u["ɵnov"](e,63).ngClassPending),n(e,78,0,u["ɵnov"](e,81).ngClassUntouched,u["ɵnov"](e,81).ngClassTouched,u["ɵnov"](e,81).ngClassPristine,u["ɵnov"](e,81).ngClassDirty,u["ɵnov"](e,81).ngClassValid,u["ɵnov"](e,81).ngClassInvalid,u["ɵnov"](e,81).ngClassPending),n(e,92,0,u["ɵnov"](e,97).ngClassUntouched,u["ɵnov"](e,97).ngClassTouched,u["ɵnov"](e,97).ngClassPristine,u["ɵnov"](e,97).ngClassDirty,u["ɵnov"](e,97).ngClassValid,u["ɵnov"](e,97).ngClassInvalid,u["ɵnov"](e,97).ngClassPending),n(e,108,0,u["ɵnov"](e,113).ngClassUntouched,u["ɵnov"](e,113).ngClassTouched,u["ɵnov"](e,113).ngClassPristine,u["ɵnov"](e,113).ngClassDirty,u["ɵnov"](e,113).ngClassValid,u["ɵnov"](e,113).ngClassInvalid,u["ɵnov"](e,113).ngClassPending),n(e,127,0,u["ɵnov"](e,132).ngClassUntouched,u["ɵnov"](e,132).ngClassTouched,u["ɵnov"](e,132).ngClassPristine,u["ɵnov"](e,132).ngClassDirty,u["ɵnov"](e,132).ngClassValid,u["ɵnov"](e,132).ngClassInvalid,u["ɵnov"](e,132).ngClassPending),n(e,143,0,u["ɵnov"](e,148).ngClassUntouched,u["ɵnov"](e,148).ngClassTouched,u["ɵnov"](e,148).ngClassPristine,u["ɵnov"](e,148).ngClassDirty,u["ɵnov"](e,148).ngClassValid,u["ɵnov"](e,148).ngClassInvalid,u["ɵnov"](e,148).ngClassPending)}))}function i(n){return u["ɵvid"](0,[(n()(),u["ɵeld"](0,null,null,1,"agence-edit",[],null,null,null,l,m)),u["ɵdid"](57344,null,0,f.a,[p.v,h.Http,v.b],null,null)],(function(n,e){n(e,1,0)}),null)}var u=t(0),a=t(24),s=t(9),c=t(1126),d=t(578),f=t(1184),p=t(25),h=t(90),v=t(1145);t.d(e,"a",(function(){return _}));var g=[],m=u["ɵcrt"]({encapsulation:2,styles:g,data:{}}),_=u["ɵccf"]("agence-edit",f.a,i,{},{},[])},1488:function(n,e){},1489:function(n,e,t){"use strict";var r=t(0),o=t(9),l=t(179),i=t(1182),u=t(24),a=t(1335),s=t(1334),c=t(1490),d=t(90),f=t(1145),p=t(1129);t.d(e,"a",(function(){return h}));var h=(function(){function n(){}return n})();h=__decorate([t.i(r.NgModule)({imports:[o.CommonModule,l.a,u.ReactiveFormsModule,c.a,d.HttpModule,d.JsonpModule,s.a,a.a,p.b],declarations:[i.a],providers:[f.a,f.b],exports:[i.a],bootstrap:[i.a]})],h)},1490:function(n,e,t){"use strict";var r=t(25),o=t(1182),l=t(1184),i=t(1183);t.d(e,"a",(function(){return a}));var u=[{path:"",component:o.a},{path:"edit/:id",component:l.a},{path:"add",component:i.a}],a=r.q.forChild(u)},1551:function(n,e,t){"use strict";var r=t(0),o=t(310),l=(t.n(o),t(1151)),i=(t.n(l),t(131)),u=(t.n(i),t(1570));t.n(u);t.d(e,"a",(function(){return a}));var a=(function(){function n(){this.db=new u("calcoo");var n={live:!0,retry:!0,continuous:!0,auth:{username:"oftegstsomedreadidervage",password:"b6570559f68f8ce3c740f27f9568049edccad1bb"}};this.db.sync("https://calcoo.cloudant.com/calcoo",n)}return n.prototype.GetDocByID=function(n){return o.PromiseObservable.create(this.db.get(n))},n.prototype.GetAllByRef=function(n){var e={include_docs:!0};return o.PromiseObservable.create(this.db.query(n+"/getAllByRef",e))},n.prototype.GetByRef=function(n,e){var t={include_docs:!0,key:n};return o.PromiseObservable.create(this.db.query(e+"/getAllByRef",t))},n.prototype.put=function(n){return o.PromiseObservable.create(this.db.put(n))},n.prototype.post=function(n,e){return n.type=e,o.PromiseObservable.create(this.db.post(n))},n})();a=__decorate([t.i(r.Injectable)(),__metadata("design:paramtypes",[])],a)},1552:function(n,e,t){"use strict";function r(n){return function(){var e=arguments.length;if(e){for(var t=[],r=-1;++r<e;)t[r]=arguments[r];return n.call(this,t)}return n.call(this,[])}}n.exports=r},1559:function(n,e,t){"use strict";function r(){}function o(n){if("function"!=typeof n)throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,n!==r&&a(this,n)}function l(n,e,t){this.promise=n,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof t&&(this.onRejected=t,this.callRejected=this.otherCallRejected)}function i(n,e,t){h((function(){var r;try{r=e(t)}catch(e){return v.reject(n,e)}r===n?v.reject(n,new TypeError("Cannot resolve promise with itself")):v.resolve(n,r)}))}function u(n){var e=n&&n.then;if(n&&("object"==typeof n||"function"==typeof n)&&"function"==typeof e)return function(){e.apply(n,arguments)}}function a(n,e){function t(e){l||(l=!0,v.reject(n,e))}function r(e){l||(l=!0,v.resolve(n,e))}function o(){e(r,t)}var l=!1,i=s(o);"error"===i.status&&t(i.value)}function s(n,e){var t={};try{t.value=n(e),t.status="success"}catch(n){t.status="error",t.value=n}return t}function c(n){return n instanceof this?n:v.resolve(new this(r),n)}function d(n){var e=new this(r);return v.reject(e,n)}function f(n){var e=this;if("[object Array]"!==Object.prototype.toString.call(n))return this.reject(new TypeError("must be an array"));var t=n.length,o=!1;if(!t)return this.resolve([]);for(var l=new Array(t),i=0,u=-1,a=new this(r);++u<t;)(function(n,r){function u(n){l[r]=n,++i!==t||o||(o=!0,v.resolve(a,l))}e.resolve(n).then(u,(function(n){o||(o=!0,v.reject(a,n))}))})(n[u],u);return a}function p(n){var e=this;if("[object Array]"!==Object.prototype.toString.call(n))return this.reject(new TypeError("must be an array"));var t=n.length,o=!1;if(!t)return this.resolve([]);for(var l=-1,i=new this(r);++l<t;)(function(n){e.resolve(n).then((function(n){o||(o=!0,v.resolve(i,n))}),(function(n){o||(o=!0,v.reject(i,n))}))})(n[l]);return i}var h=t(1336),v={},g=["REJECTED"],m=["FULFILLED"],_=["PENDING"];n.exports=o,o.prototype.catch=function(n){return this.then(null,n)},o.prototype.then=function(n,e){if("function"!=typeof n&&this.state===m||"function"!=typeof e&&this.state===g)return this;var t=new this.constructor(r);if(this.state!==_){i(t,this.state===m?n:e,this.outcome)}else this.queue.push(new l(t,n,e));return t},l.prototype.callFulfilled=function(n){v.resolve(this.promise,n)},l.prototype.otherCallFulfilled=function(n){i(this.promise,this.onFulfilled,n)},l.prototype.callRejected=function(n){v.reject(this.promise,n)},l.prototype.otherCallRejected=function(n){i(this.promise,this.onRejected,n)},v.resolve=function(n,e){var t=s(u,e);if("error"===t.status)return v.reject(n,t.value);var r=t.value;if(r)a(n,r);else{n.state=m,n.outcome=e;for(var o=-1,l=n.queue.length;++o<l;)n.queue[o].callFulfilled(e)}return n},v.reject=function(n,e){n.state=g,n.outcome=e;for(var t=-1,r=n.queue.length;++t<r;)n.queue[t].callRejected(e);return n},o.resolve=c,o.reject=d,o.all=f,o.race=p},1570:function(n,e,t){"use strict";(function(e){function r(n){return n&&"object"==typeof n&&"default"in n?n.default:n}function o(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer||"undefined"!=typeof Blob&&n instanceof Blob}function l(n){if("function"==typeof n.slice)return n.slice(0);var e=new ArrayBuffer(n.byteLength),t=new Uint8Array(e),r=new Uint8Array(n);return t.set(r),e}function i(n){if(n instanceof ArrayBuffer)return l(n);var e=n.size,t=n.type;return"function"==typeof n.slice?n.slice(0,e,t):n.webkitSlice(0,e,t)}function u(n){var e=Object.getPrototypeOf(n);if(null===e)return!0;var t=e.constructor;return"function"==typeof t&&t instanceof t&&go.call(t)==mo}function a(n){var e,t,r;if(!n||"object"!=typeof n)return n;if(Array.isArray(n)){for(e=[],t=0,r=n.length;t<r;t++)e[t]=a(n[t]);return e}if(n instanceof Date)return n.toISOString();if(o(n))return i(n);if(!u(n))return n;e={};for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)){var l=a(n[t]);void 0!==l&&(e[t]=l)}return e}function s(n){var e=!1;return uo((function(t){if(e)throw new Error("once called more than once");e=!0,n.apply(this,t)}))}function c(n){return uo((function(e){e=a(e);var t=this,r="function"==typeof e[e.length-1]&&e.pop(),o=new vo(function(r,o){var l;try{var i=s((function(n,e){n?o(n):r(e)}));e.push(i),l=n.apply(t,e),l&&"function"==typeof l.then&&r(l)}catch(n){o(n)}});return r&&o.then((function(n){r(null,n)}),r),o}))}function d(n,e,t){if(n.constructor.listeners("debug").length){for(var r=["api",n.name,e],o=0;o<t.length-1;o++)r.push(t[o]);n.constructor.emit("debug",r);var l=t[t.length-1];t[t.length-1]=function(t,r){var o=["api",n.name,e];o=o.concat(t?["error",t]:["success",r]),n.constructor.emit("debug",o),l(t,r)}}}function f(n,e){return c(uo((function(t){if(this._closed)return vo.reject(new Error("database is closed"));if(this._destroyed)return vo.reject(new Error("database is destroyed"));var r=this;return d(r,n,t),this.taskqueue.isReady?e.apply(this,t):new vo(function(e,o){r.taskqueue.addTask((function(l){l?o(l):e(r[n].apply(r,t))}))})})))}function p(n){return"$"+n}function h(n){return n.substring(1)}function v(){this._store={}}function g(n){if(this._store=new v,n&&Array.isArray(n))for(var e=0,t=n.length;e<t;e++)this.add(n[e])}function m(n,e){for(var t={},r=0,o=e.length;r<o;r++){var l=e[r];l in n&&(t[l]=n[l])}return t}function _(n){return n}function y(n){return[{ok:n}]}function b(n,e,t){function r(){var n=[];f.forEach((function(e){e.docs.forEach((function(t){n.push({id:e.id,docs:[t]})}))})),t(null,{results:n})}function o(){++d===c&&r()}function l(n,e,t){f[n]={id:e,docs:t},o()}function i(){if(!(h>=p.length)){var n=Math.min(h+Co,p.length),e=p.slice(h,n);u(e,h),h+=e.length}}function u(t,r){t.forEach((function(t,o){var u=r+o,a=s.get(t),c=m(a[0],["atts_since","attachments"]);c.open_revs=a.map((function(n){return n.rev})),c.open_revs=c.open_revs.filter(_);var d=_;0===c.open_revs.length&&(delete c.open_revs,d=y),["revs","attachments","binary","ajax","latest"].forEach((function(n){n in e&&(c[n]=e[n])})),n.get(t,c,(function(n,e){var r;r=n?[{error:n}]:d(e),l(u,t,r),i()}))}))}var a=e.docs,s=new yo;a.forEach((function(n){s.has(n.id)?s.get(n.id).push(n):s.set(n.id,[n])}));var c=s.size,d=0,f=new Array(c),p=[];s.forEach((function(n,e){p.push(e)}));var h=0;i()}function C(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}function w(){return bo}function E(n){C()?chrome.storage.onChanged.addListener((function(e){null!=e.db_name&&n.emit(e.dbName.newValue)})):w()&&("undefined"!=typeof addEventListener?addEventListener("storage",(function(e){n.emit(e.key)})):window.attachEvent("storage",(function(e){n.emit(e.key)})))}function S(){ao.EventEmitter.call(this),this._listeners={},E(this)}function A(n){if("undefined"!==console&&n in console){var e=Array.prototype.slice.call(arguments,1);console[n].apply(console,e)}}function O(n,e){return n=parseInt(n,10)||0,e=parseInt(e,10),e!==e||e<=n?e=(n||1)<<1:e+=1,e>6e5&&(n=3e5,e=6e5),~~((e-n)*Math.random()+n)}function k(n){var e=0;return n||(e=2e3),O(n,e)}function N(n,e){A("info","The above "+n+" is totally normal. "+e)}function R(n,e,t){Error.call(this,t),this.status=n,this.name=e,this.message=t,this.error=!0}function x(n,e){function t(e){for(var t in n)"function"!=typeof n[t]&&(this[t]=n[t]);void 0!==e&&(this.reason=e)}return t.prototype=R.prototype,new t(e)}function T(n){if("object"!=typeof n){var e=n;n=xo,n.data=e}return"error"in n&&"conflict"===n.error&&(n.name="conflict",n.status=409),"name"in n||(n.name=n.error||"unknown"),"status"in n||(n.status=500),"message"in n||(n.message=n.message||n.reason),n}function q(n,e,t){try{return!n(e,t)}catch(n){var r="Filter function threw: "+n.toString();return x(Do,r)}}function I(n){var e={},t=n.filter&&"function"==typeof n.filter;return e.query=n.query_params,function(r){r.doc||(r.doc={});var o=t&&q(n.filter,r.doc,e);if("object"==typeof o)return o;if(o)return!1;if(n.include_docs){if(!n.attachments)for(var l in r.doc._attachments)r.doc._attachments.hasOwnProperty(l)&&(r.doc._attachments[l].stub=!0)}else delete r.doc;return!0}}function D(n){for(var e=[],t=0,r=n.length;t<r;t++)e=e.concat(n[t]);return e}function j(){}function F(n){var e;if(n?"string"!=typeof n?e=x(ko):/^_/.test(n)&&!/^_(design|local)/.test(n)&&(e=x(Ro)):e=x(No),e)throw e}function L(n){return"boolean"==typeof n._remote?n._remote:"function"==typeof n.type&&(A("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===n.type())}function M(n,e){return"listenerCount"in n?n.listenerCount(e):ao.EventEmitter.listenerCount(n,e)}function B(n){if(!n)return null;var e=n.split("/");return 2===e.length?e:1===e.length?[n,n]:null}function P(n){var e=B(n);return e?e.join("/"):null}function U(n){for(var e=Go.exec(n),t={},r=14;r--;){var o=Uo[r],l=e[r]||"",i=-1!==["user","password"].indexOf(o);t[o]=i?decodeURIComponent(l):l}return t[Vo]={},t[Uo[12]].replace($o,(function(n,e,r){e&&(t[Vo][e]=r)})),t}function V(n,e){var t=[],r=[];for(var o in e)e.hasOwnProperty(o)&&(t.push(o),r.push(e[o]));return t.push(n),Function.apply(null,t).apply(null,r)}function $(n,e,t){return new vo(function(r,o){n.get(e,(function(l,i){if(l){if(404!==l.status)return o(l);i={}}var u=i._rev,a=t(i);if(!a)return r({updated:!1,rev:u});a._id=e,a._rev=u,r(G(n,a,t))}))})}function G(n,e,t){return n.put(e).then((function(n){return{updated:!0,rev:n.rev}}),(function(r){if(409!==r.status)throw r;return $(n,e._id,t)}))}function H(n){return 0|Math.random()*n}function J(n,e){e=e||Ho.length;var t="",r=-1;if(n){for(;++r<n;)t+=Ho[H(e)];return t}for(;++r<36;)switch(r){case 8:case 13:case 18:case 23:t+="-";break;case 19:t+=Ho[3&H(16)|8];break;default:t+=Ho[H(16)]}return t}function z(n){for(var e,t,r,o,l=n.rev_tree.slice();o=l.pop();){var i=o.ids,u=i[2],a=o.pos;if(u.length)for(var s=0,c=u.length;s<c;s++)l.push({pos:a+1,ids:u[s]});else{var d=!!i[1].deleted,f=i[0];e&&!(r!==d?r:t!==a?t<a:e<f)||(e=f,t=a,r=d)}}return t+"-"+e}function X(n,e){for(var t,r=n.slice();t=r.pop();)for(var o=t.pos,l=t.ids,i=l[2],u=e(0===i.length,o,l[0],t.ctx,l[1]),a=0,s=i.length;a<s;a++)r.push({pos:o+1,ids:i[a],ctx:u})}function W(n,e){return n.pos-e.pos}function K(n){var e=[];X(n,(function(n,t,r,o,l){n&&e.push({rev:t+"-"+r,pos:t,opts:l})})),e.sort(W).reverse();for(var t=0,r=e.length;t<r;t++)delete e[t].pos;return e}function Q(n){for(var e=z(n),t=K(n.rev_tree),r=[],o=0,l=t.length;o<l;o++){var i=t[o];i.rev===e||i.opts.deleted||r.push(i.rev)}return r}function Y(n){var e=[];return X(n.rev_tree,(function(n,t,r,o,l){"available"!==l.status||n||(e.push(t+"-"+r),l.status="missing")})),e}function Z(n){for(var e,t=[],r=n.slice();e=r.pop();){var o=e.pos,l=e.ids,i=l[0],u=l[1],a=l[2],s=0===a.length,c=e.history?e.history.slice():[];c.push({id:i,opts:u}),s&&t.push({pos:o+1-c.length,ids:c});for(var d=0,f=a.length;d<f;d++)r.push({pos:o+1,ids:a[d],history:c})}return t.reverse()}function nn(n,e){return n.pos-e.pos}function en(n,e,t){for(var r,o=0,l=n.length;o<l;)r=o+l>>>1,t(n[r],e)<0?o=r+1:l=r;return o}function tn(n,e,t){var r=en(n,e,t);n.splice(r,0,e)}function rn(n,e){for(var t,r,o=e,l=n.length;o<l;o++){var i=n[o],u=[i.id,i.opts,[]];r?(r[2].push(u),r=u):t=r=u}return t}function on(n,e){return n[0]<e[0]?-1:1}function ln(n,e){for(var t=[{tree1:n,tree2:e}],r=!1;t.length>0;){var o=t.pop(),l=o.tree1,i=o.tree2;(l[1].status||i[1].status)&&(l[1].status="available"===l[1].status||"available"===i[1].status?"available":"missing");for(var u=0;u<i[2].length;u++)if(l[2][0]){for(var a=!1,s=0;s<l[2].length;s++)l[2][s][0]===i[2][u][0]&&(t.push({tree1:l[2][s],tree2:i[2][u]}),a=!0);a||(r="new_branch",tn(l[2],i[2][u],on))}else r="new_leaf",l[2][0]=i[2][u]}return{conflicts:r,tree:n}}function un(n,e,t){var r,o=[],l=!1,i=!1;if(!n.length)return{tree:[e],conflicts:"new_leaf"};for(var u=0,a=n.length;u<a;u++){var s=n[u];if(s.pos===e.pos&&s.ids[0]===e.ids[0])r=ln(s.ids,e.ids),o.push({pos:s.pos,ids:r.tree}),l=l||r.conflicts,i=!0;else if(!0!==t){var c=s.pos<e.pos?s:e,d=s.pos<e.pos?e:s,f=d.pos-c.pos,p=[],h=[];for(h.push({ids:c.ids,diff:f,parent:null,parentIdx:null});h.length>0;){var v=h.pop();if(0!==v.diff)for(var g=v.ids[2],m=0,_=g.length;m<_;m++)h.push({ids:g[m],diff:v.diff-1,parent:v.ids,parentIdx:m});else v.ids[0]===d.ids[0]&&p.push(v)}var y=p[0];y?(r=ln(y.ids,d.ids),y.parent[2][y.parentIdx]=r.tree,o.push({pos:c.pos,ids:c.ids}),l=l||r.conflicts,i=!0):o.push(s)}else o.push(s)}return i||o.push(e),o.sort(nn),{tree:o,conflicts:l||"internal_node"}}function an(n,e){for(var t,r,o=Z(n),l=0,i=o.length;l<i;l++){var u,a=o[l],s=a.ids;if(s.length>e){t||(t={});var c=s.length-e;u={pos:a.pos+c,ids:rn(s,c)};for(var d=0;d<c;d++){var f=a.pos+d+"-"+s[d].id;t[f]=!0}}else u={pos:a.pos,ids:rn(s,0)};r=r?un(r,u,!0).tree:[u]}return t&&X(r,(function(n,e,r){delete t[e+"-"+r]})),{tree:r,revs:t?Object.keys(t):[]}}function sn(n,e,t){var r=un(n,e),o=an(r.tree,t);return{tree:o.tree,stemmedRevs:o.revs,conflicts:r.conflicts}}function cn(n,e){for(var t,r=n.slice(),o=e.split("-"),l=parseInt(o[0],10),i=o[1];t=r.pop();){if(t.pos===l&&t.ids[0]===i)return!0;for(var u=t.ids[2],a=0,s=u.length;a<s;a++)r.push({pos:t.pos+1,ids:u[a]})}return!1}function dn(n){return n.ids}function fn(n,e){e||(e=z(n));for(var t,r=e.substring(e.indexOf("-")+1),o=n.rev_tree.map(dn);t=o.pop();){if(t[0]===r)return!!t[1].deleted;o=o.concat(t[2])}}function pn(n){return/^_local/.test(n)}function hn(n,e){for(var t,r=e.rev_tree.slice();t=r.pop();){var o=t.pos,l=t.ids,i=l[0],u=l[1],a=l[2],s=0===a.length,c=t.history?t.history.slice():[];if(c.push({id:i,pos:o,opts:u}),s)for(var d=0,f=c.length;d<f;d++){var p=c[d],h=p.pos+"-"+p.id;if(h===n)return o+"-"+i}for(var v=0,g=a.length;v<g;v++)r.push({pos:o+1,ids:a[v],history:c})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+n)}function vn(n,e){try{n.emit("change",e)}catch(n){A("error",'Error in .on("change", function):',n)}}function gn(n,e,t){function r(){o.cancel()}ao.EventEmitter.call(this);var o=this;this.db=n,e=e?a(e):{};var l=e.complete=s((function(e,t){e?M(o,"error")>0&&o.emit("error",e):o.emit("complete",t),o.removeAllListeners(),n.removeListener("destroyed",r)}));t&&(o.on("complete",(function(n){t(null,n)})),o.on("error",t)),n.once("destroyed",r),e.onChange=function(n){o.isCancelled||vn(o,n)};var i=new vo(function(n,t){e.complete=function(e,r){e?t(e):n(r)}});o.once("cancel",(function(){n.removeListener("destroyed",r),e.complete(null,{status:"cancelled"})})),this.then=i.then.bind(i),this.catch=i.catch.bind(i),this.then((function(n){l(null,n)}),l),n.taskqueue.isReady?o.validateChanges(e):n.taskqueue.addTask((function(n){n?e.complete(n):o.isCancelled?o.emit("cancel"):o.validateChanges(e)}))}function mn(n,e,t){var r=[{rev:n._rev}];"all_docs"===t.style&&(r=K(e.rev_tree).map((function(n){return{rev:n.rev}})));var o={id:e.id,changes:r,doc:n};return fn(e,n._rev)&&(o.deleted=!0),t.conflicts&&(o.doc._conflicts=Q(e),o.doc._conflicts.length||delete o.doc._conflicts),o}function _n(n,e){return n<e?-1:n>e?1:0}function yn(n){return function(e,t){e||t[0]&&t[0].error?n(e||t[0]):n(null,t.length?t[0]:t)}}function bn(n){for(var e=0;e<n.length;e++){var t=n[e];if(t._deleted)delete t._attachments;else if(t._attachments)for(var r=Object.keys(t._attachments),o=0;o<r.length;o++){var l=r[o];t._attachments[l]=m(t._attachments[l],["data","digest","content_type","length","revpos","stub"])}}}function Cn(n,e){var t=_n(n._id,e._id);return 0!==t?t:_n(n._revisions?n._revisions.start:0,e._revisions?e._revisions.start:0)}function wn(n){var e={},t=[];return X(n,(function(n,r,o,l){var i=r+"-"+o;return n&&(e[i]=0),void 0!==l&&t.push({from:l,to:i}),i})),t.reverse(),t.forEach((function(n){void 0===e[n.from]?e[n.from]=1+e[n.to]:e[n.from]=Math.min(e[n.from],1+e[n.to])})),e}function En(n,e,t){var r="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;if(e.descending&&r.reverse(),!r.length)return n._allDocs({limit:0},t);var o={offset:e.skip};return vo.all(r.map((function(t){var r=Eo({key:t,deleted:"ok"},e);return["limit","skip","keys"].forEach((function(n){delete r[n]})),new vo(function(e,l){n._allDocs(r,(function(n,r){if(n)return l(n);o.total_rows=r.total_rows,e(r.rows[0]||{key:t,error:"not_found"})}))})}))).then((function(n){return o.rows=n,o}))}function Sn(n){var e=n._compactionQueue[0],t=e.opts,r=e.callback;n.get("_local/compaction").catch((function(){return!1})).then((function(e){e&&e.last_seq&&(t.last_seq=e.last_seq),n._compact(t,(function(e,t){e?r(e):r(null,t),co((function(){n._compactionQueue.shift(),n._compactionQueue.length&&Sn(n)}))}))}))}function An(n){return"_"===n.charAt(0)&&n+" is not a valid attachment name, attachment names cannot start with '_'"}function On(){ao.EventEmitter.call(this)}function kn(){this.isReady=!1,this.failed=!1,this.queue=[]}function Nn(n,e){var t=n.match(/([a-z\-]*):\/\/(.*)/);if(t)return{name:/https?/.test(t[1])?t[1]+"://"+t[2]:t[2],adapter:t[1]};var r=xn.adapters,o=xn.preferredAdapters,l=xn.prefix,i=e.adapter;if(!i)for(var u=0;u<o.length;++u){i=o[u];{if(!("idb"===i&&"websql"in r&&w()&&localStorage["_pouch__websqldb_"+l+n]))break;A("log",'PouchDB is downgrading "'+n+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.')}}var a=r[i];return{name:a&&"use_prefix"in a&&!a.use_prefix?n:l+n,adapter:i}}function Rn(n){function e(){n.removeListener("closed",r),n.constructor.emit("destroyed",n.name)}function t(){n.removeListener("destroyed",e),n.removeListener("closed",r),n.emit("destroyed")}function r(){n.removeListener("destroyed",e),o.delete(n.name)}var o=n.constructor._destructionListeners;n.once("destroyed",e),n.once("closed",r),o.has(n.name)||o.set(n.name,[]),o.get(n.name).push(t)}function xn(n,e){if(!(this instanceof xn))return new xn(n,e);var t=this;if(e=e||{},n&&"object"==typeof n&&(e=n,n=e.name,delete e.name),this.__opts=e=a(e),t.auto_compaction=e.auto_compaction,t.prefix=xn.prefix,"string"!=typeof n)throw new Error("Missing/invalid DB name");var r=(e.prefix||"")+n,o=Nn(r,e);if(e.name=o.name,e.adapter=e.adapter||o.adapter,t.name=n,t._adapter=e.adapter,xn.emit("debug",["adapter","Picked adapter: ",e.adapter]),!xn.adapters[e.adapter]||!xn.adapters[e.adapter].valid())throw new Error("Invalid Adapter: "+e.adapter);On.call(t),t.taskqueue=new kn,t.adapter=e.adapter,xn.adapters[e.adapter].call(t,e,(function(n){if(n)return t.taskqueue.fail(n);Rn(t),t.emit("created",t),xn.emit("created",t.name),t.taskqueue.ready(t)}))}function Tn(n){n.debug=fo;var e={};n.on("debug",(function(n){var t=n[0],r=n.slice(1);e[t]||(e[t]=fo("pouchdb:"+t)),e[t].apply(null,r)}))}function qn(n,e){for(var t=n,r=0,o=e.length;r<o;r++){if(!(t=t[e[r]]))break}return t}function In(n,e){return n<e?-1:n>e?1:0}function Dn(n){for(var e=[],t="",r=0,o=n.length;r<o;r++){var l=n[r];"."===l?r>0&&"\\"===n[r-1]?t=t.substring(0,t.length-1)+".":(e.push(t),t=""):t+=l}return e.push(t),e}function jn(n){return zo.indexOf(n)>-1}function Fn(n){return Object.keys(n)[0]}function Ln(n){return n[Fn(n)]}function Mn(n){var e={};return n.forEach((function(n){Object.keys(n).forEach((function(t){var r=n[t];if("object"!=typeof r&&(r={$eq:r}),jn(t))r instanceof Array?e[t]=r.map((function(n){return Mn([n])})):e[t]=Mn([r]);else{var o=e[t]=e[t]||{};Object.keys(r).forEach((function(n){var e=r[n];return"$gt"===n||"$gte"===n?Bn(n,e,o):"$lt"===n||"$lte"===n?Pn(n,e,o):"$ne"===n?Un(e,o):"$eq"===n?Vn(e,o):void(o[n]=e)}))}}))})),e}function Bn(n,e,t){void 0===t.$eq&&(void 0!==t.$gte?"$gte"===n?e>t.$gte&&(t.$gte=e):e>=t.$gte&&(delete t.$gte,t.$gt=e):void 0!==t.$gt?"$gte"===n?e>t.$gt&&(delete t.$gt,t.$gte=e):e>t.$gt&&(t.$gt=e):t[n]=e)}function Pn(n,e,t){void 0===t.$eq&&(void 0!==t.$lte?"$lte"===n?e<t.$lte&&(t.$lte=e):e<=t.$lte&&(delete t.$lte,t.$lt=e):void 0!==t.$lt?"$lte"===n?e<t.$lt&&(delete t.$lt,t.$lte=e):e<t.$lt&&(t.$lt=e):t[n]=e)}function Un(n,e){"$ne"in e?e.$ne.push(n):e.$ne=[n]}function Vn(n,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=n}function $n(n){var e=a(n),t=!1;"$and"in e&&(e=Mn(e.$and),t=!0),["$or","$nor"].forEach((function(n){n in e&&e[n].forEach((function(n){for(var e=Object.keys(n),t=0;t<e.length;t++){var r=e[t],o=n[r];"object"==typeof o&&null!==o||(n[r]={$eq:o})}}))})),"$not"in e&&(e.$not=Mn([e.$not]));for(var r=Object.keys(e),o=0;o<r.length;o++){var l=r[o],i=e[l];"object"!=typeof i||null===i?i={$eq:i}:"$ne"in i&&!t&&(i.$ne=[i.$ne]),e[l]=i}return e}function Gn(n,e,t){for(var r="",o=t-n.length;r.length<o;)r+=e;return r}function Hn(n,e,t){return Gn(n,e,t)+n}function Jn(n,e){if(n===e)return 0;n=zn(n),e=zn(e);var t=te(n),r=te(e);if(t-r!=0)return t-r;switch(typeof n){case"number":return n-e;case"boolean":return n<e?-1:1;case"string":return ne(n,e)}return Array.isArray(n)?Zn(n,e):ee(n,e)}function zn(n){switch(typeof n){case"undefined":return null;case"number":return n===1/0||n===-1/0||isNaN(n)?null:n;case"object":var e=n;if(Array.isArray(n)){var t=n.length;n=new Array(t);for(var r=0;r<t;r++)n[r]=zn(e[r])}else{if(n instanceof Date)return n.toJSON();if(null!==n){n={};for(var o in e)if(e.hasOwnProperty(o)){var l=e[o];void 0!==l&&(n[o]=zn(l))}}}}return n}function Xn(n){if(null!==n)switch(typeof n){case"boolean":return n?1:0;case"number":return re(n);case"string":return n.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(n),t=e?n:Object.keys(n),r=-1,o=t.length,l="";if(e)for(;++r<o;)l+=Wn(t[r]);else for(;++r<o;){var i=t[r];l+=Wn(i)+Wn(n[i])}return l}return""}function Wn(n){return n=zn(n),te(n)+Ko+Xn(n)+"\0"}function Kn(n,e){var t,r=e;if("1"===n[e])t=0,e++;else{var o="0"===n[e];e++;var l="",i=n.substring(e,e+Wo),u=parseInt(i,10)+Xo;for(o&&(u=-u),e+=Wo;;){var a=n[e];if("\0"===a)break;l+=a,e++}l=l.split("."),t=1===l.length?parseInt(l,10):parseFloat(l[0]+"."+l[1]),o&&(t-=10),0!==u&&(t=parseFloat(t+"e"+u))}return{num:t,length:e-r}}function Qn(n,e){var t=n.pop();if(e.length){var r=e[e.length-1];t===r.element&&(e.pop(),r=e[e.length-1]);var o=r.element,l=r.index;if(Array.isArray(o))o.push(t);else if(l===n.length-2){var i=n.pop();o[i]=t}else n.push(t)}}function Yn(n){for(var e=[],t=[],r=0;;){var o=n[r++];if("\0"!==o)switch(o){case"1":e.push(null);break;case"2":e.push("1"===n[r]),r++;break;case"3":var l=Kn(n,r);e.push(l.num),r+=l.length;break;case"4":for(var i="";;){var u=n[r];if("\0"===u)break;i+=u,r++}i=i.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(i);break;case"5":var a={element:[],index:e.length};e.push(a.element),t.push(a);break;case"6":var s={element:{},index:e.length};e.push(s.element),t.push(s);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+o)}else{if(1===e.length)return e.pop();Qn(e,t)}}}function Zn(n,e){for(var t=Math.min(n.length,e.length),r=0;r<t;r++){var o=Jn(n[r],e[r]);if(0!==o)return o}return n.length===e.length?0:n.length>e.length?1:-1}function ne(n,e){return n===e?0:n>e?1:-1}function ee(n,e){for(var t=Object.keys(n),r=Object.keys(e),o=Math.min(t.length,r.length),l=0;l<o;l++){var i=Jn(t[l],r[l]);if(0!==i)return i;if(0!==(i=Jn(n[t[l]],e[r[l]])))return i}return t.length===r.length?0:t.length>r.length?1:-1}function te(n){var e=["boolean","number","string","object"],t=e.indexOf(typeof n);return~t?null===n?1:Array.isArray(n)?5:t<3?t+2:t+3:Array.isArray(n)?5:void 0}function re(n){if(0===n)return"1";var e=n.toExponential().split(/e\+?/),t=parseInt(e[1],10),r=n<0,o=r?"0":"2",l=(r?-t:t)-Xo,i=Hn(l.toString(),"0",Wo);o+=Ko+i;var u=Math.abs(parseFloat(e[0]));r&&(u=10-u);var a=u.toFixed(20);return a=a.replace(/\.?0+$/,""),o+=Ko+a}function oe(n){function e(e){return n.map((function(n){var t=Fn(n),r=Dn(t);return qn(e,r)}))}return function(n,t){var r=e(n.doc),o=e(t.doc),l=Jn(r,o);return 0!==l?l:In(n.doc._id,t.doc._id)}}function le(n,e,t){if(n=n.filter((function(n){return ie(n.doc,e.selector,t)})),e.sort){var r=oe(e.sort);n=n.sort(r),"string"!=typeof e.sort[0]&&"desc"===Ln(e.sort[0])&&(n=n.reverse())}if("limit"in e||"skip"in e){var o=e.skip||0,l=("limit"in e?e.limit:n.length)+o;n=n.slice(o,l)}return n}function ie(n,e,t){return t.every((function(t){if(ue(n))return!1;var r=e[t],o=Dn(t),l=qn(n,o);return jn(t)?se(t,r,n):ae(r,n,o,l)}))}function ue(n){return/^_design\//.test(n._id)}function ae(n,e,t,r){return!n||Object.keys(n).every((function(o){var l=n[o];return ce(o,e,l,t,r)}))}function se(n,e,t){return"$or"===n?e.some((function(n){return ie(t,n,Object.keys(n))})):"$not"===n?!ie(t,e,Object.keys(e)):!e.find((function(n){return ie(t,n,Object.keys(n))}))}function ce(n,e,t,r,o){if(!Qo[n])throw new Error('unknown operator "'+n+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type or $all');return Qo[n](e,t,r,o)}function de(n){return void 0!==n&&null!==n}function fe(n){return void 0!==n}function pe(n,e){var t=e[0],r=e[1];if(0===t)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(t,10)!==t)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(n,10)===n&&n%t===r}function he(n,e){return e.some((function(e){return n instanceof Array?n.indexOf(e)>-1:n===e}))}function ve(n,e){return e.every((function(e){return n.indexOf(e)>-1}))}function ge(n,e){return n.length===e}function me(n,e){return new RegExp(e).test(n)}function _e(n,e){switch(e){case"null":return null===n;case"boolean":return"boolean"==typeof n;case"number":return"number"==typeof n;case"string":return"string"==typeof n;case"array":return n instanceof Array;case"object":return"[object Object]"==={}.toString.call(n)}throw new Error(e+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}function ye(n,e){if("object"!=typeof e)throw"Selector error: expected a JSON object";e=$n(e);var t={doc:n},r=le([t],{selector:e},Object.keys(e));return r&&1===r.length}function be(n){return V('"use strict";\nreturn '+n+";",{})}function Ce(n){return V(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+n+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{})}function we(n,e){if(n.selector&&n.filter&&"_selector"!==n.filter){var t="string"==typeof n.filter?n.filter:"function";return e(new Error('selector invalid for filter "'+t+'"'))}e()}function Ee(n){n.view&&!n.filter&&(n.filter="_view"),n.selector&&!n.filter&&(n.filter="_selector"),n.filter&&"string"==typeof n.filter&&("_view"===n.filter?n.view=P(n.view):n.filter=P(n.filter))}function Se(n,e){return e.filter&&"string"==typeof e.filter&&!e.doc_ids&&!L(n.db)}function Ae(n,e){var t=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var r=x(Do,"`view` filter parameter not found or invalid.");return t(r)}var o=B(e.view);n.db.get("_design/"+o[0],(function(r,l){if(n.isCancelled)return t(null,{status:"cancelled"});if(r)return t(T(r));var i=l&&l.views&&l.views[o[1]]&&l.views[o[1]].map;if(!i)return t(x(Ao,l.views?"missing json key: "+o[1]:"missing json key: views"));e.filter=Ce(i),n.doChanges(e)}))}else if(e.selector)e.filter=function(n){return ye(n,e.selector)},n.doChanges(e);else{var l=B(e.filter);n.db.get("_design/"+l[0],(function(r,o){if(n.isCancelled)return t(null,{status:"cancelled"});if(r)return t(T(r));var i=o&&o.filters&&o.filters[l[1]];if(!i)return t(x(Ao,o&&o.filters?"missing json key: "+l[1]:"missing json key: filters"));e.filter=be(i),n.doChanges(e)}))}}function Oe(n){n._changesFilterPlugin={validate:we,normalize:Ee,shouldFilter:Se,filter:Ae}}function ke(n){return n.reduce((function(n,e){return n[e]=!0,n}),{})}function Ne(n){if(!/^\d+\-./.test(n))return x(Mo);var e=n.indexOf("-"),t=n.substring(0,e),r=n.substring(e+1);return{prefix:parseInt(t,10),id:r}}function Re(n,e){for(var t=n.start-n.ids.length+1,r=n.ids,o=[r[0],e,[]],l=1,i=r.length;l<i;l++)o=[r[l],{status:"missing"},[o]];return[{pos:t,ids:o}]}function xe(n,e){var t,r,o,l={status:"available"};if(n._deleted&&(l.deleted=!0),e)if(n._id||(n._id=J()),r=J(32,16).toLowerCase(),n._rev){if(o=Ne(n._rev),o.error)return o;n._rev_tree=[{pos:o.prefix,ids:[o.id,{status:"missing"},[[r,l,[]]]]}],t=o.prefix+1}else n._rev_tree=[{pos:1,ids:[r,l,[]]}],t=1;else if(n._revisions&&(n._rev_tree=Re(n._revisions,l),t=n._revisions.start,r=n._revisions.ids[0]),!n._rev_tree){if(o=Ne(n._rev),o.error)return o;t=o.prefix,r=o.id,n._rev_tree=[{pos:t,ids:[r,l,[]]}]}F(n._id),n._rev=t+"-"+r;var i={metadata:{},data:{}};for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)){var a="_"===u[0];if(a&&!Zo[u]){var s=x(Io,u);throw s.message=Io.message+": "+u,s}a&&!nl[u]?i.metadata[u.slice(1)]=n[u]:i.data[u]=n[u]}return i}function Te(n,e){n=n||[],e=e||{};try{return new Blob(n,e)}catch(l){if("TypeError"!==l.name)throw l;for(var t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new t,o=0;o<n.length;o+=1)r.append(n[o]);return r.getBlob(e.type)}}function qe(n){for(var e=n.length,t=new ArrayBuffer(e),r=new Uint8Array(t),o=0;o<e;o++)r[o]=n.charCodeAt(o);return t}function Ie(n,e){return Te([qe(n)],{type:e})}function De(n,e){return Ie(el(n),e)}function je(n){for(var e="",t=new Uint8Array(n),r=t.byteLength,o=0;o<r;o++)e+=String.fromCharCode(t[o]);return e}function Fe(n,e){if("undefined"==typeof FileReader)return e(je((new FileReaderSync).readAsArrayBuffer(n)));var t=new FileReader,r="function"==typeof t.readAsBinaryString;t.onloadend=function(n){var t=n.target.result||"";if(r)return e(t);e(je(t))},r?t.readAsBinaryString(n):t.readAsArrayBuffer(n)}function Le(n,e){Fe(n,(function(n){e(n)}))}function Me(n,e){Le(n,(function(n){e(tl(n))}))}function Be(n,e){if("undefined"==typeof FileReader)return e((new FileReaderSync).readAsArrayBuffer(n));var t=new FileReader;t.onloadend=function(n){var t=n.target.result||new ArrayBuffer(0);e(t)},t.readAsArrayBuffer(n)}function Pe(n){return tl(n)}function Ue(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.slice(e,t)}function Ve(n,e,t,r,o){(t>0||r<e.size)&&(e=Ue(e,t,r)),Be(e,(function(e){n.append(e),o()}))}function $e(n,e,t,r,o){(t>0||r<e.length)&&(e=e.substring(t,r)),n.appendBinary(e),o()}function Ge(n,e){function t(){rl(o)}function r(){var n=c.end(!0),t=Pe(n);e(t),c.destroy()}function o(){var e=s*u,o=e+u;s++,s<a?d(c,n,e,o,t):d(c,n,e,o,r)}var l="string"==typeof n,i=l?n.length:n.size,u=Math.min(ol,i),a=Math.ceil(i/u),s=0,c=l?new po:new po.ArrayBuffer,d=l?$e:Ve;o()}function He(n){return po.hash(n)}function Je(n){try{return el(n)}catch(n){var e=x(To,"Attachment is not a valid base64 string");return{error:e}}}function ze(n,e,t){var r=Je(n.data);if(r.error)return t(r.error);n.length=r.length,n.data="blob"===e?Ie(r,n.content_type):"base64"===e?tl(r):r,Ge(r,(function(e){n.digest="md5-"+e,t()}))}function Xe(n,e,t){Ge(n.data,(function(r){n.digest="md5-"+r,n.length=n.data.size||n.data.length||0,"binary"===e?Le(n.data,(function(e){n.data=e,t()})):"base64"===e?Me(n.data,(function(e){n.data=e,t()})):t()}))}function We(n,e,t){if(n.stub)return t();"string"==typeof n.data?ze(n,e,t):Xe(n,e,t)}function Ke(n,e,t){function r(){l++,n.length===l&&(o?t(o):t())}if(!n.length)return t();var o,l=0;n.forEach((function(n){function t(n){o=n,++i===l.length&&r()}var l=n.data&&n.data._attachments?Object.keys(n.data._attachments):[],i=0;if(!l.length)return r();for(var u in n.data._attachments)n.data._attachments.hasOwnProperty(u)&&We(n.data._attachments[u],e,t)}))}function Qe(n,e,t,r,o,l,i,u){if(cn(e.rev_tree,t.metadata.rev))return r[o]=t,l();var a=e.winningRev||z(e),s="deleted"in e?e.deleted:fn(e,a),c="deleted"in t.metadata?t.metadata.deleted:fn(t.metadata),d=/^1-/.test(t.metadata.rev);if(s&&!c&&u&&d){var f=t.data;f._rev=a,f._id=t.metadata.id,t=xe(f,u)}var p=sn(e.rev_tree,t.metadata.rev_tree[0],n);if(u&&(s&&c&&"new_leaf"!==p.conflicts||!s&&"new_leaf"!==p.conflicts||s&&!c&&"new_branch"===p.conflicts)){var h=x(Oo);return r[o]=h,l()}var v=t.metadata.rev;t.metadata.rev_tree=p.tree,t.stemmedRevs=p.stemmedRevs||[],e.rev_map&&(t.metadata.rev_map=e.rev_map);var g,m=z(t.metadata),_=fn(t.metadata,m),y=s===_?0:s<_?-1:1;g=v===m?_:fn(t.metadata,v),i(t,m,_,g,!0,y,o,l)}function Ye(n){return"missing"===n.metadata.rev_tree[0].ids[1].status}function Ze(n,e,t,r,o,l,i,u,a){function s(n,e,t){var r=z(n.metadata),o=fn(n.metadata,r);if("was_delete"in u&&o)return l[e]=x(Ao,"deleted"),t();if(d&&Ye(n)){var a=x(Oo);return l[e]=a,t()}i(n,r,o,o,!1,o?0:1,e,t)}function c(){++p===h&&a&&a()}n=n||1e3;var d=u.new_edits,f=new yo,p=0,h=e.length;e.forEach((function(n,e){if(n._id&&pn(n._id)){var r=n._deleted?"_removeLocal":"_putLocal";return void t[r](n,{ctx:o},(function(n,t){l[e]=n||t,c()}))}var i=n.metadata.id;f.has(i)?(h--,f.get(i).push([n,e])):f.set(i,[[n,e]])})),f.forEach((function(e,t){function o(){++a<e.length?u():c()}function u(){var u=e[a],c=u[0],f=u[1];if(r.has(t))Qe(n,r.get(t),c,l,f,o,i,d);else{var p=sn([],c.metadata.rev_tree[0],n);c.metadata.rev_tree=p.tree,c.stemmedRevs=p.stemmedRevs||[],s(c,f,o)}}var a=0;u()}))}function nt(n){try{return JSON.parse(n)}catch(e){return ho.parse(n)}}function et(n){try{return JSON.stringify(n)}catch(e){return ho.stringify(n)}}function tt(n){return function(e){var t="unknown_error";e.target&&e.target.error&&(t=e.target.error.name||e.target.error.message),n(x(Fo,t,e.type))}}function rt(n,e,t){return{data:et(n),winningRev:e,deletedOrLocal:t?"1":"0",seq:n.seq,id:n.id}}function ot(n){if(!n)return null;var e=nt(n.data);return e.winningRev=n.winningRev,e.deleted="1"===n.deletedOrLocal,e.seq=n.seq,e}function lt(n){if(!n)return n;var e=n._doc_id_rev.lastIndexOf(":");return n._id=n._doc_id_rev.substring(0,e-1),n._rev=n._doc_id_rev.substring(e+1),delete n._doc_id_rev,n}function it(n,e,t,r){t?r(n?"string"!=typeof n?n:De(n,e):Te([""],{type:e})):n?"string"!=typeof n?Fe(n,(function(n){r(tl(n))})):r(n):r("")}function ut(n,e,t,r){function o(){++u===i.length&&r&&r()}function l(n,e){var r=n._attachments[e],l=r.digest;t.objectStore(al).get(l).onsuccess=function(n){r.body=n.target.result.body,o()}}var i=Object.keys(n._attachments||{});if(!i.length)return r&&r();var u=0;i.forEach((function(t){e.attachments&&e.include_docs?l(n,t):(n._attachments[t].stub=!0,o())}))}function at(n,e){return vo.all(n.map((function(n){if(n.doc&&n.doc._attachments){var t=Object.keys(n.doc._attachments);return vo.all(t.map((function(t){var r=n.doc._attachments[t];if("body"in r){var o=r.body,l=r.content_type;return new vo(function(i){it(o,l,e,(function(e){n.doc._attachments[t]=Eo(m(r,["digest","content_type"]),{data:e}),i()}))})}})))}})))}function st(n,e,t){function r(){--s||o()}function o(){l.length&&l.forEach((function(n){a.index("digestSeq").count(IDBKeyRange.bound(n+"::",n+"::￿",!1,!1)).onsuccess=function(e){e.target.result||u.delete(n)}}))}var l=[],i=t.objectStore(ul),u=t.objectStore(al),a=t.objectStore(sl),s=n.length;n.forEach((function(n){var t=i.index("_doc_id_rev"),o=e+"::"+n;t.getKey(o).onsuccess=function(n){var e=n.target.result;if("number"!=typeof e)return r();i.delete(e),a.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(n){var e=n.target.result;if(e){var t=e.value.digestSeq.split("::")[0];l.push(t),a.delete(e.primaryKey),e.continue()}else r()}}}))}function ct(n,e,t){try{return{txn:n.transaction(e,t)}}catch(n){return{error:n}}}function dt(n,e,t,r,o,l){function i(){var n=[il,ul,al,dl,sl,cl],e=ct(o,n,"readwrite");if(e.error)return l(e.error);y=e.txn,y.onabort=tt(l),y.ontimeout=tt(l),y.oncomplete=d,b=y.objectStore(il),C=y.objectStore(ul),w=y.objectStore(al),E=y.objectStore(sl),S=y.objectStore(cl),S.get(cl).onsuccess=function(n){O=n.target.result,s()},p((function(n){if(n)return F=!0,l(n);c()}))}function u(){q=!0,s()}function a(){Ze(n.revs_limit,k,r,j,y,D,h,t,u)}function s(){O&&q&&(O.docCount+=I,S.put(O))}function c(){function n(){++t===k.length&&a()}function e(e){var t=ot(e.target.result);t&&j.set(t.id,t),n()}if(k.length)for(var t=0,r=0,o=k.length;r<o;r++){var l=k[r];if(l._id&&pn(l._id))n();else{var i=b.get(l.metadata.id);i.onsuccess=e}}}function d(){F||(pl.notify(r._meta.name),l(null,D))}function f(n,e){w.get(n).onsuccess=function(t){if(t.target.result)e();else{var r=x(Bo,"unknown stub attachment with digest "+n);r.status=412,e(r)}}}function p(n){function e(){++o===t.length&&n(r)}var t=[];if(k.forEach((function(n){n.data&&n.data._attachments&&Object.keys(n.data._attachments).forEach((function(e){var r=n.data._attachments[e];r.stub&&t.push(r.digest)}))})),!t.length)return n();var r,o=0;t.forEach((function(n){f(n,(function(n){n&&!r&&(r=n),e()}))}))}function h(n,e,t,r,o,l,i,u){n.metadata.winningRev=e,n.metadata.deleted=t;var a=n.data;if(a._id=n.metadata.id,a._rev=n.metadata.rev,r&&(a._deleted=!0),a._attachments&&Object.keys(a._attachments).length)return g(n,e,t,o,i,u);I+=l,s(),v(n,e,t,o,i,u)}function v(n,e,t,o,l,i){function u(l){var i=n.stemmedRevs||[];o&&r.auto_compaction&&(i=i.concat(Y(n.metadata))),i&&i.length&&st(i,n.metadata.id,y),d.seq=l.target.result;var u=rt(d,e,t);b.put(u).onsuccess=s}function a(n){n.preventDefault(),n.stopPropagation(),C.index("_doc_id_rev").getKey(c._doc_id_rev).onsuccess=function(n){C.put(c,n.target.result).onsuccess=u}}function s(){D[l]={ok:!0,id:d.id,rev:d.rev},j.set(n.metadata.id,n.metadata),m(n,d.seq,i)}var c=n.data,d=n.metadata;c._doc_id_rev=d.id+"::"+d.rev,delete c._id,delete c._rev;var f=C.put(c);f.onsuccess=u,f.onerror=a}function g(n,e,t,r,o,l){function i(){s===c.length&&v(n,e,t,r,o,l)}function u(){s++,i()}var a=n.data,s=0,c=Object.keys(a._attachments);c.forEach((function(t){var r=n.data._attachments[t];if(r.stub)s++,i();else{var o=r.data;delete r.data,r.revpos=parseInt(e,10);_(r.digest,o,u)}}))}function m(n,e,t){function r(){++o===l.length&&t()}var o=0,l=Object.keys(n.data._attachments||{});if(!l.length)return t();for(var i=0;i<l.length;i++)(function(t){var o=n.data._attachments[t].digest,l=E.put({seq:e,digestSeq:o+"::"+e});l.onsuccess=r,l.onerror=function(n){n.preventDefault(),n.stopPropagation(),r()}})(l[i])}function _(n,e,t){w.count(n).onsuccess=function(r){if(r.target.result)return t();var o={digest:n,body:e};w.put(o).onsuccess=t}}for(var y,b,C,w,E,S,A,O,k=e.docs,N=0,R=k.length;N<R;N++){var T=k[N];T._id&&pn(T._id)||(T=k[N]=xe(T,t.new_edits),T.error&&!A&&(A=T))}if(A)return l(A);var q=!1,I=0,D=new Array(k.length),j=new yo,F=!1,L=r._meta.blobSupport?"blob":"base64";Ke(k,L,(function(n){if(n)return l(n);i()}))}function ft(n,e,t,r,o){function l(n){c=n.target.result,s&&o(s,c,d)}function i(n){s=n.target.result,c&&o(s,c,d)}function u(){if(!s.length)return o();var t,u=s[s.length-1];if(e&&e.upper)try{t=IDBKeyRange.bound(u,e.upper,!0,e.upperOpen)}catch(n){if("DataError"===n.name&&0===n.code)return o()}else t=IDBKeyRange.lowerBound(u,!0);e=t,s=null,c=null,n.getAll(e,r).onsuccess=l,n.getAllKeys(e,r).onsuccess=i}function a(n){var e=n.target.result;if(!e)return o();o([e.key],[e.value],e)}var s,c,d,f="function"==typeof n.getAll&&"function"==typeof n.getAllKeys&&r>1&&!t;f?(d={continue:u},n.getAll(e,r).onsuccess=l,n.getAllKeys(e,r).onsuccess=i):t?n.openCursor(e,"prev").onsuccess=a:n.openCursor(e).onsuccess=a}function pt(n,e,t){function r(n){var e=n.target.result;e?(o.push(e.value),e.continue()):t({target:{result:o}})}if("function"==typeof n.getAll)return void(n.getAll(e).onsuccess=t);var o=[];n.openCursor(e).onsuccess=r}function ht(n,e,t,r,o){try{if(n&&e)return o?IDBKeyRange.bound(e,n,!t,!1):IDBKeyRange.bound(n,e,!1,!t);if(n)return o?IDBKeyRange.upperBound(n):IDBKeyRange.lowerBound(n);if(e)return o?IDBKeyRange.lowerBound(e,!t):IDBKeyRange.upperBound(e,!t);if(r)return IDBKeyRange.only(r)}catch(n){return{error:n}}return null}function vt(n,e,t){function r(e,t,r){var o=e.id+"::"+r;A.get(o).onsuccess=function(r){if(t.doc=lt(r.target.result),n.conflicts){var o=Q(e);o.length&&(t.doc._conflicts=o)}ut(t.doc,n,b)}}function o(e,t){var o={id:t.id,key:t.id,value:{rev:e}},l=t.deleted;"ok"===n.deleted?(O.push(o),l?(o.value.deleted=!0,o.doc=null):n.include_docs&&r(t,o,e)):!l&&p--<=0&&(O.push(o),n.include_docs&&r(t,o,e))}function l(n){for(var e=0,t=n.length;e<t&&O.length!==h;e++){var r=n[e],l=ot(r);o(l.winningRev,l)}}function i(n,e,t){t&&(l(e),O.length<h&&t.continue())}function u(e){var t=e.target.result;n.descending&&(t=t.reverse()),l(t)}function a(){t(null,{total_rows:C,offset:n.skip,rows:O})}function s(){n.attachments?at(O,n.binary).then(a):a()}var c="startkey"in n&&n.startkey,d="endkey"in n&&n.endkey,f="key"in n&&n.key,p=n.skip||0,h="number"==typeof n.limit?n.limit:-1,v=!1!==n.inclusive_end,g=ht(c,d,v,f,n.descending),m=g&&g.error;if(m&&("DataError"!==m.name||0!==m.code))return t(x(Fo,m.name,m.message));var _=[il,ul,cl];n.attachments&&_.push(al);var y=ct(e,_,"readonly");if(y.error)return t(y.error);var b=y.txn;b.oncomplete=s,b.onabort=tt(t);var C,w=b.objectStore(il),E=b.objectStore(ul),S=b.objectStore(cl),A=E.index("_doc_id_rev"),O=[];return S.get(cl).onsuccess=function(n){C=n.target.result.docCount},m||0===h?void 0:-1===h?pt(w,g,u):void ft(w,g,n.descending,h+p,i)}function gt(n){return new vo(function(e){var t=Te([""]);n.objectStore(fl).put(t,"key").onsuccess=function(){var n=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);e(t||!n||parseInt(n[1],10)>=43)},n.onabort=function(n){n.preventDefault(),n.stopPropagation(),e(!1)}}).catch((function(){return!1}))}function mt(n,e){n.objectStore(il).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(n){e(n.target.result)}}function _t(n,e,t,r){try{n(e,t)}catch(e){r.emit("error",e)}}function yt(){!hl&&vl.length&&(hl=!0,vl.shift()())}function bt(n,e,t){vl.push((function(){n((function(n,r){_t(e,n,r,t),hl=!1,co((function(){yt(t)}))}))})),yt()}function Ct(n,e,t,r){function o(e,t,r){function o(e,t){var r=n.processChange(t,e,n);f=r.seq=e.seq;var o=C(r);if("object"==typeof o)return n.complete(o);o&&(b++,h&&y.push(r),n.attachments&&n.include_docs?ut(t,n,v,(function(){at([r],n.binary).then((function(){n.onChange(r)}))})):n.onChange(r))}function l(){for(var n=0,e=u.length;n<e&&b!==p;n++){var t=u[n];if(t){o(a[n],t)}}b!==p&&r.continue()}if(r&&e.length){var u=new Array(e.length),a=new Array(e.length),s=0;t.forEach((function(n,t){i(lt(n),e[t],(function(n,r){a[t]=n,u[t]=r,++s===e.length&&l()}))}))}}function l(n,e,t,r){if(t.seq!==e)return r();if(t.winningRev===n._rev)return r(t,n);var o=n._id+"::"+t.winningRev;_.get(o).onsuccess=function(n){r(t,lt(n.target.result))}}function i(n,e,t){if(d&&!d.has(n._id))return t();var r=w.get(n._id);if(r)return l(n,e,r,t);m.get(n._id).onsuccess=function(o){r=ot(o.target.result),w.set(n._id,r),l(n,e,r,t)}}function u(){n.complete(null,{results:y,last_seq:f})}function s(){!n.continuous&&n.attachments?at(y).then(u):u()}if(n=a(n),n.continuous){var c=t+":"+J();return pl.addListener(t,c,e,n),pl.notify(t),{cancel:function(){pl.removeListener(t,c)}}}var d=n.doc_ids&&new _o(n.doc_ids);n.since=n.since||0;var f=n.since,p="limit"in n?n.limit:-1;0===p&&(p=1);var h;h="return_docs"in n?n.return_docs:!("returnDocs"in n)||n.returnDocs;var v,g,m,_,y=[],b=0,C=I(n),w=new yo,E=[il,ul];n.attachments&&E.push(al);var S=ct(r,E,"readonly");if(S.error)return n.complete(S.error);v=S.txn,v.onabort=tt(n.complete),v.oncomplete=s,g=v.objectStore(ul),m=v.objectStore(il),_=g.index("_doc_id_rev"),ft(g,n.since&&!n.descending?IDBKeyRange.lowerBound(n.since,!0):null,n.descending,p,o)}function wt(n,e){var t=this;bt((function(e){Et(t,n,e)}),e,t.constructor)}function Et(n,e,t){function r(n){var e=n.createObjectStore(il,{keyPath:"id"});n.createObjectStore(ul,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),n.createObjectStore(al,{keyPath:"digest"}),n.createObjectStore(cl,{keyPath:"id",autoIncrement:!1}),n.createObjectStore(fl),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.createObjectStore(dl,{keyPath:"_id"});var t=n.createObjectStore(sl,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}function o(n,e){var t=n.objectStore(il);t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.openCursor().onsuccess=function(n){var r=n.target.result;if(r){var o=r.value,l=fn(o);o.deletedOrLocal=l?"1":"0",t.put(o),r.continue()}else e()}}function l(n){n.createObjectStore(dl,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function i(n,e){var t=n.objectStore(dl),r=n.objectStore(il),o=n.objectStore(ul);r.openCursor().onsuccess=function(n){var l=n.target.result;if(l){var i=l.value,u=i.id,a=pn(u),s=z(i);if(a){var c=u+"::"+s,d=u+"::",f=u+"::~",p=o.index("_doc_id_rev"),h=IDBKeyRange.bound(d,f,!1,!1),v=p.openCursor(h);v.onsuccess=function(n){if(v=n.target.result){var e=v.value;e._doc_id_rev===c&&t.put(e),o.delete(v.primaryKey),v.continue()}else r.delete(l.primaryKey),l.continue()}}else l.continue()}else e&&e()}}function u(n){var e=n.createObjectStore(sl,{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}function a(n,e){var t=n.objectStore(ul),r=n.objectStore(al),o=n.objectStore(sl);r.count().onsuccess=function(n){if(!n.target.result)return e();t.openCursor().onsuccess=function(n){var t=n.target.result;if(!t)return e();for(var r=t.value,l=t.primaryKey,i=Object.keys(r._attachments||{}),u={},a=0;a<i.length;a++)u[r._attachments[i[a]].digest]=!0;var s=Object.keys(u);for(a=0;a<s.length;a++){var c=s[a];o.put({seq:l,digestSeq:c+"::"+l})}t.continue()}}}function s(n){function e(n){return n.data?ot(n):(n.deleted="1"===n.deletedOrLocal,n)}var t=n.objectStore(ul),r=n.objectStore(il);r.openCursor().onsuccess=function(n){function o(){var n=rt(i,i.winningRev,i.deleted);r.put(n).onsuccess=function(){l.continue()}}var l=n.target.result;if(l){var i=e(l.value);if(i.winningRev=i.winningRev||z(i),i.seq)return o();(function(){var n=i.id+"::",e=i.id+"::￿",r=t.index("_doc_id_rev").openCursor(IDBKeyRange.bound(n,e)),l=0;r.onsuccess=function(n){var e=n.target.result;if(!e)return i.seq=l,o();var t=e.primaryKey;t>l&&(l=t),e.continue()}})()}}}var d=e.name,f=null;n._meta=null,n._remote=!1,n.type=function(){return"idb"},n._id=c((function(e){e(null,n._meta.instanceId)})),n._bulkDocs=function(t,r,o){dt(e,t,r,n,f,o)},n._get=function(n,e,t){function r(){t(i,{doc:o,metadata:l,ctx:u})}var o,l,i,u=e.ctx;if(!u){var a=ct(f,[il,ul,al],"readonly");if(a.error)return t(a.error);u=a.txn}u.objectStore(il).get(n).onsuccess=function(n){if(!(l=ot(n.target.result)))return i=x(Ao,"missing"),r();var t;if(e.rev)t=e.latest?hn(e.rev,l):e.rev;else{t=l.winningRev;if(fn(l))return i=x(Ao,"deleted"),r()}var a=u.objectStore(ul),s=l.id+"::"+t;a.index("_doc_id_rev").get(s).onsuccess=function(n){if(o=n.target.result,o&&(o=lt(o)),!o)return i=x(Ao,"missing"),r();r()}}},n._getAttachment=function(n,e,t,r,o){var l;if(r.ctx)l=r.ctx;else{var i=ct(f,[il,ul,al],"readonly");if(i.error)return o(i.error);l=i.txn}var u=t.digest,a=t.content_type;l.objectStore(al).get(u).onsuccess=function(n){it(n.target.result.body,a,r.binary,(function(n){o(null,n)}))}},n._info=function(e){var t,r,o=ct(f,[cl,ul],"readonly");if(o.error)return e(o.error);var l=o.txn;l.objectStore(cl).get(cl).onsuccess=function(n){r=n.target.result.docCount},l.objectStore(ul).openCursor(null,"prev").onsuccess=function(n){var e=n.target.result;t=e?e.key:0},l.oncomplete=function(){e(null,{doc_count:r,update_seq:t,idb_attachment_format:n._meta.blobSupport?"binary":"base64"})}},n._allDocs=function(n,e){vt(n,f,e)},n._changes=function(e){Ct(e,n,d,f)},n._close=function(n){f.close(),gl.delete(d),n()},n._getRevisionTree=function(n,e){var t=ct(f,[il],"readonly");if(t.error)return e(t.error);t.txn.objectStore(il).get(n).onsuccess=function(n){var t=ot(n.target.result);t?e(null,t.rev_tree):e(x(Ao))}},n._doCompaction=function(n,e,t){var r=[il,ul,al,sl],o=ct(f,r,"readwrite");if(o.error)return t(o.error);var l=o.txn;l.objectStore(il).get(n).onsuccess=function(t){var r=ot(t.target.result);X(r.rev_tree,(function(n,t,r,o,l){var i=t+"-"+r;-1!==e.indexOf(i)&&(l.status="missing")})),st(e,n,l);var o=r.winningRev,i=r.deleted;l.objectStore(il).put(rt(r,o,i))},l.onabort=tt(t),l.oncomplete=function(){t()}},n._getLocal=function(n,e){var t=ct(f,[dl],"readonly");if(t.error)return e(t.error);var r=t.txn,o=r.objectStore(dl).get(n);o.onerror=tt(e),o.onsuccess=function(n){var t=n.target.result;t?(delete t._doc_id_rev,e(null,t)):e(x(Ao))}},n._putLocal=function(n,e,t){"function"==typeof e&&(t=e,e={}),delete n._revisions;var r=n._rev,o=n._id;n._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var l,i=e.ctx;if(!i){var u=ct(f,[dl],"readwrite");if(u.error)return t(u.error);i=u.txn,i.onerror=tt(t),i.oncomplete=function(){l&&t(null,l)}}var a,s=i.objectStore(dl);r?(a=s.get(o),a.onsuccess=function(o){var i=o.target.result;if(i&&i._rev===r){s.put(n).onsuccess=function(){l={ok:!0,id:n._id,rev:n._rev},e.ctx&&t(null,l)}}else t(x(Oo))}):(a=s.add(n),a.onerror=function(n){t(x(Oo)),n.preventDefault(),n.stopPropagation()},a.onsuccess=function(){l={ok:!0,id:n._id,rev:n._rev},e.ctx&&t(null,l)})},n._removeLocal=function(n,e,t){"function"==typeof e&&(t=e,e={});var r=e.ctx;if(!r){var o=ct(f,[dl],"readwrite");if(o.error)return t(o.error);r=o.txn,r.oncomplete=function(){l&&t(null,l)}}var l,i=n._id,u=r.objectStore(dl),a=u.get(i);a.onerror=tt(t),a.onsuccess=function(r){var o=r.target.result;o&&o._rev===n._rev?(u.delete(i),l={ok:!0,id:i,rev:"0-0"},e.ctx&&t(null,l)):t(x(Ao))}},n._destroy=function(n,e){pl.removeAllListeners(d);var t=ml.get(d);t&&t.result&&(t.result.close(),gl.delete(d));var r=indexedDB.deleteDatabase(d);r.onsuccess=function(){ml.delete(d),w()&&d in localStorage&&delete localStorage[d],e(null,{ok:!0})},r.onerror=tt(e)};var p=gl.get(d);if(p)return f=p.idb,n._meta=p.global,co((function(){t(null,n)}));var h;h=e.storage?St(d,e.storage):indexedDB.open(d,ll),ml.set(d,h),h.onupgradeneeded=function(n){function e(){var n=d[f-1];f++,n&&n(c,e)}var t=n.target.result;if(n.oldVersion<1)return r(t);var c=n.currentTarget.transaction;n.oldVersion<3&&l(t),n.oldVersion<4&&u(t);var d=[o,i,a,s],f=n.oldVersion;e()},h.onsuccess=function(e){function r(){void 0!==u&&c&&(n._meta={name:d,instanceId:a,blobSupport:u},gl.set(d,{idb:f,global:n._meta}),t(null,n))}function o(){if(void 0!==i&&void 0!==l){var n=d+"_id";n in l?a=l[n]:l[n]=a=J(),l.docCount=i,s.objectStore(cl).put(l)}}f=e.target.result,f.onversionchange=function(){f.close(),gl.delete(d)},f.onabort=function(n){A("error","Database has a global failure",n.target.error),f.close(),gl.delete(d)};var l,i,u,a,s=f.transaction([cl,fl,il],"readwrite"),c=!1;s.objectStore(cl).get(cl).onsuccess=function(n){l=n.target.result||{id:cl},o()},mt(s,(function(n){i=n,o()})),Yo||(Yo=gt(s)),Yo.then((function(n){u=n,r()})),s.oncomplete=function(){c=!0,r()}},h.onerror=function(){var n="Failed to open indexedDB, are you in private browsing mode?";A("error",n),t(x(Fo,n))}}function St(n,e){try{return indexedDB.open(n,{version:ll,storage:e})}catch(e){return indexedDB.open(n,ll)}}function At(n){return decodeURIComponent(escape(n))}function Ot(n){return n<65?n-48:n-55}function kt(n,e,t){for(var r="";e<t;)r+=String.fromCharCode(Ot(n.charCodeAt(e++))<<4|Ot(n.charCodeAt(e++)));return r}function Nt(n,e,t){for(var r="";e<t;)r+=String.fromCharCode(Ot(n.charCodeAt(e+2))<<12|Ot(n.charCodeAt(e+3))<<8|Ot(n.charCodeAt(e))<<4|Ot(n.charCodeAt(e+1))),e+=4;return r}function Rt(n,e){return"UTF-8"===e?At(kt(n,0,n.length)):Nt(n,0,n.length)}function xt(n){return"'"+n+"'"}function Tt(n){return n.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function qt(n){return n.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function It(n){return delete n._id,delete n._rev,JSON.stringify(n)}function Dt(n,e,t){return n=JSON.parse(n),n._id=e,n._rev=t,n}function jt(n){for(var e="(";n--;)e+="?",n&&(e+=",");return e+")"}function Ft(n,e,t,r,o){return"SELECT "+n+" FROM "+("string"==typeof e?e:e.join(" JOIN "))+(t?" ON "+t:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(o?" ORDER BY "+o:"")}function Lt(n,e,t){function r(){++l===n.length&&o()}function o(){if(i.length){var n="SELECT DISTINCT digest AS digest FROM "+Al+" WHERE seq IN "+jt(i.length);t.executeSql(n,i,(function(n,e){for(var t=[],r=0;r<e.rows.length;r++)t.push(e.rows.item(r).digest);if(t.length){var o="DELETE FROM "+Al+" WHERE seq IN ("+i.map((function(){return"?"})).join(",")+")";n.executeSql(o,i,(function(n){var e="SELECT digest FROM "+Al+" WHERE digest IN ("+t.map((function(){return"?"})).join(",")+")";n.executeSql(e,t,(function(n,e){for(var r=new _o,o=0;o<e.rows.length;o++)r.add(e.rows.item(o).digest);t.forEach((function(e){r.has(e)||(n.executeSql("DELETE FROM "+Al+" WHERE digest=?",[e]),n.executeSql("DELETE FROM "+wl+" WHERE digest=?",[e]))}))}))}))}}))}}if(n.length){var l=0,i=[];n.forEach((function(n){var o="SELECT seq FROM "+Cl+" WHERE doc_id=? AND rev=?";t.executeSql(o,[e,n],(function(n,e){if(!e.rows.length)return r();var t=e.rows.item(0).seq;i.push(t),n.executeSql("DELETE FROM "+Cl+" WHERE seq=?",[t],r)}))}))}}function Mt(n){return function(e){A("error","WebSQL threw an error",e);var t=e&&e.constructor.toString().match(/function ([^\(]+)/),r=t&&t[1]||e.type,o=e.target||e.message;n(x(Lo,o,r))}}function Bt(n){return"size"in n?1e6*n.size:"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent)?5e6:1}function Pt(n,e,t,r,o,l,i){function u(){if(y)return i(y);l.notify(r._name),i(null,b)}function a(n,e){var t="SELECT count(*) as cnt FROM "+wl+" WHERE digest=?";_.executeSql(t,[n],(function(t,r){if(0===r.rows.item(0).cnt){var o=x(Bo,"unknown stub attachment with digest "+n);e(o)}else e()}))}function s(n){function e(){++o===t.length&&n(r)}var t=[];if(g.forEach((function(n){n.data&&n.data._attachments&&Object.keys(n.data._attachments).forEach((function(e){var r=n.data._attachments[e];r.stub&&t.push(r.digest)}))})),!t.length)return n();var r,o=0;t.forEach((function(n){a(n,(function(n){n&&!r&&(r=n),e()}))}))}function c(n,e,t,o,l,i,u,a){function s(){function e(n,e){function r(){return++o===l.length&&e(),!1}var o=0,l=Object.keys(t._attachments||{});if(!l.length)return e();for(var i=0;i<l.length;i++)(function(e){var o="INSERT INTO "+Al+" (digest, seq) VALUES (?,?)",l=[t._attachments[e].digest,n];_.executeSql(o,l,r,r)})(l[i])}var t=n.data,r=o?1:0,l=t._id,i=t._rev,u=It(t),a="INSERT INTO "+Cl+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",s=[l,i,u,r];_.executeSql(a,s,(function(n,t){var r=t.insertId;e(r,(function(){f(n,r)}))}),(function(){var n=Ft("seq",Cl,null,"doc_id=? AND rev=?");return _.executeSql(n,[l,i],(function(n,t){var o=t.rows.item(0).seq,a="UPDATE "+Cl+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",s=[u,r,l,i];n.executeSql(a,s,(function(n){e(o,(function(){f(n,o)}))}))})),!1}))}function c(n){h||(n?(h=n,a(h)):v===g.length&&s())}function d(n){v++,c(n)}function f(t,o){var i=n.metadata.id,s=n.stemmedRevs||[];l&&r.auto_compaction&&(s=Y(n.metadata).concat(s)),s.length&&Lt(s,i,t),n.metadata.seq=o;var c=n.metadata.rev;delete n.metadata.rev;var d=l?"UPDATE "+bl+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+Cl+" WHERE doc_id="+bl+".id AND rev=?) WHERE id=?":"INSERT INTO "+bl+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",f=et(n.metadata),p=l?[f,o,e,i]:[i,o,o,f];t.executeSql(d,p,(function(){b[u]={ok:!0,id:n.metadata.id,rev:c},C.set(i,n.metadata),a()}))}var h=null,v=0;n.data._id=n.metadata.id,n.data._rev=n.metadata.rev;var g=Object.keys(n.data._attachments||{});o&&(n.data._deleted=!0),g.forEach((function(t){var r=n.data._attachments[t];if(r.stub)v++,c();else{var o=r.data;delete r.data,r.revpos=parseInt(e,10);p(r.digest,o,d)}})),g.length||s()}function d(){Ze(n.revs_limit,g,r,C,_,b,c,t)}function f(n){function e(){++t===g.length&&n()}if(!g.length)return n();var t=0;g.forEach((function(n){if(n._id&&pn(n._id))return e();var t=n.metadata.id;_.executeSql("SELECT json FROM "+bl+" WHERE id = ?",[t],(function(n,r){if(r.rows.length){var o=nt(r.rows.item(0).json);C.set(t,o)}e()}))}))}function p(n,e,t){var r="SELECT digest FROM "+wl+" WHERE digest=?";_.executeSql(r,[n],(function(o,l){if(l.rows.length)return t();r="INSERT INTO "+wl+" (digest, body, escaped) VALUES (?,?,1)",o.executeSql(r,[n,Tt(e)],(function(){t()}),(function(){return t(),!1}))}))}var h=t.new_edits,v=e.docs,g=v.map((function(n){return n._id&&pn(n._id)?n:xe(n,h)})),m=g.filter((function(n){return n.error}));if(m.length)return i(m[0]);var _,y,b=new Array(g.length),C=new yo;Ke(g,"binary",(function(n){if(n)return i(n);o.transaction((function(n){_=n,s((function(n){n?y=n:f(d)}))}),Mt(i),u)}))}function Ut(n){return n.websql(n.name,n.version,n.description,n.size)}function Vt(n){try{return{db:Ut(n)}}catch(n){return{error:n}}}function $t(n){var e=Ol.get(n.name);return e||(e=Vt(n),Ol.set(n.name,e)),e}function Gt(n,e,t,r,o){function l(){++a===u.length&&o&&o()}function i(n,o){var i=n._attachments[o],u={binary:e.binary,ctx:r};t._getAttachment(n._id,o,i,u,(function(e,t){n._attachments[o]=Eo(m(i,["digest","content_type"]),{data:t}),l()}))}var u=Object.keys(n._attachments||{});if(!u.length)return o&&o();var a=0;u.forEach((function(t){e.attachments&&e.include_docs?i(n,t):(n._attachments[t].stub=!0,l())}))}function Ht(n,e){function t(){w()&&(window.localStorage["_pouch__websqldb_"+y._name]=!0),e(null,y)}function r(n,e){n.executeSql(Tl),n.executeSql("ALTER TABLE "+Cl+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],(function(){n.executeSql(Rl),n.executeSql("ALTER TABLE "+bl+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],(function(){n.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+bl+" (local, id)");var t="SELECT "+bl+".winningseq AS seq, "+bl+".json AS metadata FROM "+Cl+" JOIN "+bl+" ON "+Cl+".seq = "+bl+".winningseq";n.executeSql(t,[],(function(n,t){for(var r=[],o=[],l=0;l<t.rows.length;l++){var i=t.rows.item(l),u=i.seq,a=JSON.parse(i.metadata);fn(a)&&r.push(u),pn(a.id)&&o.push(a.id)}n.executeSql("UPDATE "+bl+"SET local = 1 WHERE id IN "+jt(o.length),o,(function(){n.executeSql("UPDATE "+Cl+" SET deleted = 1 WHERE seq IN "+jt(r.length),r,e)}))}))}))}))}function o(n,e){var t="CREATE TABLE IF NOT EXISTS "+El+" (id UNIQUE, rev, json)";n.executeSql(t,[],(function(){var t="SELECT "+bl+".id AS id, "+Cl+".json AS data FROM "+Cl+" JOIN "+bl+" ON "+Cl+".seq = "+bl+".winningseq WHERE local = 1";n.executeSql(t,[],(function(n,t){function r(){if(!o.length)return e(n);var t=o.shift(),l=JSON.parse(t.data)._rev;n.executeSql("INSERT INTO "+El+" (id, rev, json) VALUES (?,?,?)",[t.id,l,t.data],(function(n){n.executeSql("DELETE FROM "+bl+" WHERE id=?",[t.id],(function(n){n.executeSql("DELETE FROM "+Cl+" WHERE seq=?",[t.seq],(function(){r()}))}))}))}for(var o=[],l=0;l<t.rows.length;l++)o.push(t.rows.item(l));r()}))}))}function l(n,e){function t(t){function r(){if(!t.length)return e(n);var o=t.shift(),l=Rt(o.hex,_),i=l.lastIndexOf("::"),u=l.substring(0,i),a=l.substring(i+2),s="UPDATE "+Cl+" SET doc_id=?, rev=? WHERE doc_id_rev=?";n.executeSql(s,[u,a,l],(function(){r()}))}r()}var r="ALTER TABLE "+Cl+" ADD COLUMN doc_id";n.executeSql(r,[],(function(n){var e="ALTER TABLE "+Cl+" ADD COLUMN rev";n.executeSql(e,[],(function(n){n.executeSql(xl,[],(function(n){var e="SELECT hex(doc_id_rev) as hex FROM "+Cl;n.executeSql(e,[],(function(n,e){for(var r=[],o=0;o<e.rows.length;o++)r.push(e.rows.item(o));t(r)}))}))}))}))}function i(n,e){function t(n){var t="SELECT COUNT(*) AS cnt FROM "+wl;n.executeSql(t,[],(function(n,t){function r(){var t=Ft(jl+", "+bl+".id AS id",[bl,Cl],Dl,null,bl+".id ");t+=" LIMIT "+l+" OFFSET "+o,o+=l,n.executeSql(t,[],(function(n,t){if(!t.rows.length)return e(n);for(var o={},l=0;l<t.rows.length;l++)for(var i=t.rows.item(l),u=Dt(i.data,i.id,i.rev),a=Object.keys(u._attachments||{}),s=0;s<a.length;s++){var c=u._attachments[a[s]];(function(n,e){var t=o[n]=o[n]||[];-1===t.indexOf(e)&&t.push(e)})(c.digest,i.seq)}var d=[];if(Object.keys(o).forEach((function(n){o[n].forEach((function(e){d.push([n,e])}))})),!d.length)return r();var f=0;d.forEach((function(e){var t="INSERT INTO "+Al+" (digest, seq) VALUES (?,?)";n.executeSql(t,e,(function(){++f===d.length&&r()}))}))}))}if(!t.rows.item(0).cnt)return e(n);var o=0,l=10;r()}))}var r="CREATE TABLE IF NOT EXISTS "+Al+" (digest, seq INTEGER)";n.executeSql(r,[],(function(n){n.executeSql(Il,[],(function(n){n.executeSql(ql,[],t)}))}))}function u(n,e){var t="ALTER TABLE "+wl+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";n.executeSql(t,[],e)}function s(n,e){var t="ALTER TABLE "+bl+" ADD COLUMN max_seq INTEGER";n.executeSql(t,[],(function(n){var t="UPDATE "+bl+" SET max_seq=(SELECT MAX(seq) FROM "+Cl+" WHERE doc_id=id)";n.executeSql(t,[],(function(n){var t="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+bl+" (max_seq)";n.executeSql(t,[],e)}))}))}function d(n,e){n.executeSql('SELECT HEX("a") AS hex',[],(function(n,t){var r=t.rows.item(0).hex;_=2===r.length?"UTF-8":"UTF-16",e()}))}function f(){for(;E.length>0;){E.pop()(null,b)}}function p(n,e){if(0===e){var t="CREATE TABLE IF NOT EXISTS "+Sl+" (dbid, db_version INTEGER)",a="CREATE TABLE IF NOT EXISTS "+wl+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",c="CREATE TABLE IF NOT EXISTS "+Al+" (digest, seq INTEGER)",d="CREATE TABLE IF NOT EXISTS "+bl+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",p="CREATE TABLE IF NOT EXISTS "+Cl+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",h="CREATE TABLE IF NOT EXISTS "+El+" (id UNIQUE, rev, json)";n.executeSql(a),n.executeSql(h),n.executeSql(c,[],(function(){n.executeSql(ql),n.executeSql(Il)})),n.executeSql(d,[],(function(){n.executeSql(Tl),n.executeSql(p,[],(function(){n.executeSql(Rl),n.executeSql(xl),n.executeSql(t,[],(function(){var e="INSERT INTO "+Sl+" (db_version, dbid) VALUES (?,?)";b=J();var t=[yl,b];n.executeSql(e,t,(function(){f()}))}))}))}))}else{var v=function(){e<yl&&n.executeSql("UPDATE "+Sl+" SET db_version = "+yl);var t="SELECT dbid FROM "+Sl;n.executeSql(t,[],(function(n,e){b=e.rows.item(0).dbid,f()}))},g=[r,o,l,i,u,s,v],m=e,_=function(n){g[m-1](n,_),m++};_(n)}}function h(n){var e="SELECT sql FROM sqlite_master WHERE tbl_name = "+Sl;n.executeSql(e,[],(function(n,e){e.rows.length?/db_version/.test(e.rows.item(0).sql)?n.executeSql("SELECT db_version FROM "+Sl,[],(function(n,e){p(n,e.rows.item(0).db_version)})):n.executeSql("ALTER TABLE "+Sl+" ADD COLUMN db_version INTEGER",[],(function(){p(n,1)})):p(n,0)}))}function v(n,e){var t="SELECT MAX(seq) AS seq FROM "+Cl;n.executeSql(t,[],(function(n,t){var r=t.rows.item(0).seq||0;e(r)}))}function g(n,e){var t=Ft("COUNT("+bl+".id) AS 'num'",[bl,Cl],Dl,Cl+".deleted=0");n.executeSql(t,[],(function(n,t){e(t.rows.item(0).num)}))}function m(n,e,t,r,o){var l=Ft(jl,[bl,Cl],Dl,bl+".id=?"),i=[e];n.executeSql(l,i,(function(n,e){if(!e.rows.length){var l=x(Ao,"missing");return o(l)}var i=e.rows.item(0),u=nt(i.metadata);r(hn(t,u))}))}var _,y=this,b=null,C=Bt(n),E=[];y._name=n.name;var S=Eo({},n,{version:Nl,description:n.name,size:C}),A=$t(S);if(A.error)return Mt(e)(A.error);var O=A.db;"function"!=typeof O.readTransaction&&(O.readTransaction=O.transaction),(function(){O.transaction((function(n){d(n,(function(){h(n)}))}),Mt(e),t)})(),y._remote=!1,y.type=function(){return"websql"},y._id=c((function(n){n(null,b)})),y._info=function(n){var e,t;O.readTransaction((function(n){v(n,(function(n){e=n})),g(n,(function(n){t=n}))}),Mt(n),(function(){n(null,{doc_count:t,update_seq:e,websql_encoding:_})}))},y._bulkDocs=function(e,t,r){Pt(n,e,t,y,O,kl,r)},y._get=function(n,e,t){function r(n){t(n,{doc:o,metadata:l,ctx:i})}var o,l,i=e.ctx;if(!i)return O.readTransaction((function(r){y._get(n,Eo({ctx:r},e),t)}));var u,a;if(e.rev){if(e.latest)return void m(i,n,e.rev,(function(r){e.latest=!1,e.rev=r,y._get(n,e,t)}),r);u=Ft(jl,[bl,Cl],bl+".id="+Cl+".doc_id",[Cl+".doc_id=?",Cl+".rev=?"]),a=[n,e.rev]}else u=Ft(jl,[bl,Cl],Dl,bl+".id=?"),a=[n];i.executeSql(u,a,(function(n,t){if(!t.rows.length){return r(x(Ao,"missing"))}var i=t.rows.item(0);if(l=nt(i.metadata),i.deleted&&!e.rev){return r(x(Ao,"deleted"))}o=Dt(i.data,l.id,i.rev),r()}))},y._allDocs=function(n,e){var t,r=[],o="startkey"in n&&n.startkey,l="endkey"in n&&n.endkey,i="key"in n&&n.key,u="descending"in n&&n.descending,a="limit"in n?n.limit:-1,s="skip"in n?n.skip:0,c=!1!==n.inclusive_end,d=[],f=[];if(!1!==i)f.push(bl+".id = ?"),d.push(i);else if(!1!==o||!1!==l){if(!1!==o&&(f.push(bl+".id "+(u?"<=":">=")+" ?"),d.push(o)),!1!==l){var p=u?">":"<";c&&(p+="="),f.push(bl+".id "+p+" ?"),d.push(l)}!1!==i&&(f.push(bl+".id = ?"),d.push(i))}"ok"!==n.deleted&&f.push(Cl+".deleted = 0"),O.readTransaction((function(e){if(g(e,(function(n){t=n})),0!==a){var o=Ft(jl,[bl,Cl],Dl,f,bl+".id "+(u?"DESC":"ASC"));o+=" LIMIT "+a+" OFFSET "+s,e.executeSql(o,d,(function(e,t){for(var o=0,l=t.rows.length;o<l;o++){var i=t.rows.item(o),u=nt(i.metadata),a=u.id,s=Dt(i.data,a,i.rev),c=s._rev,d={id:a,key:a,value:{rev:c}};if(n.include_docs){if(d.doc=s,d.doc._rev=c,n.conflicts){var f=Q(u);f.length&&(d.doc._conflicts=f)}Gt(d.doc,n,y,e)}if(i.deleted){if("ok"!==n.deleted)continue;d.value.deleted=!0,d.doc=null}r.push(d)}}))}}),Mt(e),(function(){e(null,{total_rows:t,offset:n.skip,rows:r})}))},y._changes=function(n){if(n=a(n),n.continuous){var e=y._name+":"+J();return kl.addListener(y._name,e,y,n),kl.notify(y._name),{cancel:function(){kl.removeListener(y._name,e)}}}var t=n.descending;n.since=n.since&&!t?n.since:0;var r="limit"in n?n.limit:-1;0===r&&(r=1);var o;o="return_docs"in n?n.return_docs:!("returnDocs"in n)||n.returnDocs;var l=[],i=0;(function(){var e=bl+".json AS metadata, "+bl+".max_seq AS maxSeq, "+Cl+".json AS winningDoc, "+Cl+".rev AS winningRev ",u=bl+" JOIN "+Cl,a=bl+".id="+Cl+".doc_id AND "+bl+".winningseq="+Cl+".seq",s=["maxSeq > ?"],c=[n.since];n.doc_ids&&(s.push(bl+".id IN "+jt(n.doc_ids.length)),c=c.concat(n.doc_ids));var d="maxSeq "+(t?"DESC":"ASC"),f=Ft(e,u,a,s,d),p=I(n);n.view||n.filter||(f+=" LIMIT "+r);var h=n.since||0;O.readTransaction((function(e){e.executeSql(f,c,(function(e,t){function u(e){return function(){n.onChange(e)}}for(var a=0,s=t.rows.length;a<s;a++){var c=t.rows.item(a),d=nt(c.metadata);h=c.maxSeq;var f=Dt(c.winningDoc,d.id,c.winningRev),v=n.processChange(f,d,n);v.seq=c.maxSeq;var g=p(v);if("object"==typeof g)return n.complete(g);if(g&&(i++,o&&l.push(v),n.attachments&&n.include_docs?Gt(f,n,y,e,u(v)):u(v)()),i===r)break}}))}),Mt(n.complete),(function(){n.continuous||n.complete(null,{results:l,last_seq:h})}))})()},y._close=function(n){n()},y._getAttachment=function(n,e,t,r,o){var l,i=r.ctx,u=t.digest,a=t.content_type,s="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+wl+" WHERE digest=?";i.executeSql(s,[u],(function(n,e){var t=e.rows.item(0),i=t.escaped?qt(t.body):Rt(t.body,_);l=r.binary?Ie(i,a):tl(i),o(null,l)}))},y._getRevisionTree=function(n,e){O.readTransaction((function(t){var r="SELECT json AS metadata FROM "+bl+" WHERE id = ?";t.executeSql(r,[n],(function(n,t){if(t.rows.length){var r=nt(t.rows.item(0).metadata);e(null,r.rev_tree)}else e(x(Ao))}))}))},y._doCompaction=function(n,e,t){if(!e.length)return t();O.transaction((function(t){var r="SELECT json AS metadata FROM "+bl+" WHERE id = ?";t.executeSql(r,[n],(function(t,r){var o=nt(r.rows.item(0).metadata);X(o.rev_tree,(function(n,t,r,o,l){var i=t+"-"+r;-1!==e.indexOf(i)&&(l.status="missing")}));var l="UPDATE "+bl+" SET json = ? WHERE id = ?";t.executeSql(l,[et(o),n])})),Lt(e,n,t)}),Mt(t),(function(){t()}))},y._getLocal=function(n,e){O.readTransaction((function(t){var r="SELECT json, rev FROM "+El+" WHERE id=?";t.executeSql(r,[n],(function(t,r){if(r.rows.length){var o=r.rows.item(0),l=Dt(o.json,n,o.rev);e(null,l)}else e(x(Ao))}))}))},y._putLocal=function(n,e,t){function r(n){var r,s;l?(r="UPDATE "+El+" SET rev=?, json=? WHERE id=? AND rev=?",s=[o,a,i,l]):(r="INSERT INTO "+El+" (id, rev, json) VALUES (?,?,?)",s=[i,o,a]),n.executeSql(r,s,(function(n,r){r.rowsAffected?(u={ok:!0,id:i,rev:o},e.ctx&&t(null,u)):t(x(Oo))}),(function(){return t(x(Oo)),!1}))}"function"==typeof e&&(t=e,e={}),delete n._revisions;var o,l=n._rev,i=n._id;o=n._rev=l?"0-"+(parseInt(l.split("-")[1],10)+1):"0-1";var u,a=It(n);e.ctx?r(e.ctx):O.transaction(r,Mt(t),(function(){u&&t(null,u)}))},y._removeLocal=function(n,e,t){function r(r){var l="DELETE FROM "+El+" WHERE id=? AND rev=?",i=[n._id,n._rev];r.executeSql(l,i,(function(r,l){if(!l.rowsAffected)return t(x(Ao));o={ok:!0,id:n._id,rev:"0-0"},e.ctx&&t(null,o)}))}"function"==typeof e&&(t=e,e={});var o;e.ctx?r(e.ctx):O.transaction(r,Mt(t),(function(){o&&t(null,o)}))},y._destroy=function(n,e){kl.removeAllListeners(y._name),O.transaction((function(n){[bl,Cl,wl,Sl,El,Al].forEach((function(e){n.executeSql("DROP TABLE IF EXISTS "+e,[])}))}),Mt(e),(function(){w()&&(delete window.localStorage["_pouch__websqldb_"+y._name],delete window.localStorage[y._name]),e(null,{ok:!0})}))}}function Jt(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(n){return!1}}function zt(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var n=w(),e="_pouch__websqldb_valid_"+navigator.userAgent;if(n&&localStorage[e])return"1"===localStorage[e];var t=Jt();return n&&(localStorage[e]=t?"1":"0"),t}function Xt(){return"function"==typeof openDatabase&&zt()}function Wt(n,e,t,r){return openDatabase(n,e,t,r)}function Kt(n,e){var t=Eo({websql:Wt},n);Ht.call(this,t,e)}function Qt(){for(var n={},e=new vo(function(e,t){n.resolve=e,n.reject=t}),t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];return n.promise=e,vo.resolve().then((function(){return fetch.apply(null,t)})).then((function(e){n.resolve(e)})).catch((function(e){n.reject(e)})),n}function Yt(n,e){var t,r,o,l=new Headers,i={method:n.method,credentials:"include",headers:l};return n.json&&(l.set("Accept","application/json"),l.set("Content-Type",n.headers["Content-Type"]||"application/json")),n.body&&n.processData&&"string"!=typeof n.body?i.body=JSON.stringify(n.body):i.body="body"in n?n.body:null,Object.keys(n.headers).forEach((function(e){n.headers.hasOwnProperty(e)&&l.set(e,n.headers[e])})),t=Qt(n.url,i),n.timeout>0&&(r=setTimeout((function(){t.reject(new Error("Load timeout for resource: "+n.url))}),n.timeout)),t.promise.then((function(e){return o={statusCode:e.status},n.timeout>0&&clearTimeout(r),o.statusCode>=200&&o.statusCode<300?n.binary?e.blob():e.text():e.json()})).then((function(n){o.statusCode>=200&&o.statusCode<300?e(null,o,n):(n.status=o.statusCode,e(n))})).catch((function(n){n||(n=new Error("canceled")),e(n)})),{abort:t.reject}}function Zt(n,e){var t,r,o=!1,l=function(){t.abort(),a()},i=function(){o=!0,t.abort(),a()},u={abort:l},a=function(){clearTimeout(r),u.abort=function(){},t&&(t.onprogress=void 0,t.upload&&(t.upload.onprogress=void 0),t.onreadystatechange=void 0,t=void 0)};t=n.xhr?new n.xhr:new XMLHttpRequest;try{t.open(n.method,n.url)}catch(n){return e(new Error(n.name||"Url is invalid"))}t.withCredentials=!("withCredentials"in n)||n.withCredentials,"GET"===n.method?delete n.headers["Content-Type"]:n.json&&(n.headers.Accept="application/json",n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.body&&n.processData&&"string"!=typeof n.body&&(n.body=JSON.stringify(n.body))),n.binary&&(t.responseType="arraybuffer"),"body"in n||(n.body=null);for(var s in n.headers)n.headers.hasOwnProperty(s)&&t.setRequestHeader(s,n.headers[s]);return n.timeout>0&&(r=setTimeout(i,n.timeout),t.onprogress=function(){clearTimeout(r),4!==t.readyState&&(r=setTimeout(i,n.timeout))},void 0!==t.upload&&(t.upload.onprogress=t.onprogress)),t.onreadystatechange=function(){if(4===t.readyState){var r={statusCode:t.status};if(t.status>=200&&t.status<300){var l;l=n.binary?Te([t.response||""],{type:t.getResponseHeader("Content-Type")}):t.responseText,e(null,r,l)}else{var i={};if(o)i=new Error("ETIMEDOUT"),i.code="ETIMEDOUT";else if("string"==typeof t.response)try{i=JSON.parse(t.response)}catch(n){}i.status=t.status,e(i)}a()}},n.body&&n.body instanceof Blob?Be(n.body,(function(n){t.send(n)})):t.send(n.body),u}function nr(n,e){return Ll||n.xhr?Zt(n,e):Yt(n,e)}function er(){return""}function tr(n,e){function t(e,t,r){if(!n.binary&&n.json&&"string"==typeof e)try{e=JSON.parse(e)}catch(n){return r(n)}Array.isArray(e)&&(e=e.map((function(n){return n.error||n.missing?T(n):n}))),n.binary&&Ml(e,t),r(null,e,t)}return n=a(n),n=Eo({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},n),n.json&&(n.binary||(n.headers.Accept="application/json"),n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json"),n.binary&&(n.encoding=null,n.json=!1),n.processData||(n.json=!1),nr(n,(function(r,o,l){if(r)return e(T(r));var i,u=o.headers&&o.headers["content-type"],a=l||er();if(!n.binary&&(n.json||!n.processData)&&"object"!=typeof a&&(/json/.test(u)||/^[\s]*\{/.test(a)&&/\}[\s]*$/.test(a)))try{a=JSON.parse(a.toString())}catch(n){}o.statusCode>=200&&o.statusCode<300?t(a,o,e):(i=T(a),i.status=o.statusCode,e(i))}))}function rr(n,e){var t=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r=-1!==t.indexOf("safari")&&-1===t.indexOf("chrome"),o=-1!==t.indexOf("msie"),l=-1!==t.indexOf("edge"),i=r||(o||l)&&"GET"===n.method,u=!("cache"in n)||n.cache;if(!/^blob:/.test(n.url)&&(i||!u)){var a=-1!==n.url.indexOf("?");n.url+=(a?"&":"?")+"_nonce="+Date.now()}return tr(n,e)}function or(n,e){return new vo(function(t,r){function o(){c++,n[d++]().then(i,u)}function l(){++f===p?s?r(s):t():a()}function i(){c--,l()}function u(n){c--,s=s||n,l()}function a(){for(;c<e&&d<p;)o()}var s,c=0,d=0,f=0,p=n.length;a()})}function lr(n){var e=n.doc&&n.doc._attachments;e&&Object.keys(e).forEach((function(n){var t=e[n];t.data=De(t.data,t.content_type)}))}function ir(n){return/^_design/.test(n)?"_design/"+encodeURIComponent(n.slice(8)):/^_local/.test(n)?"_local/"+encodeURIComponent(n.slice(7)):encodeURIComponent(n)}function ur(n){return n._attachments&&Object.keys(n._attachments)?vo.all(Object.keys(n._attachments).map((function(e){var t=n._attachments[e];if(t.data&&"string"!=typeof t.data)return new vo(function(n){Me(t.data,n)}).then((function(n){t.data=n}))}))):vo.resolve()}function ar(n){if(!n.prefix)return!1;var e=U(n.prefix).protocol;return"http"===e||"https"===e}function sr(n,e){if(ar(e)){var t=e.name.substr(e.prefix.length);n=e.prefix+encodeURIComponent(t)}var r=U(n);(r.user||r.password)&&(r.auth={username:r.user,password:r.password});var o=r.path.replace(/(^\/|\/$)/g,"").split("/");return r.db=o.pop(),-1===r.db.indexOf("%")&&(r.db=encodeURIComponent(r.db)),r.path=o.join("/"),r}function cr(n,e){return dr(n,n.db+"/"+e)}function dr(n,e){var t=n.path?"/":"";return n.protocol+"://"+n.host+(n.port?":"+n.port:"")+"/"+n.path+t+e}function fr(n){return"?"+Object.keys(n).map((function(e){return e+"="+encodeURIComponent(n[e])})).join("&")}function pr(n,e){function t(n,e,t){var r=n.ajax||{},o=Eo(a(d),r,e),l=a(d.headers||{});return o.headers=Eo(l,r.headers,e.headers||{}),u.constructor.listeners("debug").length&&u.constructor.emit("debug",["http",o.method,o.url]),u._ajax(o,t)}function r(n,e){return new vo(function(r,o){t(n,e,(function(n,e){if(n)return o(n);r(e)}))})}function o(n,e){return f(n,uo((function(n){l().then((function(){return e.apply(this,n)})).catch((function(e){n.pop()(e)}))})))}function l(){return n.skipSetup||n.skip_setup?vo.resolve():g||(g=r({},{method:"GET",url:c}).catch((function(n){return n&&n.status&&404===n.status?(N(404,"PouchDB is just detecting if the remote exists."),r({},{method:"PUT",url:c})):vo.reject(n)})).catch((function(n){return!(!n||!n.status||412!==n.status)||vo.reject(n)})),g.catch((function(){g=null})),g)}function i(n){return n.split("/").map(encodeURIComponent).join("/")}var u=this,s=sr(n.name,n),c=cr(s,"");n=a(n);var d=n.ajax||{};if(n.auth||s.auth){var p=n.auth||s.auth,h=p.username+":"+p.password,v=tl(unescape(encodeURIComponent(h)));d.headers=d.headers||{},d.headers.Authorization="Basic "+v}u._ajax=rr;var g;co((function(){e(null,u)})),u._remote=!0,u.type=function(){return"http"},u.id=o("id",(function(n){t({},{method:"GET",url:dr(s,"")},(function(e,t){var r=t&&t.uuid?t.uuid+s.db:cr(s,"");n(null,r)}))})),u.request=o("request",(function(n,e){n.url=cr(s,n.url),t({},n,e)})),u.compact=o("compact",(function(n,e){"function"==typeof n&&(e=n,n={}),n=a(n),t(n,{url:cr(s,"_compact"),method:"POST"},(function(){function t(){u.info((function(r,o){o&&!o.compact_running?e(null,{ok:!0}):setTimeout(t,n.interval||200)}))}t()}))})),u.bulkGet=f("bulkGet",(function(n,e){function r(e){var r={};n.revs&&(r.revs=!0),n.attachments&&(r.attachments=!0),n.latest&&(r.latest=!0),t(n,{url:cr(s,"_bulk_get"+fr(r)),method:"POST",body:{docs:n.docs}},e)}function o(){for(var t=Pl,r=Math.ceil(n.docs.length/t),o=0,i=new Array(r),u=0;u<r;u++){var a=m(n,["revs","attachments","latest"]);a.ajax=d,a.docs=n.docs.slice(u*t,Math.min(n.docs.length,(u+1)*t)),b(l,a,(function(n){return function(t,l){i[n]=l.results,++o===r&&e(null,{results:D(i)})}})(u))}}var l=this,i=dr(s,""),u=Ul[i];"boolean"!=typeof u?r((function(n,t){n?(Ul[i]=!1,N(n.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),o()):(Ul[i]=!0,e(null,t))})):u?r(e):o()})),u._info=function(n){l().then((function(){t({},{method:"GET",url:cr(s,"")},(function(e,t){if(e)return n(e);t.host=cr(s,""),n(null,t)}))})).catch(n)},u.get=o("get",(function(n,e,t){function o(n){function t(t){var l=o[t],u=ir(n._id)+"/"+i(t)+"?rev="+n._rev;return r(e,{method:"GET",url:cr(s,u),binary:!0}).then((function(n){return e.binary?n:new vo(function(e){Me(n,e)})})).then((function(n){delete l.stub,delete l.length,l.data=n}))}var o=n._attachments,l=o&&Object.keys(o);if(o&&l.length){return or(l.map((function(n){return function(){return t(n)}})),5)}}function l(n){return Array.isArray(n)?vo.all(n.map((function(n){if(n.ok)return o(n.ok)}))):o(n)}"function"==typeof e&&(t=e,e={}),e=a(e);var u={};e.revs&&(u.revs=!0),e.revs_info&&(u.revs_info=!0),e.latest&&(u.latest=!0),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),u.open_revs=e.open_revs),e.rev&&(u.rev=e.rev),e.conflicts&&(u.conflicts=e.conflicts),n=ir(n);var c={method:"GET",url:cr(s,n+fr(u))};r(e,c).then((function(n){return vo.resolve().then((function(){if(e.attachments)return l(n)})).then((function(){t(null,n)}))})).catch(t)})),u.remove=o("remove",(function(n,e,r,o){var l;"string"==typeof e?(l={_id:n,_rev:e},"function"==typeof r&&(o=r,r={})):(l=n,"function"==typeof e?(o=e,r={}):(o=r,r=e));var i=l._rev||r.rev;t(r,{method:"DELETE",url:cr(s,ir(l._id))+"?rev="+i},o)})),u.getAttachment=o("getAttachment",(function(n,e,r,o){"function"==typeof r&&(o=r,r={});var l=r.rev?"?rev="+r.rev:"";t(r,{method:"GET",url:cr(s,ir(n))+"/"+i(e)+l,binary:!0},o)})),u.removeAttachment=o("removeAttachment",(function(n,e,r,o){t({},{method:"DELETE",url:cr(s,ir(n)+"/"+i(e))+"?rev="+r},o)})),u.putAttachment=o("putAttachment",(function(n,e,r,o,l,u){"function"==typeof l&&(u=l,l=o,o=r,r=null);var a=ir(n)+"/"+i(e),c=cr(s,a);if(r&&(c+="?rev="+r),"string"==typeof o){var f;try{f=el(o)}catch(n){return u(x(To,"Attachment is not a valid base64 string"))}o=f?Ie(f,l):""}t({},{headers:{"Content-Type":l},method:"PUT",url:c,processData:!1,body:o,timeout:d.timeout||6e4},u)})),u._bulkDocs=function(n,e,r){n.new_edits=e.new_edits,l().then((function(){return vo.all(n.docs.map(ur))})).then((function(){t(e,{method:"POST",url:cr(s,"_bulk_docs"),timeout:e.timeout,body:n},(function(n,e){if(n)return r(n);e.forEach((function(n){n.ok=!0})),r(null,e)}))})).catch(r)},u._put=function(n,e,r){l().then((function(){return ur(n)})).then((function(){t(e,{method:"PUT",url:cr(s,ir(n._id)),body:n},(function(n,e){if(n)return r(n);r(null,e)}))})).catch(r)},u.allDocs=o("allDocs",(function(n,e){"function"==typeof n&&(e=n,n={}),n=a(n);var t,o={},l="GET";n.conflicts&&(o.conflicts=!0),n.descending&&(o.descending=!0),n.include_docs&&(o.include_docs=!0),n.attachments&&(o.attachments=!0),n.key&&(o.key=JSON.stringify(n.key)),n.start_key&&(n.startkey=n.start_key),n.startkey&&(o.startkey=JSON.stringify(n.startkey)),n.end_key&&(n.endkey=n.end_key),n.endkey&&(o.endkey=JSON.stringify(n.endkey)),void 0!==n.inclusive_end&&(o.inclusive_end=!!n.inclusive_end),void 0!==n.limit&&(o.limit=n.limit),void 0!==n.skip&&(o.skip=n.skip);var i=fr(o);void 0!==n.keys&&(l="POST",t={keys:n.keys}),r(n,{method:l,url:cr(s,"_all_docs"+i),body:t}).then((function(t){n.include_docs&&n.attachments&&n.binary&&t.rows.forEach(lr),e(null,t)})).catch(e)})),u._changes=function(n){var e="batch_size"in n?n.batch_size:Bl;n=a(n),n.timeout="timeout"in n?n.timeout:"timeout"in d?d.timeout:3e4;var r,o=n.timeout?{timeout:n.timeout-5e3}:{},i=void 0!==n.limit&&n.limit;r="return_docs"in n?n.return_docs:!("returnDocs"in n)||n.returnDocs;var u=i;if(n.style&&(o.style=n.style),(n.include_docs||n.filter&&"function"==typeof n.filter)&&(o.include_docs=!0),n.attachments&&(o.attachments=!0),n.continuous&&(o.feed="longpoll"),n.conflicts&&(o.conflicts=!0),n.descending&&(o.descending=!0),"heartbeat"in n?n.heartbeat&&(o.heartbeat=n.heartbeat):n.continuous&&(o.heartbeat=1e4),n.filter&&"string"==typeof n.filter&&(o.filter=n.filter),n.view&&"string"==typeof n.view&&(o.filter="_view",o.view=n.view),n.query_params&&"object"==typeof n.query_params)for(var c in n.query_params)n.query_params.hasOwnProperty(c)&&(o[c]=n.query_params[c]);var f,p="GET";n.doc_ids?(o.filter="_doc_ids",p="POST",f={doc_ids:n.doc_ids}):n.selector&&(o.filter="_selector",p="POST",f={selector:n.selector});var h,v,g=function(r,a){if(!n.aborted){o.since=r,"object"==typeof o.since&&(o.since=JSON.stringify(o.since)),n.descending?i&&(o.limit=u):o.limit=!i||u>e?e:u;var c={method:p,url:cr(s,"_changes"+fr(o)),timeout:n.timeout,body:f};v=r,n.aborted||l().then((function(){h=t(n,c,a)})).catch(a)}},m={results:[]},_=function(t,o){if(!n.aborted){var l=0;if(o&&o.results){l=o.results.length,m.last_seq=o.last_seq;({}).query=n.query_params,o.results=o.results.filter((function(e){u--;var t=I(n)(e);return t&&(n.include_docs&&n.attachments&&n.binary&&lr(e),r&&m.results.push(e),n.onChange(e)),t}))}else if(t)return n.aborted=!0,void n.complete(t);o&&o.last_seq&&(v=o.last_seq);var a=i&&u<=0||o&&l<e||n.descending;(!n.continuous||i&&u<=0)&&a?n.complete(null,m):co((function(){g(v,_)}))}};return g(n.since||0,_),{cancel:function(){n.aborted=!0,h&&h.abort()}}},u.revsDiff=o("revsDiff",(function(n,e,r){"function"==typeof e&&(r=e,e={}),t(e,{method:"POST",url:cr(s,"_revs_diff"),body:n},r)})),u._close=function(n){n()},u._destroy=function(n,e){t(n,{url:cr(s,""),method:"DELETE"},(function(n,t){if(n&&n.status&&404!==n.status)return e(n);e(null,t)}))}}function hr(n){this.status=400,this.name="query_parse_error",this.message=n,this.error=!0;try{Error.captureStackTrace(this,hr)}catch(n){}}function vr(n){this.status=404,this.name="not_found",this.message=n,this.error=!0;try{Error.captureStackTrace(this,vr)}catch(n){}}function gr(n){this.status=500,this.name="invalid_value",this.message=n,this.error=!0;try{Error.captureStackTrace(this,gr)}catch(n){}}function mr(n,e){return e&&n.then((function(n){co((function(){e(null,n)}))}),(function(n){co((function(){e(n)}))})),n}function _r(n){return uo((function(e){var t=e.pop(),r=n.apply(this,e);return"function"==typeof t&&mr(r,t),r}))}function yr(n,e){return n.then((function(n){return e().then((function(){return n}))}),(function(n){return e().then((function(){throw n}))}))}function br(n,e){return function(){var t=arguments,r=this;return n.add((function(){return e.apply(r,t)}))}}function Cr(n){var e=new _o(n),t=new Array(e.size),r=-1;return e.forEach((function(n){t[++r]=n})),t}function wr(n){var e=new Array(n.size),t=-1;return n.forEach((function(n,r){e[++t]=r})),e}function Er(n){return new gr("builtin "+n+" function requires map values to be numbers or number arrays")}function Sr(n){for(var e=0,t=0,r=n.length;t<r;t++){var o=n[t];if("number"!=typeof o){if(!Array.isArray(o))throw Er("_sum");e="number"==typeof e?[e]:e;for(var l=0,i=o.length;l<i;l++){var u=o[l];if("number"!=typeof u)throw Er("_sum");void 0===e[l]?e.push(u):e[l]+=u}}else"number"==typeof e?e+=o:e[0]+=o}return e}function Ar(n,e){return V("return ("+n.replace(/;\s*$/,"")+");",{emit:e,sum:Sr,log:$l,isArray:Gl,toJSON:Hl})}function Or(){this.promise=new vo(function(n){n()})}function kr(n){if(!n)return"undefined";switch(typeof n){case"function":case"string":return n.toString();default:return JSON.stringify(n)}}function Nr(n,e){return kr(n)+kr(e)+"undefined"}function Rr(n,e,t,r,o,l){var i,u=Nr(t,r);if(!o&&(i=n._cachedViews=n._cachedViews||{},i[u]))return i[u];var a=n.info().then((function(a){function s(n){n.views=n.views||{};var t=e;-1===t.indexOf("/")&&(t=e+"/"+e);var r=n.views[t]=n.views[t]||{};if(!r[c])return r[c]=!0,n}var c=a.db_name+"-mrview-"+(o?"temp":He(u));return $(n,"_local/"+l,s).then((function(){return n.registerDependentDatabase(c).then((function(e){var o=e.db;o.auto_compaction=!0;var l={name:c,db:o,sourceDB:n,adapter:n.adapter,mapFun:t,reduceFun:r};return l.db.get("_local/lastSeq").catch((function(n){if(404!==n.status)throw n})).then((function(n){return l.seq=n?n.seq:0,i&&l.db.once("destroyed",(function(){delete i[u]})),l}))}))}))}));return i&&(i[u]=a),a}function xr(n){return-1===n.indexOf("/")?[n,n]:n.split("/")}function Tr(n){return 1===n.length&&/^1-/.test(n[0].rev)}function qr(n,e){try{n.emit("error",e)}catch(n){A("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),A("error",e)}}function Ir(n,e){if("function"==typeof n&&2===n.length){var t=n;return function(n){return t(n,e)}}return Ar(n.toString(),e)}function Dr(n){return Wl[n]?Wl[n]:Ar(n.toString())}function jr(n,e){var t=n.views&&n.views[e];if("string"!=typeof t.map)throw new vr("ddoc "+n._id+" has no string view named "+e+", instead found object of type: "+typeof t.map)}function Fr(n,e,t){return Kl.query.call(this,n,e,t)}function Lr(n){return Kl.viewCleanup.call(this,n)}function Mr(n){return/^1-/.test(n)}function Br(n,e,t){return!n._attachments||!n._attachments[t]||n._attachments[t].digest!==e._attachments[t].digest}function Pr(n,e){var t=Object.keys(e._attachments);return vo.all(t.map((function(t){return n.getAttachment(e._id,t,{rev:e._rev})})))}function Ur(n,e,t){var r=L(e)&&!L(n),o=Object.keys(t._attachments);return r?n.get(t._id).then((function(r){return vo.all(o.map((function(o){return Br(r,t,o)?e.getAttachment(t._id,o):n.getAttachment(r._id,o)})))})).catch((function(n){if(404!==n.status)throw n;return Pr(e,t)})):Pr(e,t)}function Vr(n){var e=[];return Object.keys(n).forEach((function(t){n[t].missing.forEach((function(n){e.push({id:t,rev:n})}))})),{docs:e,revs:!0,latest:!0}}function $r(n,e,t,r){function o(){var o=Vr(t);if(o.docs.length)return n.bulkGet(o).then((function(t){if(r.cancelled)throw new Error("cancelled");return vo.all(t.results.map((function(t){return vo.all(t.docs.map((function(t){var r=t.ok;return t.error&&(f=!1),r&&r._attachments?Ur(e,n,r).then((function(n){var e=Object.keys(r._attachments);return n.forEach((function(n,t){var o=r._attachments[e[t]];delete o.stub,delete o.length,o.data=n})),r})):r})))}))).then((function(n){d=d.concat(D(n).filter(Boolean))}))}))}function l(n){return n._attachments&&Object.keys(n._attachments).length>0}function i(n){return n._conflicts&&n._conflicts.length>0}function u(e){return n.allDocs({keys:e,include_docs:!0,conflicts:!0}).then((function(n){if(r.cancelled)throw new Error("cancelled");n.rows.forEach((function(n){n.deleted||!n.doc||!Mr(n.value.rev)||l(n.doc)||i(n.doc)||(n.doc._conflicts&&delete n.doc._conflicts,d.push(n.doc),delete t[n.id])}))}))}function s(){var n=Object.keys(t).filter((function(n){var e=t[n].missing;return 1===e.length&&Mr(e[0])}));if(n.length>0)return u(n)}function c(){return{ok:f,docs:d}}t=a(t);var d=[],f=!0;return vo.resolve().then(s).then(o).then(c)}function Gr(n,e,t,r,o){return n.get(e).catch((function(t){if(404===t.status)return"http"!==n.adapter&&"https"!==n.adapter||N(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:e,history:[],replicator:Zl,version:Yl};throw t})).then((function(l){if(!o.cancelled&&l.last_seq!==t)return l.history=(l.history||[]).filter((function(n){return n.session_id!==r})),l.history.unshift({last_seq:t,session_id:r}),l.history=l.history.slice(0,ni),l.version=Yl,l.replicator=Zl,l.session_id=r,l.last_seq=t,n.put(l).catch((function(l){if(409===l.status)return Gr(n,e,t,r,o);throw l}))}))}function Hr(n,e,t,r){this.src=n,this.target=e,this.id=t,this.returnValue=r}function Jr(n,e){return n.session_id===e.session_id?{last_seq:n.last_seq,history:n.history}:zr(n.history,e.history)}function zr(n,e){var t=n[0],r=n.slice(1),o=e[0],l=e.slice(1);return t&&0!==e.length?Xr(t.session_id,e)?{last_seq:t.last_seq,history:n}:Xr(o.session_id,r)?{last_seq:o.last_seq,history:l}:zr(r,l):{last_seq:ei,history:[]}}function Xr(n,e){var t=e[0],r=e.slice(1);return!(!n||0===e.length)&&(n===t.session_id||Xr(n,r))}function Wr(n){return"number"==typeof n.status&&4===Math.floor(n.status/100)}function Kr(n,e,t,r){if(!1===n.retry)return e.emit("error",t),void e.removeAllListeners();if("function"!=typeof n.back_off_function&&(n.back_off_function=k),e.emit("requestError",t),"active"===e.state||"pending"===e.state){e.emit("paused",t),e.state="stopped";var o=function(){n.current_back_off=ri},l=function(){e.removeListener("active",o)};e.once("paused",l),e.once("active",o)}n.current_back_off=n.current_back_off||ri,n.current_back_off=n.back_off_function(n.current_back_off),setTimeout(r,n.current_back_off)}function Qr(n){return Object.keys(n).sort(Jn).reduce((function(e,t){return e[t]=n[t],e}),{})}function Yr(n,e,t){var r=t.doc_ids?t.doc_ids.sort(Jn):"",o=t.filter?t.filter.toString():"",l="",i="",u="";return t.selector&&(u=JSON.stringify(t.selector)),t.filter&&t.query_params&&(l=JSON.stringify(Qr(t.query_params))),t.filter&&"_view"===t.filter&&(i=t.view.toString()),vo.all([n.id(),e.id()]).then((function(n){var e=n[0]+n[1]+o+i+l+r+u;return new vo(function(n){Ge(e,n)})})).then((function(n){return"_local/"+(n=n.replace(/\//g,".").replace(/\+/g,"_"))}))}function Zr(n,e,t,r,o){function l(){return E?vo.resolve():Yr(n,e,t).then((function(t){w=t,E=new Hr(n,e,w,r)}))}function i(){if(M=[],0!==C.docs.length){var n=C.docs,l={timeout:t.timeout};return e.bulkDocs({docs:n,new_edits:!1},l).then((function(e){if(r.cancelled)throw h(),new Error("cancelled");var t=Object.create(null);e.forEach((function(n){n.error&&(t[n.id]=n)}));var l=Object.keys(t).length;o.doc_write_failures+=l,o.docs_written+=n.length-l,n.forEach((function(n){var e=t[n._id];if(e){if(o.errors.push(e),"unauthorized"!==e.name&&"forbidden"!==e.name)throw e;r.emit("denied",a(e))}else M.push(n)}))}),(function(e){throw o.doc_write_failures+=n.length,e}))}}function u(){if(C.error)throw new Error("There was a problem getting docs.");o.last_seq=R=C.seq;var n=a(o);return M.length&&(n.docs=M,r.emit("change",n)),O=!0,E.writeCheckpoint(C.seq,B).then((function(){if(O=!1,r.cancelled)throw h(),new Error("cancelled");C=void 0,_()})).catch((function(n){throw b(n),n}))}function s(){var n={};return C.changes.forEach((function(e){"_user/"!==e.id&&(n[e.id]=e.changes.map((function(n){return n.rev})))})),e.revsDiff(n).then((function(n){if(r.cancelled)throw h(),new Error("cancelled");C.diffs=n}))}function c(){return $r(n,e,C.diffs,r).then((function(n){C.error=!n.ok,n.docs.forEach((function(n){delete C.diffs[n._id],o.docs_read++,C.docs.push(n)}))}))}function d(){if(!r.cancelled&&!C){if(0===S.length)return void f(!0);C=S.shift(),s().then(c).then(i).then(u).then(d).catch((function(n){p("batch processing terminated with error",n)}))}}function f(n){if(0===A.changes.length)return void(0!==S.length||C||((T&&P.live||k)&&(r.state="pending",r.emit("paused")),k&&h()));(n||k||A.changes.length>=q)&&(S.push(A),A={seq:0,changes:[],docs:[]},"pending"!==r.state&&"stopped"!==r.state||(r.state="active",r.emit("active")),d())}function p(n,e){N||(e.message||(e.message=n),o.ok=!1,o.status="aborting",S=[],A={seq:0,changes:[],docs:[]},h(e))}function h(l){N||r.cancelled&&(o.status="cancelled",O)||(o.status=o.status||"complete",o.end_time=new Date,o.last_seq=R,N=!0,l?(l=x(l),l.result=o,"unauthorized"===l.name||"forbidden"===l.name?(r.emit("error",l),r.removeAllListeners()):Kr(t,r,l,(function(){Zr(n,e,t,r)}))):(r.emit("complete",o),r.removeAllListeners()))}function v(n){if(r.cancelled)return h();I(t)(n)&&(A.seq=n.seq,A.changes.push(n),f(0===S.length&&P.live))}function g(n){if(j=!1,r.cancelled)return h();if(n.results.length>0)P.since=n.last_seq,_(),f(!0);else{var e=function(){T?(P.live=!0,_()):k=!0,f(!0)};C||0!==n.results.length?e():(O=!0,E.writeCheckpoint(n.last_seq,B).then((function(){O=!1,o.last_seq=R=n.last_seq,e()})).catch(b))}}function m(n){if(j=!1,r.cancelled)return h();p("changes rejected",n)}function _(){function e(){l.cancel()}function o(){r.removeListener("cancel",e)}if(!j&&!k&&S.length<D){j=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",e);var l=n.changes(P).on("change",v);l.then(o,o),l.then(g).catch(m),t.retry&&(r._changes=l,r._abortChanges=e)}}function y(){l().then((function(){return r.cancelled?void h():E.getCheckpoint().then((function(n){R=n,P={since:R,limit:q,batch_size:q,style:"all_docs",doc_ids:F,selector:L,return_docs:!0},t.filter&&("string"!=typeof t.filter?P.include_docs=!0:P.filter=t.filter),"heartbeat"in t&&(P.heartbeat=t.heartbeat),"timeout"in t&&(P.timeout=t.timeout),t.query_params&&(P.query_params=t.query_params),t.view&&(P.view=t.view),_()}))})).catch((function(n){p("getCheckpoint rejected with ",n)}))}function b(n){O=!1,p("writeCheckpoint completed with error",n)}var C,w,E,S=[],A={seq:0,changes:[],docs:[]},O=!1,k=!1,N=!1,R=0,T=t.continuous||t.live||!1,q=t.batch_size||100,D=t.batches_limit||10,j=!1,F=t.doc_ids,L=t.selector,M=[],B=J();o=o||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var P={};if(r.ready(n,e),r.cancelled)return void h();r._addedListeners||(r.once("cancel",h),"function"==typeof t.complete&&(r.once("error",t.complete),r.once("complete",(function(n){t.complete(null,n)}))),r._addedListeners=!0),void 0===t.since?y():l().then((function(){return O=!0,E.writeCheckpoint(t.since,B)})).then((function(){if(O=!1,r.cancelled)return void h();R=t.since,y()})).catch(b)}function no(){ao.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var n=this,e=new vo(function(e,t){n.once("complete",e),n.once("error",t)});n.then=function(n,t){return e.then(n,t)},n.catch=function(n){return e.catch(n)},n.catch((function(){}))}function eo(n,e){var t=e.PouchConstructor;return"string"==typeof n?new t(n,e):n}function to(n,e,t,r){if("function"==typeof t&&(r=t,t={}),void 0===t&&(t={}),t.doc_ids&&!Array.isArray(t.doc_ids))throw x(Do,"`doc_ids` filter parameter is not a list.");t.complete=r,t=a(t),t.continuous=t.continuous||t.live,t.retry="retry"in t&&t.retry,t.PouchConstructor=t.PouchConstructor||this;var o=new no(t);return Zr(eo(n,t),eo(e,t),t,o),o}function ro(n,e,t,r){return"function"==typeof t&&(r=t,t={}),void 0===t&&(t={}),t=a(t),t.PouchConstructor=t.PouchConstructor||this,n=eo(n,t),e=eo(e,t),new oo(n,e,t,r)}function oo(n,e,t,r){function o(n){h.emit("change",{direction:"pull",change:n})}function l(n){h.emit("change",{direction:"push",change:n})}function i(n){h.emit("denied",{direction:"push",doc:n})}function u(n){h.emit("denied",{direction:"pull",doc:n})}function a(){h.pushPaused=!0,h.pullPaused&&h.emit("paused")}function s(){h.pullPaused=!0,h.pushPaused&&h.emit("paused")}function c(){h.pushPaused=!1,h.pullPaused&&h.emit("active",{direction:"push"})}function d(){h.pullPaused=!1,h.pushPaused&&h.emit("active",{direction:"pull"})}function f(n){return function(e,t){var r="change"===e&&(t===o||t===l),f="denied"===e&&(t===u||t===i),p="paused"===e&&(t===s||t===a),v="active"===e&&(t===d||t===c);(r||f||p||v)&&(e in m||(m[e]={}),m[e][n]=!0,2===Object.keys(m[e]).length&&h.removeAllListeners(e))}}function p(n,e,t){-1==n.listeners(e).indexOf(t)&&n.on(e,t)}var h=this;this.canceled=!1;var v=t.push?Eo({},t,t.push):t,g=t.pull?Eo({},t,t.pull):t;this.push=to(n,e,v),this.pull=to(e,n,g),this.pushPaused=!0,this.pullPaused=!0;var m={};t.live&&(this.push.on("complete",h.pull.cancel.bind(h.pull)),this.pull.on("complete",h.push.cancel.bind(h.push))),this.on("newListener",(function(n){"change"===n?(p(h.pull,"change",o),p(h.push,"change",l)):"denied"===n?(p(h.pull,"denied",u),p(h.push,"denied",i)):"active"===n?(p(h.pull,"active",d),p(h.push,"active",c)):"paused"===n&&(p(h.pull,"paused",s),p(h.push,"paused",a))})),this.on("removeListener",(function(n){"change"===n?(h.pull.removeListener("change",o),h.push.removeListener("change",l)):"denied"===n?(h.pull.removeListener("denied",u),h.push.removeListener("denied",i)):"active"===n?(h.pull.removeListener("active",d),h.push.removeListener("active",c)):"paused"===n&&(h.pull.removeListener("paused",s),h.push.removeListener("paused",a))})),this.pull.on("removeListener",f("pull")),this.push.on("removeListener",f("push"));var _=vo.all([this.push,this.pull]).then((function(n){var e={push:n[0],pull:n[1]};return h.emit("complete",e),r&&r(null,e),h.removeAllListeners(),e}),(function(n){if(h.cancel(),r?r(n):h.emit("error",n),h.removeAllListeners(),r)throw n}));this.then=function(n,e){return _.then(n,e)},this.catch=function(n){return _.catch(n)}}function lo(n){n.replicate=to,n.sync=ro,Object.defineProperty(n.prototype,"replicate",{get:function(){var n=this;return{from:function(e,t,r){return n.constructor.replicate(e,n,t,r)},to:function(e,t,r){return n.constructor.replicate(n,e,t,r)}}}}),n.prototype.sync=function(n,e,t){return this.constructor.sync(this,n,e,t)}}var io=r(t(1559)),uo=r(t(1552)),ao=t(613),so=r(t(614)),co=r(t(1336)),fo=r(t(612)),po=r(t(1883)),ho=r(t(1904)),vo="function"==typeof Promise?Promise:io,go=Function.prototype.toString,mo=go.call(Object);v.prototype.get=function(n){var e=p(n);return this._store[e]},v.prototype.set=function(n,e){var t=p(n);return this._store[t]=e,!0},v.prototype.has=function(n){return p(n)in this._store},v.prototype.delete=function(n){var e=p(n),t=e in this._store;return delete this._store[e],t},v.prototype.forEach=function(n){for(var e=Object.keys(this._store),t=0,r=e.length;t<r;t++){var o=e[t],l=this._store[o];o=h(o),n(l,o)}},Object.defineProperty(v.prototype,"size",{get:function(){return Object.keys(this._store).length}}),g.prototype.add=function(n){return this._store.set(n,!0)},g.prototype.has=function(n){return this._store.has(n)},g.prototype.forEach=function(n){this._store.forEach((function(e,t){n(t)}))},Object.defineProperty(g.prototype,"size",{get:function(){return this._store.size}});var _o,yo;!(function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var n=Object.getOwnPropertyDescriptor(Map,Symbol.species);return n&&"get"in n&&Map[Symbol.species]===Map})()?(_o=g,yo=v):(_o=Set,yo=Map);var bo,Co=6;if(C())bo=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),bo=!!localStorage.getItem("_pouch_check_localstorage")}catch(n){bo=!1}so(S,ao.EventEmitter),S.prototype.addListener=function(n,e,t,r){function o(){function n(){i=!1}if(l._listeners[e]){if(i)return void(i="waiting");i=!0;var u=m(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);t.changes(u).on("change",(function(n){n.seq>r.since&&!r.cancelled&&(r.since=n.seq,r.onChange(n))})).on("complete",(function(){"waiting"===i&&co(o),i=!1})).on("error",n)}}if(!this._listeners[e]){var l=this,i=!1;this._listeners[e]=o,this.on(n,o)}},S.prototype.removeListener=function(n,e){e in this._listeners&&(ao.EventEmitter.prototype.removeListener.call(this,n,this._listeners[e]),delete this._listeners[e])},S.prototype.notifyLocalWindows=function(n){C()?chrome.storage.local.set({dbName:n}):w()&&(localStorage[n]="a"===localStorage[n]?"b":"a")},S.prototype.notify=function(n){this.emit(n),this.notifyLocalWindows(n)};var wo;wo="function"==typeof Object.assign?Object.assign:function(n){for(var e=Object(n),t=1;t<arguments.length;t++){var r=arguments[t];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};var Eo=wo;so(R,Error),R.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var So=(new R(401,"unauthorized","Name or password is incorrect."),new R(400,"bad_request","Missing JSON list of 'docs'")),Ao=new R(404,"not_found","missing"),Oo=new R(409,"conflict","Document update conflict"),ko=new R(400,"bad_request","_id field must contain a string"),No=new R(412,"missing_id","_id is required for puts"),Ro=new R(400,"bad_request","Only reserved document ids may start with underscore."),xo=(new R(412,"precondition_failed","Database not open"),new R(500,"unknown_error","Database encountered an unknown error")),To=new R(500,"badarg","Some query argument is invalid"),qo=(new R(400,"invalid_request","Request was invalid"),new R(400,"query_parse_error","Some query parameter is invalid")),Io=new R(500,"doc_validation","Bad special document member"),Do=new R(400,"bad_request","Something wrong with the request"),jo=new R(400,"bad_request","Document must be a JSON object"),Fo=(new R(404,"not_found","Database not found"),new R(500,"indexed_db_went_bad","unknown")),Lo=new R(500,"web_sql_went_bad","unknown"),Mo=(new R(500,"levelDB_went_went_bad","unknown"),new R(403,"forbidden","Forbidden by design doc validate_doc_update function"),new R(400,"bad_request","Invalid rev format")),Bo=(new R(412,"file_exists","The database could not be created, the file already exists."),new R(412,"missing_stub","A pre-existing attachment stub wasn't found")),Po=(new R(413,"invalid_url","Provided URL is invalid"),j.name);var Uo=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Vo="queryKey",$o=/(?:^|&)([^&=]*)=?([^&]*)/g,Go=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ho="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");so(gn,ao.EventEmitter),gn.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},gn.prototype.validateChanges=function(n){var e=n.complete,t=this;xn._changesFilterPlugin?xn._changesFilterPlugin.validate(n,(function(r){if(r)return e(r);t.doChanges(n)})):t.doChanges(n)},gn.prototype.doChanges=function(n){var e=this,t=n.complete;if(n=a(n),"live"in n&&!("continuous"in n)&&(n.continuous=n.live),n.processChange=mn,"latest"===n.since&&(n.since="now"),n.since||(n.since=0),"now"===n.since)return void this.db.info().then((function(r){if(e.isCancelled)return void t(null,{status:"cancelled"});n.since=r.update_seq,e.doChanges(n)}),t);if(xn._changesFilterPlugin){if(xn._changesFilterPlugin.normalize(n),xn._changesFilterPlugin.shouldFilter(this,n))return xn._changesFilterPlugin.filter(this,n)}else["doc_ids","filter","selector","view"].forEach((function(e){e in n&&A("warn",'The "'+e+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')}));"descending"in n||(n.descending=!1),n.limit=0===n.limit?1:n.limit,n.complete=t;var r=this.db._changes(n);if(r&&"function"==typeof r.cancel){var o=e.cancel;e.cancel=uo((function(n){r.cancel(),o.apply(this,n)}))}},so(On,ao.EventEmitter),On.prototype.post=f("post",(function(n,e,t){if("function"==typeof e&&(t=e,e={}),"object"!=typeof n||Array.isArray(n))return t(x(jo));this.bulkDocs({docs:[n]},e,yn(t))})),On.prototype.put=f("put",(function(n,e,t){return"function"==typeof e&&(t=e,e={}),"object"!=typeof n||Array.isArray(n)?t(x(jo)):(F(n._id),pn(n._id)&&"function"==typeof this._putLocal?n._deleted?this._removeLocal(n,t):this._putLocal(n,t):void("function"==typeof this._put&&!1!==e.new_edits?this._put(n,e,t):this.bulkDocs({docs:[n]},e,yn(t))))})),On.prototype.putAttachment=f("putAttachment",(function(n,e,t,r,o){function l(n){var t="_rev"in n?parseInt(n._rev,10):0;return n._attachments=n._attachments||{},n._attachments[e]={content_type:o,data:r,revpos:++t},i.put(n)}var i=this;return"function"==typeof o&&(o=r,r=t,t=null),void 0===o&&(o=r,r=t,t=null),o||A("warn","Attachment",e,"on document",n,"is missing content_type"),i.get(n).then((function(n){if(n._rev!==t)throw x(Oo);return l(n)}),(function(e){if(e.reason===Ao.message)return l({_id:n});throw e}))})),On.prototype.removeAttachment=f("removeAttachment",(function(n,e,t,r){var o=this;o.get(n,(function(n,l){return n?void r(n):l._rev!==t?void r(x(Oo)):l._attachments?(delete l._attachments[e],0===Object.keys(l._attachments).length&&delete l._attachments,void o.put(l,r)):r()}))})),On.prototype.remove=f("remove",(function(n,e,t,r){var o;"string"==typeof e?(o={_id:n,_rev:e},"function"==typeof t&&(r=t,t={})):(o=n,"function"==typeof e?(r=e,t={}):(r=t,t=e)),t=t||{},t.was_delete=!0;var l={_id:o._id,_rev:o._rev||t.rev};if(l._deleted=!0,pn(l._id)&&"function"==typeof this._removeLocal)return this._removeLocal(o,r);this.bulkDocs({docs:[l]},t,yn(r))})),On.prototype.revsDiff=f("revsDiff",(function(n,e,t){function r(n,e){u.has(n)||u.set(n,{missing:[]}),u.get(n).missing.push(e)}function o(e,t){var o=n[e].slice(0);X(t,(function(n,t,l,i,u){var a=t+"-"+l,s=o.indexOf(a);-1!==s&&(o.splice(s,1),"available"!==u.status&&r(e,a))})),o.forEach((function(n){r(e,n)}))}"function"==typeof e&&(t=e,e={});var l=Object.keys(n);if(!l.length)return t(null,{});var i=0,u=new yo;l.map((function(e){this._getRevisionTree(e,(function(r,a){if(r&&404===r.status&&"missing"===r.message)u.set(e,{missing:n[e]});else{if(r)return t(r);o(e,a)}if(++i===l.length){var s={};return u.forEach((function(n,e){s[e]=n})),t(null,s)}}))}),this)})),On.prototype.bulkGet=f("bulkGet",(function(n,e){b(this,n,e)})),On.prototype.compactDocument=f("compactDocument",(function(n,e,t){var r=this;this._getRevisionTree(n,(function(o,l){if(o)return t(o);var i=wn(l),u=[],a=[];Object.keys(i).forEach((function(n){i[n]>e&&u.push(n)})),X(l,(function(n,e,t,r,o){var l=e+"-"+t;"available"===o.status&&-1!==u.indexOf(l)&&a.push(l)})),r._doCompaction(n,a,t)}))})),On.prototype.compact=f("compact",(function(n,e){"function"==typeof n&&(e=n,n={});var t=this;n=n||{},t._compactionQueue=t._compactionQueue||[],t._compactionQueue.push({opts:n,callback:e}),1===t._compactionQueue.length&&Sn(t)})),On.prototype._compact=function(n,e){function t(n){i.push(o.compactDocument(n.id,0))}function r(n){var t=n.last_seq;vo.all(i).then((function(){return $(o,"_local/compaction",(function(n){return(!n.last_seq||n.last_seq<t)&&(n.last_seq=t,n)}))})).then((function(){e(null,{ok:!0})})).catch(e)}var o=this,l={return_docs:!1,last_seq:n.last_seq||0},i=[];o.changes(l).on("change",t).on("complete",r).on("error",e)},On.prototype.get=f("get",(function(n,e,t){function r(){var r=[],i=o.length;if(!i)return t(null,r);o.forEach((function(o){l.get(n,{rev:o,revs:e.revs,latest:e.latest,attachments:e.attachments},(function(n,e){if(n)r.push({missing:o});else{for(var l,u=0,a=r.length;u<a;u++)if(r[u].ok&&r[u].ok._rev===e._rev){l=!0;break}l||r.push({ok:e})}--i||t(null,r)}))}))}if("function"==typeof e&&(t=e,e={}),"string"!=typeof n)return t(x(ko));if(pn(n)&&"function"==typeof this._getLocal)return this._getLocal(n,t);var o=[],l=this;if(!e.open_revs)return this._get(n,e,(function(n,r){if(n)return t(n);var o=r.doc,i=r.metadata,u=r.ctx;if(e.conflicts){var a=Q(i);a.length&&(o._conflicts=a)}if(fn(i,o._rev)&&(o._deleted=!0),e.revs||e.revs_info){for(var s=o._rev.split("-"),c=parseInt(s[0],10),d=s[1],f=Z(i.rev_tree),p=null,h=0;h<f.length;h++){var v=f[h],g=v.ids.map((function(n){return n.id})).indexOf(d);(g===c-1||!p&&-1!==g)&&(p=v)}var m=p.ids.map((function(n){return n.id})).indexOf(o._rev.split("-")[1])+1,_=p.ids.length-m;if(p.ids.splice(m,_),p.ids.reverse(),e.revs&&(o._revisions={start:p.pos+p.ids.length-1,ids:p.ids.map((function(n){return n.id}))}),e.revs_info){var y=p.pos+p.ids.length;o._revs_info=p.ids.map((function(n){return y--,{rev:y+"-"+n.id,status:n.opts.status}}))}}if(e.attachments&&o._attachments){var b=o._attachments,C=Object.keys(b).length;if(0===C)return t(null,o);Object.keys(b).forEach((function(n){this._getAttachment(o._id,n,b[n],{rev:o._rev,binary:e.binary,ctx:u},(function(e,r){var l=o._attachments[n];l.data=r,delete l.stub,delete l.length,--C||t(null,o)}))}),l)}else{if(o._attachments)for(var w in o._attachments)o._attachments.hasOwnProperty(w)&&(o._attachments[w].stub=!0);t(null,o)}}));if("all"===e.open_revs)this._getRevisionTree(n,(function(n,e){if(n)return t(n);o=K(e).map((function(n){return n.rev})),r()}));else{if(!Array.isArray(e.open_revs))return t(x(xo,"function_clause"));o=e.open_revs;for(var i=0;i<o.length;i++){var u=o[i];if("string"!=typeof u||!/^\d+-/.test(u))return t(x(Mo))}r()}})),On.prototype.getAttachment=f("getAttachment",(function(n,e,t,r){var o=this;t instanceof Function&&(r=t,t={}),this._get(n,t,(function(l,i){return l?r(l):i.doc._attachments&&i.doc._attachments[e]?(t.ctx=i.ctx,t.binary=!0,o._getAttachment(n,e,i.doc._attachments[e],t,r),void 0):r(x(Ao))}))})),On.prototype.allDocs=f("allDocs",(function(n,e){if("function"==typeof n&&(e=n,n={}),n.skip=void 0!==n.skip?n.skip:0,n.start_key&&(n.startkey=n.start_key),n.end_key&&(n.endkey=n.end_key),"keys"in n){if(!Array.isArray(n.keys))return e(new TypeError("options.keys must be an array"));var t=["startkey","endkey","key"].filter((function(e){return e in n}))[0];if(t)return void e(x(qo,"Query parameter `"+t+"` is not compatible with multi-get"));if(!L(this))return En(this,n,e)}return this._allDocs(n,e)})),On.prototype.changes=function(n,e){return"function"==typeof n&&(e=n,n={}),new gn(this,n,e)},On.prototype.close=f("close",(function(n){return this._closed=!0,this.emit("closed"),this._close(n)})),On.prototype.info=f("info",(function(n){var e=this;this._info((function(t,r){if(t)return n(t);r.db_name=r.db_name||e.name,r.auto_compaction=!(!e.auto_compaction||L(e)),r.adapter=e.adapter,n(null,r)}))})),On.prototype.id=f("id",(function(n){return this._id(n)})),On.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},On.prototype.bulkDocs=f("bulkDocs",(function(n,e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},Array.isArray(n)&&(n={docs:n}),!n||!n.docs||!Array.isArray(n.docs))return t(x(So));for(var r=0;r<n.docs.length;++r)if("object"!=typeof n.docs[r]||Array.isArray(n.docs[r]))return t(x(jo));var o;if(n.docs.forEach((function(n){n._attachments&&Object.keys(n._attachments).forEach((function(e){o=o||An(e),n._attachments[e].content_type||A("warn","Attachment",e,"on document",n._id,"is missing content_type")}))})),o)return t(x(Do,o));"new_edits"in e||(e.new_edits=!("new_edits"in n)||n.new_edits);var l=this;e.new_edits||L(l)||n.docs.sort(Cn),bn(n.docs);var i=n.docs.map((function(n){return n._id}));return this._bulkDocs(n,e,(function(n,r){if(n)return t(n);if(e.new_edits||(r=r.filter((function(n){return n.error}))),!L(l))for(var o=0,u=r.length;o<u;o++)r[o].id=r[o].id||i[o];t(null,r)}))})),On.prototype.registerDependentDatabase=f("registerDependentDatabase",(function(n,e){function t(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[n]&&(e.dependentDbs[n]=!0,e)}var r=new this.constructor(n,this.__opts);$(this,"_local/_pouch_dependentDbs",t).then((function(){e(null,{db:r})})).catch(e)})),On.prototype.destroy=f("destroy",(function(n,e){function t(){r._destroy(n,(function(n,t){if(n)return e(n);r._destroyed=!0,r.emit("destroyed"),e(null,t||{ok:!0})}))}"function"==typeof n&&(e=n,n={});var r=this,o=!("use_prefix"in r)||r.use_prefix;if(L(r))return t();r.get("_local/_pouch_dependentDbs",(function(n,l){if(n)return 404!==n.status?e(n):t();var i=l.dependentDbs,u=r.constructor,a=Object.keys(i).map((function(n){var e=o?n.replace(new RegExp("^"+u.prefix),""):n;return new u(e,r.__opts).destroy()}));vo.all(a).then(t,e)}))})),kn.prototype.execute=function(){var n;if(this.failed)for(;n=this.queue.shift();)n(this.failed);else for(;n=this.queue.shift();)n()},kn.prototype.fail=function(n){this.failed=n,this.execute()},kn.prototype.ready=function(n){this.isReady=!0,this.db=n,this.execute()},kn.prototype.addTask=function(n){this.queue.push(n),this.failed&&this.execute()},so(xn,On),xn.adapters={},xn.preferredAdapters=[],xn.prefix="_pouch_";var Jo=new ao.EventEmitter;(function(n){Object.keys(ao.EventEmitter.prototype).forEach((function(e){"function"==typeof ao.EventEmitter.prototype[e]&&(n[e]=Jo[e].bind(Jo))}));var e=n._destructionListeners=new yo;n.on("destroyed",(function(n){e.get(n).forEach((function(n){n()})),e.delete(n)}))})(xn),xn.adapter=function(n,e,t){e.valid()&&(xn.adapters[n]=e,t&&xn.preferredAdapters.push(n))},xn.plugin=function(n){if("function"==typeof n)n(xn);else{if("object"!=typeof n||0===Object.keys(n).length)throw new Error('Invalid plugin: got "'+n+'", expected an object or a function');Object.keys(n).forEach((function(e){xn.prototype[e]=n[e]}))}return this.__defaults&&(xn.__defaults=Eo({},this.__defaults)),xn},xn.defaults=function(n){function e(n,t){if(!(this instanceof e))return new e(n,t);t=t||{},n&&"object"==typeof n&&(t=n,n=t.name,delete t.name),t=Eo({},e.__defaults,t),xn.call(this,n,t)}return so(e,xn),e.preferredAdapters=xn.preferredAdapters.slice(),Object.keys(xn).forEach((function(n){n in e||(e[n]=xn[n])})),e.__defaults=Eo({},this.__defaults,n),e};var zo=["$or","$nor","$not"],Xo=-324,Wo=3,Ko="",Qo={$elemMatch:function(n,e,t,r){return!!Array.isArray(r)&&(0!==r.length&&("object"==typeof r[0]?r.some((function(n){return ie(n,e,Object.keys(e))})):r.some((function(r){return ae(e,n,t,r)}))))},$eq:function(n,e,t,r){return fe(r)&&0===Jn(r,e)},$gte:function(n,e,t,r){return fe(r)&&Jn(r,e)>=0},$gt:function(n,e,t,r){return fe(r)&&Jn(r,e)>0},$lte:function(n,e,t,r){return fe(r)&&Jn(r,e)<=0},$lt:function(n,e,t,r){return fe(r)&&Jn(r,e)<0},$exists:function(n,e,t,r){return e?fe(r):!fe(r)},$mod:function(n,e,t,r){return de(r)&&pe(r,e)},$ne:function(n,e,t,r){return e.every((function(n){return 0!==Jn(r,n)}))},$in:function(n,e,t,r){return de(r)&&he(r,e)},$nin:function(n,e,t,r){return de(r)&&!he(r,e)},$size:function(n,e,t,r){return de(r)&&ge(r,e)},$all:function(n,e,t,r){return Array.isArray(r)&&ve(r,e)},$regex:function(n,e,t,r){return de(r)&&me(r,e)},$type:function(n,e,t,r){return _e(r,e)}};xn.plugin(Tn),xn.plugin(Oe),xn.version="6.2.0";var Yo,Zo=ke(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),nl=ke(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]),el=function(n){return atob(n)},tl=function(n){return btoa(n)},rl=e.setImmediate||e.setTimeout,ol=32768,ll=5,il="document-store",ul="by-sequence",al="attach-store",sl="attach-seq-store",cl="meta-store",dl="local-store",fl="detect-blob-support",pl=new S,hl=!1,vl=[],gl=new yo,ml=new yo;wt.valid=function(){return!("undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform))&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange};var _l=function(n){n.adapter("idb",wt,!0)},yl=7,bl=xt("document-store"),Cl=xt("by-sequence"),wl=xt("attach-store"),El=xt("local-store"),Sl=xt("metadata-store"),Al=xt("attach-seq-store"),Ol=new yo,kl=new S,Nl=1,Rl="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+Cl+" (seq, deleted)",xl="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+Cl+" (doc_id, rev)",Tl="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+bl+" (winningseq)",ql="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+Al+" (seq)",Il="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+Al+" (digest, seq)",Dl=Cl+".seq = "+bl+".winningseq",jl=Cl+".seq AS seq, "+Cl+".deleted AS deleted, "+Cl+".json AS data, "+Cl+".rev AS rev, "+bl+".json AS metadata";Kt.valid=Xt,Kt.use_prefix=!0;var Fl=function(n){n.adapter("websql",Kt,!0)},Ll=(function(){try{return new XMLHttpRequest,!0}catch(n){return!1}})(),Ml=function(){},Bl=25,Pl=50,Ul={};pr.valid=function(){return!0};var Vl=function(n){n.adapter("http",pr,!1),n.adapter("https",pr,!1)};so(hr,Error),so(vr,Error),so(gr,Error);var $l=A.bind(null,"log"),Gl=Array.isArray,Hl=JSON.parse;Or.prototype.add=function(n){return this.promise=this.promise.catch((function(){})).then((function(){return n()})),this.promise},Or.prototype.finish=function(){return this.promise};var Jl={},zl=new Or,Xl=50,Wl={_sum:function(n,e){return Sr(e)},_count:function(n,e){return e.length},_stats:function(n,e){return{sum:Sr(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:(function(n){for(var e=0,t=0,r=n.length;t<r;t++){var o=n[t];e+=o*o}return e})(e)}}},Kl=(function(n,e,t,r){function o(n,e,t){try{e(t)}catch(e){qr(n,e)}}function l(n,e,t,r,o){try{return{output:e(t,r,o)}}catch(e){return qr(n,e),{error:e}}}function i(n,e){var t=Jn(n.key,e.key);return 0!==t?t:Jn(n.value,e.value)}function u(n,e,t){return t=t||0,"number"==typeof e?n.slice(t,e+t):t>0?n.slice(t):n}function a(n){var e=n.value;return e&&"object"==typeof e&&e._id||n.id}function s(n){n.rows.forEach((function(n){var e=n.doc&&n.doc._attachments;e&&Object.keys(e).forEach((function(n){var t=e[n];e[n].data=De(t.data,t.content_type)}))}))}function c(n){return function(e){return n.include_docs&&n.attachments&&n.binary&&s(e),e}}function d(n,e,t,r){var o=e[n];void 0!==o&&(r&&(o=encodeURIComponent(JSON.stringify(o))),t.push(n+"="+o))}function f(n){if(void 0!==n){var e=Number(n);return isNaN(e)||e!==parseInt(n,10)?n:e}}function p(n){return n.group_level=f(n.group_level),n.limit=f(n.limit),n.skip=f(n.skip),n}function h(n){if(n){if("number"!=typeof n)return new hr('Invalid value for integer: "'+n+'"');if(n<0)return new hr('Invalid value for positive integer: "'+n+'"')}}function v(n,e){var t=n.descending?"endkey":"startkey",r=n.descending?"startkey":"endkey";if(void 0!==n[t]&&void 0!==n[r]&&Jn(n[t],n[r])>0)throw new hr("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==n.reduce){if(n.include_docs)throw new hr("{include_docs:true} is invalid for reduce");if(n.keys&&n.keys.length>1&&!n.group&&!n.group_level)throw new hr("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach((function(e){var t=h(n[e]);if(t)throw t}))}function g(n,e,t){var r,o=[],l="GET";if(d("reduce",t,o),d("include_docs",t,o),d("attachments",t,o),d("limit",t,o),d("descending",t,o),d("group",t,o),d("group_level",t,o),d("skip",t,o),d("stale",t,o),d("conflicts",t,o),d("startkey",t,o,!0),d("start_key",t,o,!0),d("endkey",t,o,!0),d("end_key",t,o,!0),d("inclusive_end",t,o),d("key",t,o,!0),o=o.join("&"),o=""===o?"":"?"+o,void 0!==t.keys){var i="keys="+encodeURIComponent(JSON.stringify(t.keys));i.length+o.length+1<=2e3?o+=("?"===o[0]?"&":"?")+i:(l="POST","string"==typeof e?r={keys:t.keys}:e.keys=t.keys)}if("string"==typeof e){var u=xr(e);return n.request({method:l,url:"_design/"+u[0]+"/_view/"+u[1]+o,body:r}).then(c(t))}return r=r||{},Object.keys(e).forEach((function(n){Array.isArray(e[n])?r[n]=e[n]:r[n]=e[n].toString()})),n.request({method:"POST",url:"_temp_view"+o,body:r}).then(c(t))}function m(n,e,t){return new vo(function(r,o){n._query(e,t,(function(n,e){if(n)return o(n);r(e)}))})}function _(n){return new vo(function(e,t){n._viewCleanup((function(n,r){if(n)return t(n);e(r)}))})}function y(n){return function(e){if(404===e.status)return n;throw e}}function b(n,e,t){function r(n){return n.keys.length?e.db.allDocs({keys:n.keys,include_docs:!0}):vo.resolve({rows:[]})}function o(n,e){for(var t=[],r=new _o,o=0,l=e.rows.length;o<l;o++){var i=e.rows[o],u=i.doc;if(u&&(t.push(u),r.add(u._id),u._deleted=!a.has(u._id),!u._deleted)){var s=a.get(u._id);"value"in s&&(u.value=s.value)}}var c=wr(a);return c.forEach((function(n){if(!r.has(n)){var e={_id:n},o=a.get(n);"value"in o&&(e.value=o.value),t.push(e)}})),n.keys=Cr(c.concat(n.keys)),t.push(n),t}var l="_local/doc_"+n,i={_id:l,keys:[]},u=t.get(n),a=u[0],s=u[1];return (function(){return Tr(s)?vo.resolve(i):e.db.get(l).catch(y(i))})().then((function(n){return r(n).then((function(e){return o(n,e)}))}))}function C(n,e,t){return n.db.get("_local/lastSeq").catch(y({_id:"_local/lastSeq",seq:0})).then((function(r){var o=wr(e);return vo.all(o.map((function(t){return b(t,n,e)}))).then((function(e){var o=D(e);return r.seq=t,o.push(r),n.db.bulkDocs({docs:o})}))}))}function w(n){var e="string"==typeof n?n:n.name,t=Jl[e];return t||(t=Jl[e]=new Or),t}function E(n){return br(w(n),(function(){return S(n)}))()}function S(n){function t(n,e){var t={id:d._id,key:zn(n)};void 0!==e&&null!==e&&(t.value=zn(e)),c.push(t)}function r(e,t){return function(){return C(n,e,t)}}function l(){return n.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:p,limit:Xl}).then(u)}function u(n){var e=n.results;if(e.length){var t=a(e);if(h.add(r(t,p)),!(e.length<Xl))return l()}}function a(e){for(var t=new yo,r=0,l=e.length;r<l;r++){var u=e[r];if("_"!==u.doc._id[0]){c=[],d=u.doc,d._deleted||o(n.sourceDB,f,d),c.sort(i);var a=s(c);t.set(u.doc._id,[a,u.changes])}p=u.seq}return t}function s(n){for(var e,t=new yo,r=0,o=n.length;r<o;r++){var l=n[r],i=[l.key,l.id];r>0&&0===Jn(l.key,e)&&i.push(r),t.set(Wn(i),l),e=l.key}return t}var c,d,f=e(n.mapFun,t),p=n.seq||0,h=new Or;return l().then((function(){return h.finish()})).then((function(){n.seq=p}))}function A(n,e,r){0===r.group_level&&delete r.group_level;var o=r.group||r.group_level,i=t(n.reduceFun),a=[],s=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;e.forEach((function(n){var e=a[a.length-1],t=o?n.key:null;if(o&&Array.isArray(t)&&(t=t.slice(0,s)),e&&0===Jn(e.groupKey,t))return e.keys.push([n.key,n.id]),void e.values.push(n.value);a.push({keys:[[n.key,n.id]],values:[n.value],groupKey:t})})),e=[];for(var c=0,d=a.length;c<d;c++){var f=a[c],p=l(n.sourceDB,i,f.keys,f.values,!1);if(p.error&&p.error instanceof gr)throw p.error;e.push({value:p.error?null:p.output,key:f.groupKey})}return{rows:u(e,r.limit,r.skip)}}function O(n,e){return br(w(n),(function(){return k(n,e)}))()}function k(n,e){function t(e){return e.include_docs=!0,n.db.allDocs(e).then((function(n){return o=n.total_rows,n.rows.map((function(n){if("value"in n.doc&&"object"==typeof n.doc.value&&null!==n.doc.value){var e=Object.keys(n.doc.value).sort(),t=["id","key","value"];if(!(e<t||e>t))return n.doc.value}var r=Yn(n.doc._id);return{key:r[0],id:r[1],value:"value"in n.doc?n.doc.value:null}}))}))}function r(t){var r;if(r=l?A(n,t,e):{total_rows:o,offset:i,rows:t},e.include_docs){var u=Cr(t.map(a));return n.sourceDB.allDocs({keys:u,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then((function(n){var e=new yo;return n.rows.forEach((function(n){e.set(n.id,n.doc)})),t.forEach((function(n){var t=a(n),r=e.get(t);r&&(n.doc=r)})),r}))}return r}var o,l=n.reduceFun&&!1!==e.reduce,i=e.skip||0;if(void 0===e.keys||e.keys.length||(e.limit=0,delete e.keys),void 0!==e.keys){var u=e.keys,s=u.map((function(n){return t({startkey:Wn([n]),endkey:Wn([n,{}])})}));return vo.all(s).then(D).then(r)}var c,d,f={descending:e.descending};if("start_key"in e&&(c=e.start_key),"startkey"in e&&(c=e.startkey),"end_key"in e&&(d=e.end_key),"endkey"in e&&(d=e.endkey),void 0!==c&&(f.startkey=Wn(e.descending?[c,{}]:[c])),void 0!==d){var p=!1!==e.inclusive_end;e.descending&&(p=!p),f.endkey=Wn(p?[d,{}]:[d])}if(void 0!==e.key){var h=Wn([e.key]),v=Wn([e.key,{}]);f.descending?(f.endkey=h,f.startkey=v):(f.startkey=h,f.endkey=v)}return l||("number"==typeof e.limit&&(f.limit=e.limit),f.skip=i),t(f).then(r)}function N(n){return n.request({method:"POST",url:"_view_cleanup"})}function R(e){return e.get("_local/"+n).then((function(n){var t=new yo;Object.keys(n.views).forEach((function(n){var e=xr(n),r="_design/"+e[0],o=e[1],l=t.get(r);l||(l=new _o,t.set(r,l)),l.add(o)}));var r={keys:wr(t),include_docs:!0};return e.allDocs(r).then((function(r){var o={};r.rows.forEach((function(e){var r=e.key.substring(8);t.get(e.key).forEach((function(t){var l=r+"/"+t;n.views[l]||(l=t);var i=Object.keys(n.views[l]),u=e.doc&&e.doc.views&&e.doc.views[t];i.forEach((function(n){o[n]=o[n]||u}))}))}));var l=Object.keys(o).filter((function(n){return!o[n]})),i=l.map((function(n){return br(w(n),(function(){return new e.constructor(n,e.__opts).destroy()}))()}));return vo.all(i).then((function(){return{ok:!0}}))}))}),y({ok:!0}))}function x(e,t,o){if("function"==typeof e._query)return m(e,t,o);if(L(e))return g(e,t,o);if("string"!=typeof t)return v(o,t),zl.add((function(){return Rr(e,"temp_view/temp_view",t.map,t.reduce,!0,n).then((function(n){return yr(E(n).then((function(){return O(n,o)})),(function(){return n.db.destroy()}))}))})),zl.finish();var l=t,i=xr(l),u=i[0],a=i[1];return e.get("_design/"+u).then((function(t){var i=t.views&&t.views[a];if(!i)throw new vr("ddoc "+t._id+" has no view named "+a);return r(t,a),v(o,i),Rr(e,l,i.map,i.reduce,!1,n).then((function(n){return"ok"===o.stale||"update_after"===o.stale?("update_after"===o.stale&&co((function(){E(n)})),O(n,o)):E(n).then((function(){return O(n,o)}))}))}))}function T(n,e,t){var r=this;"function"==typeof e&&(t=e,e={}),e=e?p(e):{},"function"==typeof n&&(n={map:n});var o=vo.resolve().then((function(){return x(r,n,e)}));return mr(o,t),o}return{query:T,viewCleanup:_r((function(){var n=this;return"function"==typeof n._viewCleanup?_(n):L(n)?N(n):R(n)}))}})("mrviews",Ir,Dr,jr),Ql={query:Fr,viewCleanup:Lr},Yl=1,Zl="pouchdb",ni=5,ei=0;Hr.prototype.writeCheckpoint=function(n,e){var t=this;return this.updateTarget(n,e).then((function(){return t.updateSource(n,e)}))},Hr.prototype.updateTarget=function(n,e){return Gr(this.target,this.id,n,e,this.returnValue)},Hr.prototype.updateSource=function(n,e){var t=this;return this.readOnlySource?vo.resolve(!0):Gr(this.src,this.id,n,e,this.returnValue).catch((function(n){if(Wr(n))return t.readOnlySource=!0,!0;throw n}))};var ti={undefined:function(n,e){return 0===Jn(n.last_seq,e.last_seq)?e.last_seq:0},1:function(n,e){return Jr(e,n).last_seq}};Hr.prototype.getCheckpoint=function(){var n=this;return n.target.get(n.id).then((function(e){return n.readOnlySource?vo.resolve(e.last_seq):n.src.get(n.id).then((function(n){if(e.version!==n.version)return ei;var t;return t=e.version?e.version.toString():"undefined",t in ti?ti[t](e,n):ei}),(function(t){if(404===t.status&&e.last_seq)return n.src.put({_id:n.id,last_seq:ei}).then((function(){return ei}),(function(t){return Wr(t)?(n.readOnlySource=!0,e.last_seq):ei}));throw t}))})).catch((function(n){if(404!==n.status)throw n;return ei}))};var ri=0;so(no,ao.EventEmitter),no.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},no.prototype.ready=function(n,e){function t(){o.cancel()}function r(){n.removeListener("destroyed",t),e.removeListener("destroyed",t)}var o=this;o._readyCalled||(o._readyCalled=!0,n.once("destroyed",t),e.once("destroyed",t),o.once("complete",r))},so(oo,ao.EventEmitter),oo.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},xn.plugin(_l).plugin(Fl).plugin(Vl).plugin(Ql).plugin(lo),n.exports=xn}).call(e,t(21))},1597:function(n,e){n.exports=""},1598:function(n,e){n.exports=""},1599:function(n,e){n.exports=""},1883:function(n,e,t){(function(e){n.exports=e()})((function(n){"use strict";function e(n,e){var t=n[0],r=n[1],o=n[2],l=n[3];t+=(r&o|~r&l)+e[0]-680876936|0,t=(t<<7|t>>>25)+r|0,l+=(t&r|~t&o)+e[1]-389564586|0,l=(l<<12|l>>>20)+t|0,o+=(l&t|~l&r)+e[2]+606105819|0,o=(o<<17|o>>>15)+l|0,r+=(o&l|~o&t)+e[3]-1044525330|0,r=(r<<22|r>>>10)+o|0,t+=(r&o|~r&l)+e[4]-176418897|0,t=(t<<7|t>>>25)+r|0,l+=(t&r|~t&o)+e[5]+1200080426|0,l=(l<<12|l>>>20)+t|0,o+=(l&t|~l&r)+e[6]-1473231341|0,o=(o<<17|o>>>15)+l|0,r+=(o&l|~o&t)+e[7]-45705983|0,r=(r<<22|r>>>10)+o|0,t+=(r&o|~r&l)+e[8]+1770035416|0,t=(t<<7|t>>>25)+r|0,l+=(t&r|~t&o)+e[9]-1958414417|0,l=(l<<12|l>>>20)+t|0,o+=(l&t|~l&r)+e[10]-42063|0,o=(o<<17|o>>>15)+l|0,r+=(o&l|~o&t)+e[11]-1990404162|0,r=(r<<22|r>>>10)+o|0,t+=(r&o|~r&l)+e[12]+1804603682|0,t=(t<<7|t>>>25)+r|0,l+=(t&r|~t&o)+e[13]-40341101|0,l=(l<<12|l>>>20)+t|0,o+=(l&t|~l&r)+e[14]-1502002290|0,o=(o<<17|o>>>15)+l|0,r+=(o&l|~o&t)+e[15]+1236535329|0,r=(r<<22|r>>>10)+o|0,t+=(r&l|o&~l)+e[1]-165796510|0,t=(t<<5|t>>>27)+r|0,l+=(t&o|r&~o)+e[6]-1069501632|0,l=(l<<9|l>>>23)+t|0,o+=(l&r|t&~r)+e[11]+643717713|0,o=(o<<14|o>>>18)+l|0,r+=(o&t|l&~t)+e[0]-373897302|0,r=(r<<20|r>>>12)+o|0,t+=(r&l|o&~l)+e[5]-701558691|0,t=(t<<5|t>>>27)+r|0,l+=(t&o|r&~o)+e[10]+38016083|0,l=(l<<9|l>>>23)+t|0,o+=(l&r|t&~r)+e[15]-660478335|0,o=(o<<14|o>>>18)+l|0,r+=(o&t|l&~t)+e[4]-405537848|0,r=(r<<20|r>>>12)+o|0,t+=(r&l|o&~l)+e[9]+568446438|0,t=(t<<5|t>>>27)+r|0,l+=(t&o|r&~o)+e[14]-1019803690|0,l=(l<<9|l>>>23)+t|0,o+=(l&r|t&~r)+e[3]-187363961|0,o=(o<<14|o>>>18)+l|0,r+=(o&t|l&~t)+e[8]+1163531501|0,r=(r<<20|r>>>12)+o|0,t+=(r&l|o&~l)+e[13]-1444681467|0,t=(t<<5|t>>>27)+r|0,l+=(t&o|r&~o)+e[2]-51403784|0,l=(l<<9|l>>>23)+t|0,o+=(l&r|t&~r)+e[7]+1735328473|0,o=(o<<14|o>>>18)+l|0,r+=(o&t|l&~t)+e[12]-1926607734|0,r=(r<<20|r>>>12)+o|0,t+=(r^o^l)+e[5]-378558|0,t=(t<<4|t>>>28)+r|0,l+=(t^r^o)+e[8]-2022574463|0,l=(l<<11|l>>>21)+t|0,o+=(l^t^r)+e[11]+1839030562|0,o=(o<<16|o>>>16)+l|0,r+=(o^l^t)+e[14]-35309556|0,r=(r<<23|r>>>9)+o|0,t+=(r^o^l)+e[1]-1530992060|0,t=(t<<4|t>>>28)+r|0,l+=(t^r^o)+e[4]+1272893353|0,l=(l<<11|l>>>21)+t|0,o+=(l^t^r)+e[7]-155497632|0,o=(o<<16|o>>>16)+l|0,r+=(o^l^t)+e[10]-1094730640|0,r=(r<<23|r>>>9)+o|0,t+=(r^o^l)+e[13]+681279174|0,t=(t<<4|t>>>28)+r|0,l+=(t^r^o)+e[0]-358537222|0,l=(l<<11|l>>>21)+t|0,o+=(l^t^r)+e[3]-722521979|0,o=(o<<16|o>>>16)+l|0,r+=(o^l^t)+e[6]+76029189|0,r=(r<<23|r>>>9)+o|0,t+=(r^o^l)+e[9]-640364487|0,t=(t<<4|t>>>28)+r|0,l+=(t^r^o)+e[12]-421815835|0,l=(l<<11|l>>>21)+t|0,o+=(l^t^r)+e[15]+530742520|0,o=(o<<16|o>>>16)+l|0,r+=(o^l^t)+e[2]-995338651|0,r=(r<<23|r>>>9)+o|0,t+=(o^(r|~l))+e[0]-198630844|0,t=(t<<6|t>>>26)+r|0,l+=(r^(t|~o))+e[7]+1126891415|0,l=(l<<10|l>>>22)+t|0,o+=(t^(l|~r))+e[14]-1416354905|0,o=(o<<15|o>>>17)+l|0,r+=(l^(o|~t))+e[5]-57434055|0,r=(r<<21|r>>>11)+o|0,t+=(o^(r|~l))+e[12]+1700485571|0,t=(t<<6|t>>>26)+r|0,l+=(r^(t|~o))+e[3]-1894986606|0,l=(l<<10|l>>>22)+t|0,o+=(t^(l|~r))+e[10]-1051523|0,o=(o<<15|o>>>17)+l|0,r+=(l^(o|~t))+e[1]-2054922799|0,r=(r<<21|r>>>11)+o|0,t+=(o^(r|~l))+e[8]+1873313359|0,t=(t<<6|t>>>26)+r|0,l+=(r^(t|~o))+e[15]-30611744|0,l=(l<<10|l>>>22)+t|0,o+=(t^(l|~r))+e[6]-1560198380|0,o=(o<<15|o>>>17)+l|0,r+=(l^(o|~t))+e[13]+1309151649|0,r=(r<<21|r>>>11)+o|0,t+=(o^(r|~l))+e[4]-145523070|0,t=(t<<6|t>>>26)+r|0,l+=(r^(t|~o))+e[11]-1120210379|0,l=(l<<10|l>>>22)+t|0,o+=(t^(l|~r))+e[2]+718787259|0,o=(o<<15|o>>>17)+l|0,r+=(l^(o|~t))+e[9]-343485551|0,r=(r<<21|r>>>11)+o|0,n[0]=t+n[0]|0,n[1]=r+n[1]|0,n[2]=o+n[2]|0,n[3]=l+n[3]|0}function t(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}function r(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n[e]+(n[e+1]<<8)+(n[e+2]<<16)+(n[e+3]<<24);return t}function o(n){var r,o,l,i,u,a,s=n.length,c=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=s;r+=64)e(c,t(n.substring(r-64,r)));for(n=n.substring(r-64),o=n.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<o;r+=1)l[r>>2]|=n.charCodeAt(r)<<(r%4<<3);if(l[r>>2]|=128<<(r%4<<3),r>55)for(e(c,l),r=0;r<16;r+=1)l[r]=0;return i=8*s,i=i.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(i[2],16),a=parseInt(i[1],16)||0,l[14]=u,l[15]=a,e(c,l),c}function l(n){var t,o,l,i,u,a,s=n.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)e(c,r(n.subarray(t-64,t)));for(n=t-64<s?n.subarray(t-64):new Uint8Array(0),o=n.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<o;t+=1)l[t>>2]|=n[t]<<(t%4<<3);if(l[t>>2]|=128<<(t%4<<3),t>55)for(e(c,l),t=0;t<16;t+=1)l[t]=0;return i=8*s,i=i.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(i[2],16),a=parseInt(i[1],16)||0,l[14]=u,l[15]=a,e(c,l),c}function i(n){var e,t="";for(e=0;e<4;e+=1)t+=h[n>>8*e+4&15]+h[n>>8*e&15];return t}function u(n){var e;for(e=0;e<n.length;e+=1)n[e]=i(n[e]);return n.join("")}function a(n){return/[\u0080-\uFFFF]/.test(n)&&(n=unescape(encodeURIComponent(n))),n}function s(n,e){var t,r=n.length,o=new ArrayBuffer(r),l=new Uint8Array(o);for(t=0;t<r;t+=1)l[t]=n.charCodeAt(t);return e?l:o}function c(n){return String.fromCharCode.apply(null,new Uint8Array(n))}function d(n,e,t){var r=new Uint8Array(n.byteLength+e.byteLength);return r.set(new Uint8Array(n)),r.set(new Uint8Array(e),n.byteLength),t?r:r.buffer}function f(n){var e,t=[],r=n.length;for(e=0;e<r-1;e+=2)t.push(parseInt(n.substr(e,2),16));return String.fromCharCode.apply(String,t)}function p(){this.reset()}var h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==u(o("hello"))&&function(n,e){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||(function(){function e(n,e){return n=0|n||0,n<0?Math.max(n+e,0):Math.min(n,e)}ArrayBuffer.prototype.slice=function(t,r){var o,l,i,u,a=this.byteLength,s=e(t,a),c=a;return r!==n&&(c=e(r,a)),s>c?new ArrayBuffer(0):(o=c-s,l=new ArrayBuffer(o),i=new Uint8Array(l),u=new Uint8Array(this,s,o),i.set(u),l)}})(),p.prototype.append=function(n){return this.appendBinary(a(n)),this},p.prototype.appendBinary=function(n){this._buff+=n,this._length+=n.length;var r,o=this._buff.length;for(r=64;r<=o;r+=64)e(this._hash,t(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},p.prototype.end=function(n){var e,t,r=this._buff,o=r.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)l[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(l,o),t=u(this._hash),n&&(t=f(t)),this.reset(),t},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},p.prototype.setState=function(n){return this._buff=n.buff,this._length=n.length,this._hash=n.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(n,t){var r,o,l,i=t;if(n[i>>2]|=128<<(i%4<<3),i>55)for(e(this._hash,n),i=0;i<16;i+=1)n[i]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),l=parseInt(r[1],16)||0,n[14]=o,n[15]=l,e(this._hash,n)},p.hash=function(n,e){return p.hashBinary(a(n),e)},p.hashBinary=function(n,e){var t=o(n),r=u(t);return e?f(r):r},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(n){var t,o=d(this._buff.buffer,n,!0),l=o.length;for(this._length+=n.byteLength,t=64;t<=l;t+=64)e(this._hash,r(o.subarray(t-64,t)));return this._buff=t-64<l?new Uint8Array(o.buffer.slice(t-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(n){var e,t,r=this._buff,o=r.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)l[e>>2]|=r[e]<<(e%4<<3);return this._finish(l,o),t=u(this._hash),n&&(t=f(t)),this.reset(),t},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var n=p.prototype.getState.call(this);return n.buff=c(n.buff),n},p.ArrayBuffer.prototype.setState=function(n){return n.buff=s(n.buff,!0),p.prototype.setState.call(this,n)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(n,e){var t=l(new Uint8Array(n)),r=u(t);return e?f(r):r},p}))},1904:function(n,e,t){"use strict";function r(n,e,t){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var o=r.element,l=r.index;if(Array.isArray(o))o.push(n);else if(l===e.length-2){var i=e.pop();o[i]=n}else e.push(n)}e.stringify=function(n){var e=[];e.push({obj:n});for(var t,r,o,l,i,u,a,s,c,d,f,p="";t=e.pop();)if(r=t.obj,o=t.prefix||"",l=t.val||"",p+=o,l)p+=l;else if("object"!=typeof r)p+=void 0===r?null:JSON.stringify(r);else if(null===r)p+="null";else if(Array.isArray(r)){for(e.push({val:"]"}),i=r.length-1;i>=0;i--)u=0===i?"":",",e.push({obj:r[i],prefix:u});e.push({val:"["})}else{a=[];for(s in r)r.hasOwnProperty(s)&&a.push(s);for(e.push({val:"}"}),i=a.length-1;i>=0;i--)c=a[i],d=r[c],f=i>0?",":"",f+=JSON.stringify(c)+":",e.push({obj:d,prefix:f});e.push({val:"{"})}return p},e.parse=function(n){for(var e,t,o,l,i,u,a,s,c,d=[],f=[],p=0;;)if("}"!==(e=n[p++])&&"]"!==e&&void 0!==e)switch(e){case" ":case"\t":case"\n":case":":case",":break;case"n":p+=3,r(null,d,f);break;case"t":p+=3,r(!0,d,f);break;case"f":p+=4,r(!1,d,f);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(t="",p--;;){if(o=n[p++],!/[\d\.\-e\+]/.test(o)){p--;break}t+=o}r(parseFloat(t),d,f);break;case'"':for(l="",i=void 0,u=0;;){if('"'===(a=n[p++])&&("\\"!==i||u%2!=1))break;l+=a,i=a,"\\"===i?u++:u=0}r(JSON.parse('"'+l+'"'),d,f);break;case"[":s={element:[],index:d.length},d.push(s.element),f.push(s);break;case"{":c={element:{},index:d.length},d.push(c.element),f.push(c);break;default:throw new Error("unexpectedly reached end of input: "+e)}else{if(1===d.length)return d.pop();r(d.pop(),d,f)}}},599:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t(0),o=t(1489),l=t(9),i=t(25),u=t(24),a=t(182),s=t(183),c=t(90),d=t(130),f=t(128),p=t(57),h=t(181),v=t(300),g=t(179),m=t(1161),_=t(1334),y=t(1335),b=t(1135),C=t(1130),w=t(1145),E=t(1158),S=t(1410),A=t(1411),O=t(1409),k=t(1182),N=t(1184),R=t(1183),x=t(129);t.d(e,"AgencesModuleNgFactory",(function(){return q}));var T=(function(n){function e(e){return n.call(this,e,[E.a,S.a,A.a,O.a],[O.a])||this}return __extends(e,n),Object.defineProperty(e.prototype,"_NgLocalization_27",{get:function(){return null==this.__NgLocalization_27&&(this.__NgLocalization_27=new l.NgLocaleLocalization(this.parent.get(r.LOCALE_ID))),this.__NgLocalization_27},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ɵi_28",{get:function(){return null==this.__ɵi_28&&(this.__ɵi_28=new u["ɵi"]),this.__ɵi_28},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_FormBuilder_29",{get:function(){return null==this.__FormBuilder_29&&(this.__FormBuilder_29=new u.FormBuilder),this.__FormBuilder_29},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ɵg_30",{get:function(){return null==this.__ɵg_30&&(this.__ɵg_30=new c["ɵg"]),this.__ɵg_30},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_JSONPBackend_31",{get:function(){return null==this.__JSONPBackend_31&&(this.__JSONPBackend_31=new c["ɵa"](this._ɵg_30,this._ResponseOptions_8)),this.__JSONPBackend_31},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_Jsonp_32",{get:function(){return null==this.__Jsonp_32&&(this.__Jsonp_32=c["ɵd"](this._JSONPBackend_31,this._RequestOptions_11)),this.__Jsonp_32},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_Address_33",{get:function(){return null==this.__Address_33&&(this.__Address_33=new b.a),this.__Address_33},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_AddressComponent_34",{get:function(){return null==this.__AddressComponent_34&&(this.__AddressComponent_34=new C.a(this._FormBuilder_29)),this.__AddressComponent_34},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_DataServiceAgence_36",{get:function(){return null==this.__DataServiceAgence_36&&(this.__DataServiceAgence_36=new w.a),this.__DataServiceAgence_36},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_OSMService_37",{get:function(){return null==this.__OSMService_37&&(this.__OSMService_37=new w.b(this._Http_12)),this.__OSMService_37},enumerable:!0,configurable:!0}),e.prototype.createInternal=function(){return this._CommonModule_0=new l.CommonModule,this._RouterModule_1=new i.q(this.parent.get(i.r,null),this.parent.get(i.j,null)),this._ɵba_2=new u["ɵba"],this._FormsModule_3=new u.FormsModule,this._ReactiveFormsModule_4=new u.ReactiveFormsModule,this._TranslateModule_5=new a.a,this._TranslateStore_6=new s.a,this._BrowserXhr_7=new c.BrowserXhr,this._ResponseOptions_8=new c.BaseResponseOptions,this._XSRFStrategy_9=c["ɵb"](),this._XHRBackend_10=new c.XHRBackend(this._BrowserXhr_7,this._ResponseOptions_8,this._XSRFStrategy_9),this._RequestOptions_11=new c.BaseRequestOptions,this._Http_12=c["ɵc"](this._XHRBackend_10,this._RequestOptions_11),this._TranslateLoader_13=h.a(this._Http_12),this._TranslateParser_14=new d.a,this._MissingTranslationHandler_15=new f.a,this._USE_STORE_16=void 0,this._TranslateService_17=new p.a(this._TranslateStore_6,this._TranslateLoader_13,this._TranslateParser_14,this._MissingTranslationHandler_15,this._USE_STORE_16),this._AppTranslationModule_18=new h.b(this._TranslateService_17),this._NgUploaderModule_19=new v.a,this._NgaModule_20=new g.a,this._HttpModule_21=new c.HttpModule,this._JsonpModule_22=new c.JsonpModule,this._AddressModule_23=new m.a,this._AgenceAddModule_24=new _.a,this._AgenceEditModule_25=new y.a,this._AgencesModule_26=new o.a,this._ROUTES_35=[[{path:"",component:k.a},{path:"edit/:id",component:N.a},{path:"add",component:R.a}]],this._AgencesModule_26},e.prototype.getInternal=function(n,e){return n===l.CommonModule?this._CommonModule_0:n===i.q?this._RouterModule_1:n===u["ɵba"]?this._ɵba_2:n===u.FormsModule?this._FormsModule_3:n===u.ReactiveFormsModule?this._ReactiveFormsModule_4:n===a.a?this._TranslateModule_5:n===s.a?this._TranslateStore_6:n===c.BrowserXhr?this._BrowserXhr_7:n===c.ResponseOptions?this._ResponseOptions_8:n===c.XSRFStrategy?this._XSRFStrategy_9:n===c.XHRBackend?this._XHRBackend_10:n===c.RequestOptions?this._RequestOptions_11:n===c.Http?this._Http_12:n===x.a?this._TranslateLoader_13:n===d.b?this._TranslateParser_14:n===f.b?this._MissingTranslationHandler_15:n===p.b?this._USE_STORE_16:n===p.a?this._TranslateService_17:n===h.b?this._AppTranslationModule_18:n===v.a?this._NgUploaderModule_19:n===g.a?this._NgaModule_20:n===c.HttpModule?this._HttpModule_21:n===c.JsonpModule?this._JsonpModule_22:n===m.a?this._AddressModule_23:n===_.a?this._AgenceAddModule_24:n===y.a?this._AgenceEditModule_25:n===o.a?this._AgencesModule_26:n===l.NgLocalization?this._NgLocalization_27:n===u["ɵi"]?this._ɵi_28:n===u.FormBuilder?this._FormBuilder_29:n===c["ɵg"]?this._ɵg_30:n===c.JSONPBackend?this._JSONPBackend_31:n===c.Jsonp?this._Jsonp_32:n===b.a?this._Address_33:n===C.a?this._AddressComponent_34:n===i.u?this._ROUTES_35:n===w.a?this._DataServiceAgence_36:n===w.b?this._OSMService_37:e},e.prototype.destroyInternal=function(){},e})(r["ɵNgModuleInjector"]),q=new r.NgModuleFactory(T,o.a)}});